function roundToWithThousands(t,a,e){var i=1*unFormat(t,a);if("number"==typeof i&&"none"!=e)if(0>=e){var n=-e;i=+(Math.round(i+"e+"+n)+"e-"+n)}else{var n=e,o="1e+"+n;i=+Math.round(i/o)*o}return i=fmtChartJS(t,i,"none")}function unFormat(t,a){if("."==t.decimalSeparator&&""==t.thousandSeparator||"string"!=typeof a)return a;var e=""+a;if(""!=t.thousandSeparator)for(;e.indexOf(t.thousandSeparator)>=0;)e=""+e.replace(t.thousandSeparator,"");return"."!=t.decimalSeparator&&(e=""+e.replace(t.decimalSeparator,".")),1*e}function fmtChartJSPerso(t,a,e){switch(e){case"SampleJS_Format":return_value="number"==typeof a?"My Format : "+a.toString()+" $":a+"XX";break;case"Change_Month":return_value="string"==typeof a?a.toString()+" 2014":a.toString()+"YY";break;default:return_value=a}return return_value}function fmtChartJS(t,a,e){var i;if("notformatted"==e)i=a;else if("none"==e&&"number"==typeof a){if("none"!=t.roundNumber)if(t.roundNumber<=0){var n=-t.roundNumber;a=+(Math.round(a+"e+"+n)+"e-"+n)}else{var n=t.roundNumber,o="1e+"+n;a=+Math.round(a/o)*o}if("."!=t.decimalSeparator||""!=t.thousandSeparator){if(i=a.toString().replace(/\./g,t.decimalSeparator),""!=t.thousandSeparator){var l=i,s="",r=l.indexOf(t.decimalSeparator);r>=0&&(s=l.substring(r+1,l.length),s=s.split("").reverse().join(""),l=l.substring(0,r)),l=l.toString().replace(/\B(?=(\d{3})+(?!\d))/g,t.thousandSeparator),s=s.split("").reverse().join(""),i=l,""!=s&&(i=i+t.decimalSeparator+s)}}else i=a}else i="none"!=e&&"notformatted"!=e?fmtChartJSPerso(t,a,e):a;return i}function addParameters2Function(data,fctName,fctList){var mathFunctions={mean:{data:data.data,datasetNr:data.v11},varianz:{data:data.data,datasetNr:data.v11},stddev:{data:data.data,datasetNr:data.v11},cv:{data:data.data,datasetNr:data.v11},median:{data:data.data,datasetNr:data.v11}};if(dif=!1,"Dif"==fctName.substr(-3)&&(fctName=fctName.substr(0,fctName.length-3),dif=!0),"function"==typeof eval(fctName)){var parameter=eval(fctList+"."+fctName);return dif?data.v3-window[fctName](parameter):window[fctName](parameter)}}function isNumber(t){return!isNaN(parseFloat(t))&&isFinite(t)}function tmplbis(t,a){for(var e=["mean","varianz","stddev","cv","median"],i=new RegExp("<%=((?:(?:.*?)\\W)??)((?:"+e.join("|")+")(?:Dif)?)\\(([0-9]*?)\\)(.*?)%>","g");i.test(t);)t=t.replace(i,function(t,e,i,n,o){if(n)var l=n;else var l=2;var s=addParameters2Function(a,i,"mathFunctions");return isNumber(s)?"<%="+e+Math.round(Math.pow(10,l)*s)/Math.pow(10,l)+o+"%>":"<%= %>"});var n=/^[A-Za-z][-A-Za-z0-9_:.]*$/.test(t)?cachebis[t]=cachebis[t]||tmplbis(document.getElementById(t).innerHTML):new Function("obj","var p=[],print=function(){p.push.apply(p,arguments);};with(obj){p.push('"+t.replace(/[\r\n]/g,"\\n").replace(/[\t]/g," ").split("<%").join("	").replace(/((^|%>)[^\t]*)'/g,"$1\r").replace(/\t=(.*?)%>/g,"',$1,'").split("	").join("');").split("%>").join("p.push('").split("\r").join("\\'")+"');}return p.join('');");return a?n(a):n}function createCursorDiv(){if(0==cursorDivCreated){var t=document.createElement("divCursor");t.id="divCursor",t.style.position="absolute",document.body.appendChild(t),cursorDivCreated=!0}}function addResponsiveChart(t,a,e,i){initChartResize();var n=resizeGraph(a,i);"undefined"!=typeof a.prevWidth&&(resizeCtx(a,n.newWidth,n.newHeight),a.prevWidth=n.newWidth),a.prevWidth=n.newWidth,a.prevHeight=n.newHeight,jsGraphResize[jsGraphResize.length]=[t,a.tpchart,a,e,i]}function initChartResize(){0==initChartJsResize&&window.addEventListener("resize",chartJsResize)}function getMaximumWidth(t){var a=t.parentNode;return a.clientWidth}function getMaximumHeight(t){var a=t.parentNode;return a.clientHeight}function resizeCtx(t,a,e){window.devicePixelRatio?(t.canvas.style.width=a/window.devicePixelRatio+"px",t.canvas.style.height=e/window.devicePixelRatio+"px",t.canvas.height=e/window.devicePixelRatio*window.devicePixelRatio,t.canvas.width=a/window.devicePixelRatio*window.devicePixelRatio,t.scale(window.devicePixelRatio,window.devicePixelRatio)):(t.canvas.height=e,t.canvas.width=a)}function resizeGraph(t,a){"undefined"==typeof a.maintainAspectRatio&&(a.maintainAspectRatio=!0);var e=t.canvas;"undefined"==typeof t.aspectRatio&&(t.aspectRatio=e.width/e.height);var i=getMaximumWidth(e),n=a.maintainAspectRatio?i/t.aspectRatio:getMaximumHeight(e);return{newWidth:parseInt(i),newHeight:parseInt(n)}}function chartJsResize(){for(var t=0;t<jsGraphResize.length;t++)"undefined"!=typeof jsGraphResize[t][2].firstPass&&5==jsGraphResize[t][2].firstPass&&(jsGraphResize[t][2].firstPass=6),subUpdateChart(jsGraphResize[t][2],jsGraphResize[t][3],jsGraphResize[t][4])}function testRedraw(t,a,e){return 2==t.firstPass||4==t.firstPass||9==t.firstPass?(t.firstPass=6,subUpdateChart(t,a,e),!0):(t.firstPass=5,!1)}function updateChart(t,a,e,i,n){5==t.firstPass&&(t.runanimationcompletefunction=n,t.firstPass=i?0:e.responsive?7:7,subUpdateChart(t,a,e))}function subUpdateChart(t,a,e){if(dynamicFunction(a,e,t))if("undefined"==typeof t.firstPass){t.firstPass=1;var i=resizeGraph(t,e);e.responsive?(resizeCtx(t,i.newWidth,i.newHeight),t.prevWidth=i.newWidth,t.prevHeight=i.newHeight):(t.prevWidth=0,t.prevHeight=0),t.runanimationcompletefunction=!0,redrawGraph(t,a,e)}else if(0==t.firstPass){t.firstPass=1;var i=resizeGraph(t,e);e.responsive?(resizeCtx(t,i.newWidth,i.newHeight),t.prevWidth=i.newWidth,t.prevHeight=i.newHeight):(t.prevWidth=0,t.prevHeight=0),redrawGraph(t,a,e)}else if(1==t.firstPass||2==t.firstPass)t.firstPass=2;else if(3==t.firstPass||4==t.firstPass)t.firstPass=4;else if(5==t.firstPass)t.firstPass=1,redrawGraph(t,a,e);else if(6==t.firstPass){var i=resizeGraph(t,e);i.newWidth!=t.prevWidth||i.newHeight!=t.prevHeight?(t.firstPass=3,t.clearRect(0,0,t.canvas.width,t.canvas.height),e.responsive?(resizeCtx(t,i.newWidth,i.newHeight),t.prevWidth=i.newWidth,t.prevHeight=i.newHeight):(t.prevWidth=0,t.prevHeight=0),redrawGraph(t,a,e)):t.firstPass=5}else if(7==t.firstPass){var i=resizeGraph(t,e);t.firstPass=3,t.clearRect(0,0,t.canvas.width,t.canvas.height),e.responsive?(resizeCtx(t,i.newWidth,i.newHeight),t.prevWidth=i.newWidth,t.prevHeight=i.newHeight):(t.prevWidth=0,t.prevHeight=0),redrawGraph(t,a,e)}}function redrawGraph(t,a,e){var i=new Chart(t);switch(t.tpchart){case"Bar":i.Bar(a,e);break;case"Pie":i.Pie(a,e);break;case"Doughnut":i.Doughnut(a,e);break;case"Radar":i.Radar(a,e);break;case"PolarArea":i.PolarArea(a,e);break;case"HorizontalBar":i.HorizontalBar(a,e);break;case"StackedBar":i.StackedBar(a,e);break;case"HorizontalStackedBar":i.HorizontalStackedBar(a,e);break;case"Line":i.Line(a,e)}}function checkBrowser(){return this.ver=navigator.appVersion,this.dom=document.getElementById?1:0,this.ie5=this.ver.indexOf("MSIE 5")>-1&&this.dom?1:0,this.ie4=document.all&&!this.dom?1:0,this.ns5=this.dom&&parseInt(this.ver)>=5?1:0,this.ns4=document.layers&&!this.dom?1:0,this.bw=this.ie5||this.ie4||this.ns4||this.ns5,this}function cursorInit(){scrolled=bw.ns4||bw.ns5?"window.pageYOffset":"document.body.scrollTop",bw.ns4&&document.captureEvents(Event.MOUSEMOVE)}function makeCursorObj(obj,nest){return createCursorDiv(),nest=nest?"document."+nest+".":"",this.css=bw.dom?document.getElementById(obj).style:bw.ie4?document.all[obj].style:bw.ns4?eval(nest+"document.layers."+obj):0,this.moveIt=b_moveIt,cursorInit(),this}function b_moveIt(t,a){this.x=t,this.y=a,this.css.left=this.x+"px",this.css.top=this.y+"px"}function isIE(){var t=navigator.userAgent.toLowerCase();return-1!=t.indexOf("msie")?parseInt(t.split("msie")[1]):!1}function mergeChartConfig(t,a){var e={};for(var i in t)e[i]=t[i];for(var i in a)e[i]=a[i];return e}function sleep(t){var a=new Date;for(a.setTime(a.getTime()+t);(new Date).getTime()<a.getTime(););}function saveCanvas(t,a,e){cvSave=t.getImageData(0,0,t.canvas.width,t.canvas.height);var i={savePng:!1,annotateDisplay:!1,animation:!1,dynamicDisplay:!1},n=mergeChartConfig(e,i);if(n.clearRect=!1,redrawGraph(t,a,n),"NewWindow"==e.savePngOutput){var o=t.canvas.toDataURL();t.putImageData(cvSave,0,0),window.open(o,"_blank")}if("CurrentWindow"==e.savePngOutput){var o=t.canvas.toDataURL();t.putImageData(cvSave,0,0),window.location.href=o}if("Save"==e.savePngOutput){var o=t.canvas.toDataURL(),l=document.createElement("a");l.href=o,l.download=e.savePngName+".png",document.body.appendChild(l),l.click(),document.body.removeChild(l)}}function dynamicFunction(t,a,e){if(isIE()<9&&0!=isIE())return!0;if(a.dynamicDisplay){if(""==e.canvas.id){var i=new Date,n=i.getTime();e.canvas.id="Canvas_"+n}if("undefined"==typeof dynamicDisplay[e.canvas.id]?(dynamicDisplayList[dynamicDisplayList.length]=e.canvas.id,dynamicDisplay[e.canvas.id]=[e,!1,!1,t,a,e.canvas],dynamicDisplay[e.canvas.id][1]=isScrolledIntoView(e.canvas),window.onscroll=scrollFunction):0==dynamicDisplay[e.canvas.id][2]&&(dynamicDisplay[e.canvas.id][1]=isScrolledIntoView(e.canvas)),0==dynamicDisplay[e.canvas.id][1]&&0==dynamicDisplay[e.canvas.id][2])return!1;dynamicDisplay[e.canvas.id][2]=!0}return!0}function isScrolledIntoView(t){var a=0,e=0;for(elem=t;elem;)a+=elem.offsetLeft-elem.scrollLeft+elem.clientLeft,e+=elem.offsetTop-elem.scrollTop+elem.clientTop,elem=elem.offsetParent;return a+t.width/2>=window.pageXOffset&&a+t.width/2<=window.pageXOffset+window.innerWidth&&e+t.height/2>=window.pageYOffset&&e+t.height/2<=window.pageYOffset+window.innerHeight?!0:!1}function scrollFunction(){for(var t=0;t<dynamicDisplayList.length;t++)isScrolledIntoView(dynamicDisplay[dynamicDisplayList[t]][5])&&0==dynamicDisplay[dynamicDisplayList[t]][2]&&(dynamicDisplay[dynamicDisplayList[t]][1]=!0,redrawGraph(dynamicDisplay[dynamicDisplayList[t]][0],dynamicDisplay[dynamicDisplayList[t]][3],dynamicDisplay[dynamicDisplayList[t]][4]))}function clearAnnotate(t){jsGraphAnnotate[t]=[]}function getMousePos(t,a){var e=t.getBoundingClientRect();return{x:a.clientX-e.left,y:a.clientY-e.top}}function doMouseAction(config,ctx,event,data,action,funct){var onData=!1;if("annotate"==action){var annotateDIV=document.getElementById("divCursor"),show=!1;annotateDIV.className=config.annotateClassName?config.annotateClassName:"",annotateDIV.style.border=config.annotateClassName?"":config.annotateBorder,annotateDIV.style.padding=config.annotateClassName?"":config.annotatePadding,annotateDIV.style.borderRadius=config.annotateClassName?"":config.annotateBorderRadius,annotateDIV.style.backgroundColor=config.annotateClassName?"":config.annotateBackgroundColor,annotateDIV.style.color=config.annotateClassName?"":config.annotateFontColor,annotateDIV.style.fontFamily=config.annotateClassName?"":config.annotateFontFamily,annotateDIV.style.fontSize=config.annotateClassName?"":config.annotateFontSize+"pt",annotateDIV.style.fontStyle=config.annotateClassName?"":config.annotateFontStyle}for("annotate"==action&&(show=!1,annotateDIV.style.display=show?"":"none"),canvas_pos=getMousePos(ctx.canvas,event),i=0;i<jsGraphAnnotate[ctx.ChartNewId].length;i++){if("ARC"==jsGraphAnnotate[ctx.ChartNewId][i][0]){if(distance=Math.sqrt((canvas_pos.x-jsGraphAnnotate[ctx.ChartNewId][i][1])*(canvas_pos.x-jsGraphAnnotate[ctx.ChartNewId][i][1])+(canvas_pos.y-jsGraphAnnotate[ctx.ChartNewId][i][2])*(canvas_pos.y-jsGraphAnnotate[ctx.ChartNewId][i][2])),distance>jsGraphAnnotate[ctx.ChartNewId][i][3]&&distance<jsGraphAnnotate[ctx.ChartNewId][i][4]){for(angle=Math.acos((canvas_pos.x-jsGraphAnnotate[ctx.ChartNewId][i][1])/distance),canvas_pos.y<jsGraphAnnotate[ctx.ChartNewId][i][2]&&(angle=-angle);0>angle;)angle+=2*Math.PI;for(;angle>2*Math.PI;)angle-=2*Math.PI;angle<config.startAngle*(Math.PI/360)&&(angle+=2*Math.PI),(angle>jsGraphAnnotate[ctx.ChartNewId][i][5]&&angle<jsGraphAnnotate[ctx.ChartNewId][i][6]||angle>jsGraphAnnotate[ctx.ChartNewId][i][5]-2*Math.PI&&angle<jsGraphAnnotate[ctx.ChartNewId][i][6]-2*Math.PI||angle>jsGraphAnnotate[ctx.ChartNewId][i][5]+2*Math.PI&&angle<jsGraphAnnotate[ctx.ChartNewId][i][6]+2*Math.PI)&&(v1=fmtChartJS(config,jsGraphAnnotate[ctx.ChartNewId][i][7],config.fmtV1),v2=fmtChartJS(config,jsGraphAnnotate[ctx.ChartNewId][i][8],config.fmtV2),v3=fmtChartJS(config,jsGraphAnnotate[ctx.ChartNewId][i][9],config.fmtV3),v4=fmtChartJS(config,jsGraphAnnotate[ctx.ChartNewId][i][10],config.fmtV4),v5=fmtChartJS(config,jsGraphAnnotate[ctx.ChartNewId][i][11],config.fmtV5),v6=fmtChartJS(config,100*jsGraphAnnotate[ctx.ChartNewId][i][8]/jsGraphAnnotate[ctx.ChartNewId][i][10],config.fmtV6),v6=roundToWithThousands(config,v6,config.roundPct),v7=fmtChartJS(config,jsGraphAnnotate[ctx.ChartNewId][i][1],config.fmtV7),v8=fmtChartJS(config,jsGraphAnnotate[ctx.ChartNewId][i][2],config.fmtV8),v9=fmtChartJS(config,jsGraphAnnotate[ctx.ChartNewId][i][3],config.fmtV9),v10=fmtChartJS(config,jsGraphAnnotate[ctx.ChartNewId][i][4],config.fmtV10),v11=fmtChartJS(config,jsGraphAnnotate[ctx.ChartNewId][i][5],config.fmtV11),v12=fmtChartJS(config,jsGraphAnnotate[ctx.ChartNewId][i][6],config.fmtV12),v13=fmtChartJS(config,jsGraphAnnotate[ctx.ChartNewId][i][12],config.fmtV13),graphPosX=canvas_pos.x,graphPosY=canvas_pos.y,onData=!0,"annotate"==action?(dispString=tmplbis(config.annotateLabel,{config:config,v1:v1,v2:v2,v3:v3,v4:v4,v5:v5,v6:v6,v7:v7,v8:v8,v9:v9,v10:v10,v11:v11,v12:v12,v13:v13,graphPosX:graphPosX,graphPosY:graphPosY}),annotateDIV.innerHTML=dispString,show=!0):funct(event,ctx,config,data,{v1:v1,v2:v2,v3:v3,v4:v4,v5:v5,v6:v6,v7:v7,v8:v8,v9:v9,v10:v10,v11:v11,v12:v12,v13:v13,graphPosX:graphPosX,graphPosY:graphPosY}),"annotate"==action&&(x=bw.ns4||bw.ns5?event.pageX:event.x,y=bw.ns4||bw.ns5?event.pageY:event.y,(bw.ie4||bw.ie5)&&(y+=eval(scrolled)),oCursor.moveIt(x+fromLeft,y+fromTop)))}}else"RECT"==jsGraphAnnotate[ctx.ChartNewId][i][0]?canvas_pos.x>jsGraphAnnotate[ctx.ChartNewId][i][1]&&canvas_pos.x<jsGraphAnnotate[ctx.ChartNewId][i][3]&&canvas_pos.y<jsGraphAnnotate[ctx.ChartNewId][i][2]&&canvas_pos.y>jsGraphAnnotate[ctx.ChartNewId][i][4]&&(v1=fmtChartJS(config,jsGraphAnnotate[ctx.ChartNewId][i][5],config.fmtV1),v2=fmtChartJS(config,jsGraphAnnotate[ctx.ChartNewId][i][6],config.fmtV2),v3=fmtChartJS(config,jsGraphAnnotate[ctx.ChartNewId][i][7],config.fmtV3),v4=fmtChartJS(config,jsGraphAnnotate[ctx.ChartNewId][i][8],config.fmtV4),v5=fmtChartJS(config,jsGraphAnnotate[ctx.ChartNewId][i][9],config.fmtV5),v6=fmtChartJS(config,100*jsGraphAnnotate[ctx.ChartNewId][i][7]/jsGraphAnnotate[ctx.ChartNewId][i][9],config.fmtV6),v6=roundToWithThousands(config,v6,config.roundPct),v7=fmtChartJS(config,jsGraphAnnotate[ctx.ChartNewId][i][1],config.fmtV7),v8=fmtChartJS(config,jsGraphAnnotate[ctx.ChartNewId][i][2],config.fmtV8),v9=fmtChartJS(config,jsGraphAnnotate[ctx.ChartNewId][i][3],config.fmtV9),v10=fmtChartJS(config,jsGraphAnnotate[ctx.ChartNewId][i][4],config.fmtV10),v11=fmtChartJS(config,jsGraphAnnotate[ctx.ChartNewId][i][10],config.fmtV11),v12=fmtChartJS(config,jsGraphAnnotate[ctx.ChartNewId][i][11],config.fmtV12),graphPosX=canvas_pos.x,graphPosY=canvas_pos.y,onData=!0,"annotate"==action?(dispString=tmplbis(config.annotateLabel,{config:config,v1:v1,v2:v2,v3:v3,v4:v4,v5:v5,v6:v6,v7:v7,v8:v8,v9:v9,v10:v10,v11:v11,v12:v12,graphPosX:graphPosX,graphPosY:graphPosY,data:data}),annotateDIV.innerHTML=dispString,show=!0):funct(event,ctx,config,data,{v1:v1,v2:v2,v3:v3,v4:v4,v5:v5,v6:v6,v7:v7,v8:v8,v9:v9,v10:v10,v11:v11,v12:v12,graphPosX:graphPosX,graphPosY:graphPosY}),"annotate"==action&&(x=bw.ns4||bw.ns5?event.pageX:event.x,y=bw.ns4||bw.ns5?event.pageY:event.y,(bw.ie4||bw.ie5)&&(y+=eval(scrolled)),oCursor.moveIt(x+fromLeft,y+fromTop))):"POINT"==jsGraphAnnotate[ctx.ChartNewId][i][0]&&(distance=Math.sqrt((canvas_pos.x-jsGraphAnnotate[ctx.ChartNewId][i][1])*(canvas_pos.x-jsGraphAnnotate[ctx.ChartNewId][i][1])+(canvas_pos.y-jsGraphAnnotate[ctx.ChartNewId][i][2])*(canvas_pos.y-jsGraphAnnotate[ctx.ChartNewId][i][2])),10>distance&&(v1=fmtChartJS(config,jsGraphAnnotate[ctx.ChartNewId][i][3],config.fmtV1),v2=fmtChartJS(config,jsGraphAnnotate[ctx.ChartNewId][i][4],config.fmtV2),v3=fmtChartJS(config,jsGraphAnnotate[ctx.ChartNewId][i][5],config.fmtV3),v4=fmtChartJS(config,jsGraphAnnotate[ctx.ChartNewId][i][6],config.fmtV4),v5=fmtChartJS(config,jsGraphAnnotate[ctx.ChartNewId][i][7],config.fmtV5),v6=fmtChartJS(config,jsGraphAnnotate[ctx.ChartNewId][i][8],config.fmtV6),v7=fmtChartJS(config,jsGraphAnnotate[ctx.ChartNewId][i][9],config.fmtV7),v8=fmtChartJS(config,100*jsGraphAnnotate[ctx.ChartNewId][i][5]/jsGraphAnnotate[ctx.ChartNewId][i][9],config.fmtV8),v8=roundToWithThousands(config,v8,config.roundPct),v9=fmtChartJS(config,jsGraphAnnotate[ctx.ChartNewId][i][1],config.fmtV9),v10=fmtChartJS(config,jsGraphAnnotate[ctx.ChartNewId][i][2],config.fmtV10),v11=fmtChartJS(config,jsGraphAnnotate[ctx.ChartNewId][i][10],config.fmtV11),v12=fmtChartJS(config,jsGraphAnnotate[ctx.ChartNewId][i][11],config.fmtV12),graphPosX=canvas_pos.x,graphPosY=canvas_pos.y,onData=!0,"annotate"==action?(dispString=tmplbis(config.annotateLabel,{config:config,v1:v1,v2:v2,v3:v3,v4:v4,v5:v5,v6:v6,v7:v7,v8:v8,v9:v9,v10:v10,v11:v11,v12:v12,graphPosX:graphPosX,graphPosY:graphPosY,data:data}),annotateDIV.innerHTML=dispString,show=!0):funct(event,ctx,config,data,{v1:v1,v2:v2,v3:v3,v4:v4,v5:v5,v6:v6,v7:v7,v8:v8,v9:v9,v10:v10,v11:v11,v12:v12,graphPosX:graphPosX,graphPosY:graphPosY}),"annotate"==action&&(x=bw.ns4||bw.ns5?event.pageX:event.x,y=bw.ns4||bw.ns5?event.pageY:event.y,(bw.ie4||bw.ie5)&&(y+=eval(scrolled)),oCursor.moveIt(x+fromLeft,y+fromTop))));"annotate"==action&&(annotateDIV.style.display=show?"":"none")}0==onData&&"annotate"!=action&&funct(event,ctx,config,data,null)}function animationCorrection(t,a,e,i,n,o){var l=t,s=0;if(-1!=n){1>l&&i<e.animationStartWithDataset-1&&e.animationStartWithDataset-1!=-1&&(l=1),1>l&&n<e.animationStartWithData-1&&e.animationStartWithData-1!=-1&&(l=1);var r=1,d=t;if(1>l&&e.animationByDataset){l=0,r=0;var c=e.animationStartWithDataset-1;e.animationStartWithDataset-1==-1&&(c=0);var h=e.animationSteps/(a.datasets.length-c);if(t>=(i-c+1)*h/e.animationSteps)l=1;else if(t>=(i-c)*h/e.animationSteps){var f=t-(i-c)*h/e.animationSteps;e.animationLeftToRight?d=f*(a.datasets.length-c):l=f*(a.datasets.length-c),r=1}}if(1==r&&1>l&&e.animationLeftToRight){l=0;var g=e.animationStartWithData-1;e.animationStartWithData-1==-1&&(g=0);var p=e.animationSteps/(a.datasets[i].data.length-g-1+o);d>=(n-g)*p/e.animationSteps&&(l=1,d<=(n+1-g)*p/e.animationSteps&&(s=(a.datasets[i].data.length-g-1)*(d-(n-g)*p/e.animationSteps)))}}else 1>l&&i<e.animationStartWithData-1&&(l=1);return{mainVal:l,subVal:s,animVal:l+s}}function drawLegend(t,a,e,i,n){1==e.legendBorders&&(i.save(),i.beginPath(),i.lineWidth=e.legendBordersWidth,i.strokeStyle=e.legendBordersColors,i.moveTo(t.xLegendBorderPos,t.yLegendBorderPos),i.lineTo(t.xLegendBorderPos,t.yLegendBorderPos+t.legendBorderHeight),i.lineTo(t.xLegendBorderPos+t.legendBorderWidth,t.yLegendBorderPos+t.legendBorderHeight),i.lineTo(t.xLegendBorderPos+t.legendBorderWidth,t.yLegendBorderPos),i.lineTo(t.xLegendBorderPos,t.yLegendBorderPos),i.lineTo(t.xLegendBorderPos+t.legendBorderWidth,t.yLegendBorderPos),i.lineTo(t.xLegendBorderPos,t.yLegendBorderPos),i.lineTo(t.xLegendBorderPos,t.yLegendBorderPos+t.legendBorderHeight),i.stroke(),i.closePath(),i.fillStyle="rgba(0,0,0,0)",i.fillStyle=e.legendFillColor,i.fill(),i.restore()),nbcols=t.nbLegendCols-1,ypos=t.yFirstLegendTextPos-(e.legendFontSize+e.legendSpaceBetweenTextVertical),xpos=0,fromi=t.drawLegendOnData?a.datasets.length:a.length;for(var o=fromi-1;o>=0;o--)orderi=o,t.reverseLegend&&(orderi=t.drawLegendOnData?a.datasets.length-o-1:a.length-o-1),tpof=t.drawLegendOnData?typeof a.datasets[orderi].title:typeof a[orderi].title,"string"==tpof&&(lgtxt=t.drawLegendOnData?fmtChartJS(e,a.datasets[orderi].title,e.fmtLegend).trim():fmtChartJS(e,a[orderi].title,e.fmtLegend).trim(),""!=lgtxt&&(nbcols++,nbcols==t.nbLegendCols?(nbcols=0,xpos=t.xFirstLegendTextPos,ypos+=e.legendFontSize+e.legendSpaceBetweenTextVertical):xpos+=t.widestLegend+e.legendSpaceBetweenTextHorizontal,i.save(),i.beginPath(),i.strokeStyle=t.drawLegendOnData?"function"==typeof a.datasets[orderi].strokeColor?a.datasets[orderi].strokeColor("STROKECOLOR",a,e,orderi,-1,1,-1,n,i,-1,-1,-1,-1):"string"==typeof a.datasets[orderi].strokeColor?a.datasets[orderi].strokeColor:e.defaultStrokeColor:"function"==typeof a[orderi].color?a[orderi].color("COLOR",a,e,orderi,-1,1,a[orderi].value,n,i,1,1,1,1):"string"==typeof a[orderi].color?a[orderi].color:e.defaultStrokeColor,t.legendBox?(i.lineWidth=1,i.moveTo(xpos,ypos),i.lineTo(xpos+e.legendBlockSize,ypos),i.lineTo(xpos+e.legendBlockSize,ypos-e.legendFontSize),i.lineTo(xpos,ypos-e.legendFontSize),i.lineTo(xpos,ypos),i.closePath(),i.fillStyle=t.drawLegendOnData?"function"==typeof a.datasets[orderi].fillColor?a.datasets[orderi].fillColor("LEGENDFILLCOLOR",a,e,orderi,-1,1,-1,n,i,xpos,ypos,xpos+e.legendBlockSize,ypos-e.legendFontSize):"string"==typeof a.datasets[orderi].fillColor?a.datasets[orderi].fillColor:e.defaultFillColor:"function"==typeof a[orderi].color?a[orderi].color("LEGENDFILLCOLOR",a,e,orderi,-1,1,-1,n,i,xpos,ypos-e.legendFontSize,xpos+e.legendBlockSize,ypos):"string"==typeof a[orderi].color?a[orderi].color:e.defaultFillColor,i.fill()):(i.lineWidth=e.legendColorIndicatorStrokeWidth?e.legendColorIndicatorStrokeWidth:e.datasetStrokeWidth,e.legendColorIndicatorStrokeWidth&&e.legendColorIndicatorStrokeWidth>e.legendFontSize&&(i.lineWidth=e.legendFontSize),i.moveTo(xpos+2,ypos-e.legendFontSize/2),i.lineTo(xpos+2+e.legendBlockSize,ypos-e.legendFontSize/2)),i.stroke(),i.restore(),i.save(),i.beginPath(),i.font=e.legendFontStyle+" "+e.legendFontSize+"px "+e.legendFontFamily,i.fillStyle=e.legendFontColor,i.textAlign="left",i.textBaseline="bottom",i.translate(xpos+e.legendBlockSize+e.legendSpaceBetweenBoxAndText,ypos),i.fillText(lgtxt,0,0),i.stroke(),i.restore()))}"function"!=typeof String.prototype.trim&&(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),Array.prototype.indexOf||(Array.prototype.indexOf=function(t){"use strict";if(null==this)throw new TypeError;var a=Object(this),e=a.length>>>0;if(0===e)return-1;var i=0;if(arguments.length>0&&(i=Number(arguments[1]),i!=i?i=0:0!=i&&1/0!=i&&i!=-1/0&&(i=(i>0||-1)*Math.floor(Math.abs(i)))),i>=e)return-1;for(var n=i>=0?i:Math.max(e-Math.abs(i),0);e>n;n++)if(n in a&&a[n]===t)return n;return-1});var charJSPersonalDefaultOptions={},charJSPersonalDefaultOptionsLine={},charJSPersonalDefaultOptionsRadar={},charJSPersonalDefaultOptionsPolarArea={},charJSPersonalDefaultOptionsPie={},charJSPersonalDefaultOptionsDoughnut={},charJSPersonalDefaultOptionsBar={},charJSPersonalDefaultOptionsStackedBar={},charJSPersonalDefaultOptionsHorizontalBar={},charJSPersonalDefaultOptionsHorizontalStackedBar={},cachebis={};CanvasRenderingContext2D.prototype.fillTextMultiLine=function(t,a,e,i,n){var o=(""+t).split("\n");"middle"==i?e-=(o.length-1)/2*n:"bottom"==i&&(e-=(o.length-1)*n);for(var l=0;l<o.length;l++)this.fillText(o[l],a,e),e+=n},CanvasRenderingContext2D.prototype.measureTextMultiLine=function(t,a){for(var e,i=0,n=(""+t).split("\n"),o=n.length*a,l=0;l<n.length;l++)e=this.measureText(n[l]).width,e>i&&(i=e);return{textWidth:i,textHeight:o}},cursorDivCreated=!1,initChartJsResize=!1;var jsGraphResize=new Array;bw=new checkBrowser,fromLeft=10,fromTop=10,"function"!=typeof String.prototype.trim&&(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")});var dynamicDisplay=new Array,dynamicDisplayList=new Array,jsGraphAnnotate=new Array;window.Chart=function(context){function setting_new_chart_vars(t){if("undefined"==typeof t.ChartNewId){t.runanimationcompletefunction=!0;var a=new Date,e=a.getTime();t.ChartNewId=t.tpchart+"_"+e,t._eventListeners={}}}function reverseData(t){t.labels=t.labels.reverse();for(var a=0;a<t.datasets.length;a++)for(var e in t.datasets[a])Array.isArray(t.datasets[a][e])&&(t.datasets[a][e]=t.datasets[a][e].reverse());return t}function calculateOffset(t,a,e,i){if(t)return CapValue(log10(a)*i-calculateOrderOfMagnitude(e.graphMin)*i,void 0,0);var n=e.steps*e.stepValue,o=a-e.graphMin,l=CapValue(o/n,1,0);return i*e.steps*l}function animationLoop(t,a,e,i,n,o,l,s,r,d,c,h,f){function g(){var g=t.animation?CapValue(x(b),null,0):1;1*u>=1*CapValue(t.animationSteps,Number.MAX_VALUE,1)||0==t.animation||3==i.firstPass||4==i.firstPass||8==i.firstPass||9==i.firstPass?g=1:g>=1&&(g=.9999),!t.animation||isIE()<9&&0!=isIE()||!t.clearRect||i.clearRect(n,o,l,s),dispCrossImage(i,t,r,d,c,h,!1,f,g,u),dispCrossText(i,t,r,d,c,h,!1,f,g,u),t.scaleOverlay?(e(g),a()):(a(),e(g)),dispCrossImage(i,t,r,d,c,h,!0,f,g,u),dispCrossText(i,t,r,d,c,h,!0,f,g,u)}function p(){u+=v,b+=v*S,u==t.animationSteps||0==t.animation||3==i.firstPass||4==i.firstPass||8==i.firstPass||9==i.firstPass?b=1:b>=1&&(b=.999),g(),-1==v&&P>=u?("function"==typeof t.onAnimationComplete&&1==i.runanimationcompletefunction&&t.onAnimationComplete(i,t,f,0,m+1),v=1,requestAnimFrame(p)):b<t.animationStopValue?requestAnimFrame(p):!(m<t.animationCount||0==t.animationCount)||1!=i.firstPass&&2==i.firstPass?testRedraw(i,f,t)||"function"==typeof t.onAnimationComplete&&1==i.runanimationcompletefunction&&(t.onAnimationComplete(i,t,f,1,m+1),i.runanimationcompletefunction=!1):(m++,t.animationBackward&&1==v?(b-=S,v=-1):(v=1,u=P-1,b=A-S),window.setTimeout(p,1e3*t.animationPauseTime))}var u=0,m=1,v=1;(t.animationStartValue<0||t.animationStartValue>1)&&(t.animation.StartValue=0),(t.animationStopValue<0||t.animationStopValue>1)&&(t.animation.StopValue=1),t.animationStopValue<t.animationStartValue&&(t.animationStopValue=t.animationStartValue),isIE()<9&&0!=isIE()&&(t.animation=!1);var S=t.animation?1/CapValue(t.animationSteps,Number.MAX_VALUE,1):1,x=animationOptions[t.animationEasing],b=t.animation?0:1;if(t.animation&&t.animationStartValue>0&&t.animationStartValue<=1)for(;b<t.animationStartValue;)u++,b+=S;var P=u,A=b;"function"!=typeof a&&(a=function(){}),t.clearRect?requestAnimFrame(p):p()}function calculateScale(t,a,e,i,n,o,l){var s,r,d,c,h,f,g,p,u;if(2==t?(p=a.logarithmic2,u=a.yAxisMinimumInterval2):(p=a.logarithmic,u=a.yAxisMinimumInterval),p){var m=calculateOrderOfMagnitude(o),v=calculateOrderOfMagnitude(n)+1;s=Math.pow(10,m),r=Math.pow(10,v),g=v-m}else if(f=n-o,g=calculateOrderOfMagnitude(f),s=Math.floor(o/(1*Math.pow(10,g)))*Math.pow(10,g),r=Math.ceil(n/(1*Math.pow(10,g)))*Math.pow(10,g),"number"==typeof u){for(s-=s%u;s>o;)s-=u;for(r%u>1e-7&&u-1e-7>r%u&&(r=roundScale(a,(1+Math.floor(r/u))*u));n>r;)r+=u}if(d=r-s,c=Math.pow(10,g),h=Math.round(d/c),p)h=g;else{for(var S=!1;!S&&(i>h||h>e);)i>h?("number"==typeof u&&u>c/2&&(S=!0),S||(c/=2,h=Math.round(d/c))):(c*=2,h=Math.round(d/c));"number"==typeof u&&(u>c&&(c=u,h=Math.round(d/c)),c%u>1e-7&&u-1e-7>c%u&&(1e-7>2*c%u||2*c%u>u-1e-7?(c=2*c,h=Math.round(d/c)):(c=roundScale(a,(1+Math.floor(c/u))*u),h=Math.round(d/c))))}var x=[];return populateLabels(1,a,l,x,h,s,r,c),{steps:h,stepValue:c,graphMin:s,labels:x,maxValue:n}}function calculateScaleOld(t,a,e,i,n,o){var l,s,r,d,c,h,f;if(t.logarithmic){var g=calculateOrderOfMagnitude(n),p=calculateOrderOfMagnitude(i)+1;l=Math.pow(10,g),s=Math.pow(10,p),f=p-g}else if(h=i-n,f=calculateOrderOfMagnitude(h),l=Math.floor(n/(1*Math.pow(10,f)))*Math.pow(10,f),s=Math.ceil(i/(1*Math.pow(10,f)))*Math.pow(10,f),"number"==typeof t.yAxisMinimumInterval){for(l-=l%t.yAxisMinimumInterval;l>n;)l-=t.yAxisMinimumInterval;for(s%t.yAxisMinimumInterval>1e-7&&s%t.yAxisMinimumInterval<t.yAxisMinimumInterval-1e-7&&(s=roundScale(t,(1+Math.floor(s/t.yAxisMinimumInterval))*t.yAxisMinimumInterval));i>s;)s+=t.yAxisMinimumInterval}if(r=s-l,d=Math.pow(10,f),c=Math.round(r/d),t.logarithmic)c=f;else{for(var u=!1;!u&&(e>c||c>a);)e>c?("number"==typeof t.yAxisMinimumInterval&&d/2<t.yAxisMinimumInterval&&(u=!0),u||(d/=2,c=Math.round(r/d))):(d*=2,c=Math.round(r/d));"number"==typeof t.yAxisMinimumInterval&&(d<t.yAxisMinimumInterval&&(d=t.yAxisMinimumInterval,c=Math.round(r/d)),d%t.yAxisMinimumInterval>1e-7&&d%t.yAxisMinimumInterval<t.yAxisMinimumInterval-1e-7&&(2*d%t.yAxisMinimumInterval<1e-7||2*d%t.yAxisMinimumInterval>t.yAxisMinimumInterval-1e-7?(d=2*d,c=Math.round(r/d)):(d=roundScale(t,(1+Math.floor(d/t.yAxisMinimumInterval))*t.yAxisMinimumInterval),c=Math.round(r/d))))}var m=[];return populateLabels(1,t,o,m,c,l,s,d),{steps:c,stepValue:d,graphMin:l,labels:m,maxValue:i}}function roundScale(t,a){var e=0,i=""+t.yAxisMinimumInterval;return i.indexOf(".")>0&&(e=i.substr(i.indexOf(".")).length),Math.round(a*Math.pow(10,e))/Math.pow(10,e)}function calculateOrderOfMagnitude(t){return Math.floor(Math.log(t)/Math.LN10)}function populateLabels(t,a,e,i,n,o,l,s){var r;if(2==t?(r=a.logarithmic2,fmtYLabel=a.fmtYLabel2):(r=a.logarithmic,fmtYLabel=a.fmtYLabel),e)if(r)for(var d=o,c=0;n+1>c;c++)i.push(tmpl(e,{value:fmtChartJS(a,1*d.toFixed(getDecimalPlaces(d)),fmtYLabel)})),d*=10;else for(var c=0;n+1>c;c++)i.push(tmpl(e,{value:fmtChartJS(a,1*(o+s*c).toFixed(getDecimalPlaces(s)),fmtYLabel)}))}function Max(t){return Math.max.apply(Math,t)}function Min(t){return Math.min.apply(Math,t)}function Default(t,a){return t?t:a}function CapValue(t,a,e){return isNumber(a)&&t>a?a:isNumber(e)&&e>t?e:t}function getDecimalPlaces(t){return t%1!=0?t.toString().split(".")[1].length:0}function mergeChartConfig(t,a){var e={};for(var i in t)e[i]=t[i];for(var i in a)e[i]=a[i];return e}function tmpl(t,a){var e=/\W/.test(t)?new Function("obj","var p=[],print=function(){p.push.apply(p,arguments);};with(obj){p.push('"+t.replace(/[\r\t\n]/g," ").split("<%").join("	").replace(/((^|%>)[^\t]*)'/g,"$1\r").replace(/\t=(.*?)%>/g,"',$1,'").split("	").join("');").split("%>").join("p.push('").split("\r").join("\\'")+"');}return p.join('');"):cache[t]=cache[t]||tmpl(document.getElementById(t).innerHTML);return a?e(a):e}function dispCrossText(t,a,e,i,n,o,l,s,r,d){var c,h,f,g,p,u;for(c=0;c<a.crossText.length;c++)if(""!=a.crossText[c]&&a.crossTextOverlay[Min([c,a.crossTextOverlay.length-1])]==l&&(1==d&&"first"==a.crossTextIter[Min([c,a.crossTextIter.length-1])]||a.crossTextIter[Min([c,a.crossTextIter.length-1])]==d||"all"==a.crossTextIter[Min([c,a.crossTextIter.length-1])]||1==r&&"last"==a.crossTextIter[Min([c,a.crossTextIter.length-1])])){switch(t.save(),t.beginPath(),t.font=a.crossTextFontStyle[Min([c,a.crossTextFontStyle.length-1])]+" "+a.crossTextFontSize[Min([c,a.crossTextFontSize.length-1])]+"px "+a.crossTextFontFamily[Min([c,a.crossTextFontFamily.length-1])],t.fillStyle=a.crossTextFontColor[Min([c,a.crossTextFontColor.length-1])],p=a.crossTextAlign[Min([c,a.crossTextAlign.length-1])],u=a.crossTextBaseline[Min([c,a.crossTextBaseline.length-1])],f=1*a.crossTextPosX[Min([c,a.crossTextPosX.length-1])],g=1*a.crossTextPosY[Min([c,a.crossTextPosY.length-1])],1*a.crossTextRelativePosX[Min([c,a.crossTextRelativePosX.length-1])]){case 0:"default"==p&&(p="left");break;case 1:f+=n,"default"==p&&(p="right");break;case 2:f+=e,"default"==p&&(p="center");break;case-2:f+=context.canvas.width/2,"default"==p&&(p="center");break;case 3:f+=f+2*e-n,"default"==p&&(p="left");break;case 4:f+=context.canvas.width,"default"==p&&(p="right");break;default:f+=e,"default"==p&&(p="center")}switch(1*a.crossTextRelativePosY[Min([c,a.crossTextRelativePosY.length-1])]){case 0:"default"==u&&(u="top");break;case 3:g+=o,"default"==u&&(u="top");break;case 2:g+=i,"default"==u&&(u="middle");break;case-2:g+=context.canvas.height/2,"default"==u&&(u="middle");break;case 1:g+=g+2*i-o,"default"==u&&(u="bottom");break;case 4:g+=context.canvas.height,"default"==u&&(u="bottom");break;default:g+=i,"default"==u&&(u="middle")}t.textAlign=p,t.textBaseline=u,t.translate(1*f,1*g),t.rotate(Math.PI*a.crossTextAngle[Min([c,a.crossTextAngle.length-1])]/180),"%"==a.crossText[c].substring(0,1)?"function"==typeof a.crossTextFunction&&(h=a.crossTextFunction(c,a.crossText[c],t,a,e,i,n,o,l,s,r)):h=a.crossText[c],t.fillTextMultiLine(h,0,0,t.textBaseline,a.crossTextFontSize[Min([c,a.crossTextFontSize.length-1])]),t.stroke(),t.restore()}}function dispCrossImage(t,a,e,i,n,o,l,s,r,d){var c,h,f,g,p;for(c=0;c<a.crossImage.length;c++)if("undefined"!=typeof a.crossImage[c]&&a.crossImageOverlay[Min([c,a.crossImageOverlay.length-1])]==l&&(-1==d&&"background"==a.crossImageIter[Min([c,a.crossImageIter.length-1])]||1==d&&"first"==a.crossImageIter[Min([c,a.crossImageIter.length-1])]||a.crossImageIter[Min([c,a.crossImageIter.length-1])]==d||-1!=d&&"all"==a.crossImageIter[Min([c,a.crossImageIter.length-1])]||1==r&&"last"==a.crossImageIter[Min([c,a.crossImageIter.length-1])])){switch(t.save(),t.beginPath(),g=a.crossImageAlign[Min([c,a.crossImageAlign.length-1])],p=a.crossImageBaseline[Min([c,a.crossImageBaseline.length-1])],h=1*a.crossImagePosX[Min([c,a.crossImagePosX.length-1])],f=1*a.crossImagePosY[Min([c,a.crossImagePosY.length-1])],1*a.crossImageRelativePosX[Min([c,a.crossImageRelativePosX.length-1])]){case 0:"default"==g&&(g="left");
break;case 1:h+=n,"default"==g&&(g="right");break;case 2:h+=e,"default"==g&&(g="center");break;case-2:h+=context.canvas.width/2,"default"==g&&(g="center");break;case 3:h+=h+2*e-n,"default"==g&&(g="left");break;case 4:h+=context.canvas.width,"default"==g&&(g="right");break;default:h+=e,"default"==g&&(g="center")}switch(1*a.crossImageRelativePosY[Min([c,a.crossImageRelativePosY.length-1])]){case 0:"default"==p&&(p="top");break;case 3:f+=o,"default"==p&&(p="top");break;case 2:f+=i,"default"==p&&(p="middle");break;case-2:f+=context.canvas.height/2,"default"==p&&(p="middle");break;case 1:f+=f+2*i-o,"default"==p&&(p="bottom");break;case 4:f+=context.canvas.height,"default"==p&&(p="bottom");break;default:f+=i,"default"==p&&(p="middle")}var u=a.crossImage[c].width;switch(g){case"left":break;case"right":h-=u;break;case"center":h-=u/2}var m=a.crossImage[c].height;switch(p){case"top":break;case"bottom":f-=m;break;case"middle":f-=m/2}t.translate(1*h,1*f),t.rotate(Math.PI*a.crossImageAngle[Min([c,a.crossImageAngle.length-1])]/180),t.drawImage(a.crossImage[c],0,0),t.restore()}}function setMeasures(t,a,e,i,n,o,l,s,r,d,c,h,f){"none"!=a.canvasBackgroundColor&&(e.canvas.style.background=a.canvasBackgroundColor);var g=0,p=0,u=0,m=0,v=0,S=0,x=0,b=0,P=0,A=0,y=0,C=0,M=0,w=0,L=0,T=0,I=0,G=0,B=0,D=0,V=0,F=0,k=0,z=0,R=1,W=1,O=0,H=1,N=0,J=1,Y=0,X=0,j=0,U=0,E=0,_=0;if(e.widthAtSetMeasures=n,e.heightAtSetMeasures=i,a.canvasBorders&&(g=a.canvasBordersWidth),d){e.font=a.scaleFontStyle+" "+a.scaleFontSize+"px "+a.scaleFontFamily;for(var q=0;q<t.labels.length;q++){var Q=e.measureTextMultiLine(fmtChartJS(a,t.labels[q],a.fmtXLabel),a.scaleFontSize);R=Q.textWidth>R?Q.textWidth:R,W=Q.textHeight>W?Q.textHeight:W}R<a.xScaleLabelsMinimumWidth&&(R=a.xScaleLabelsMinimumWidth)}if(d){if(O=1,null!=o&&"nihil"!=o){e.font=a.scaleFontStyle+" "+a.scaleFontSize+"px "+a.scaleFontFamily;for(var q=o.length-1;q>=0;q--)if("string"==typeof o[q]&&""!=o[q].trim()){var Q=e.measureTextMultiLine(fmtChartJS(a,o[q],a.fmtYLabel),a.scaleFontSize);O=Q.textWidth>O?Q.textWidth:O,H=Q.textHeight>H?Q.textHeight:H}}if(O<a.yScaleLabelsMinimumWidth&&(O=a.yScaleLabelsMinimumWidth),N=1,null!=l&&a.yAxisRight){e.font=a.scaleFontStyle+" "+a.scaleFontSize+"px "+a.scaleFontFamily;for(var q=l.length-1;q>=0;q--)if("string"==typeof l[q]&&""!=l[q].trim()){var Q=e.measureTextMultiLine(fmtChartJS(a,l[q],a.fmtYLabel2),a.scaleFontSize);N=Q.textWidth>N?Q.textWidth:N,J=Q.textHeight>J?Q.textHeight:J}}else N=O;N<a.yScaleLabelsMinimumWidth&&(N=a.yScaleLabelsMinimumWidth)}if(Y=g+a.spaceLeft,X=g+a.spaceRight,d&&("undefined"!=typeof a.yAxisLabel&&""!=a.yAxisLabel.trim()&&(D=a.yAxisFontSize+a.yAxisLabelSpaceLeft+a.yAxisLabelSpaceRight,V=g+a.spaceLeft+a.yAxisLabelSpaceLeft+a.yAxisFontSize,F=n-g-a.spaceRight-a.yAxisLabelSpaceLeft-a.yAxisFontSize),a.yAxisLeft&&(Y=0==r?g+a.spaceLeft+D+O+a.yAxisSpaceLeft+a.yAxisSpaceRight:g+a.spaceLeft+D+R+a.yAxisSpaceLeft+a.yAxisSpaceRight),a.yAxisRight&&(X=0==r?g+a.spaceRight+D+N+a.yAxisSpaceLeft+a.yAxisSpaceRight:g+a.spaceRight+D+R+a.yAxisSpaceLeft+a.yAxisSpaceRight)),availableWidth=n-Y-X,""!=a.graphTitle.trim()&&(u=a.graphTitleFontSize+a.graphTitleSpaceBefore+a.graphTitleSpaceAfter,m=g+a.spaceTop+u-a.graphTitleSpaceAfter),""!=a.graphSubTitle.trim()&&(v=a.graphSubTitleFontSize+a.graphSubTitleSpaceBefore+a.graphSubTitleSpaceAfter,S=g+a.spaceTop+u+v-a.graphSubTitleSpaceAfter),d&&""!=a.yAxisUnit.trim()&&(P=a.yAxisUnitFontSize+a.yAxisUnitSpaceBefore+a.yAxisUnitSpaceAfter,A=g+a.spaceTop+u+v+P-a.yAxisUnitSpaceAfter),topNotUsableSize=g+a.spaceTop+u+v+P+a.graphSpaceBefore,"undefined"!=typeof a.footNote&&""!=a.footNote.trim()&&(x=a.footNoteFontSize+a.footNoteSpaceBefore+a.footNoteSpaceAfter,b=i-a.spaceBottom-g-a.footNoteSpaceAfter),d&&"undefined"!=typeof a.xAxisLabel&&""!=a.xAxisLabel.trim()&&(k=a.xAxisFontSize+a.xAxisLabelSpaceBefore+a.xAxisLabelSpaceAfter,p=i-g-a.spaceBottom-x-a.xAxisLabelSpaceAfter),bottomNotUsableHeightWithoutXLabels=g+a.spaceBottom+x+k+a.graphSpaceAfter,"undefined"!=typeof a.legend&&1==a.legend){if(e.font=a.legendFontStyle+" "+a.legendFontSize+"px "+a.legendFontFamily,c){for(var q=t.datasets.length-1;q>=0;q--)if("string"==typeof t.datasets[q].title&&""!=t.datasets[q].title.trim()){C++;var K=e.measureText(fmtChartJS(a,t.datasets[q].title,a.fmtLegend)).width;y=K>y?K:y}}else for(var q=t.length-1;q>=0;q--)if("string"==typeof t[q].title&&""!=t[q].title.trim()){C++;var K=e.measureText(fmtChartJS(a,t[q].title,a.fmtLegend)).width;y=K>y?K:y}if(C>1||1==C&&a.showSingleLegend){y+=a.legendBlockSize+a.legendSpaceBetweenBoxAndText,availableLegendWidth=1==a.legendPosY||2==a.legendPosY||3==a.legendPosY?availableWidth-a.legendSpaceLeftText-a.legendSpaceRightText:n-a.spaceLeft-a.spaceRight-2*g-a.legendSpaceLeftText-a.legendSpaceRightText,1==a.legendBorders&&(availableLegendWidth-=2*a.legendBordersWidth-a.legendBordersSpaceLeft-a.legendBordersSpaceRight),maxLegendOnLine=Min([Math.floor((availableLegendWidth+a.legendSpaceBetweenTextHorizontal)/(y+a.legendSpaceBetweenTextHorizontal)),a.maxLegendCols]),M=Math.ceil(C/maxLegendOnLine),w=Math.ceil(C/M);var $=M*(a.legendFontSize+a.legendSpaceBetweenTextVertical)-a.legendSpaceBetweenTextVertical+a.legendSpaceBeforeText+a.legendSpaceAfterText;switch(1==a.legendBorders,a.legendPosY){case 0:T=a.spaceLeft+(n-a.spaceLeft-a.spaceRight-w*(y+a.legendSpaceBetweenTextHorizontal)+a.legendSpaceBetweenTextHorizontal)/2,L=$,1==a.legendBorders?(B=topNotUsableSize+a.legendBordersSpaceBefore+a.legendBordersWidth/2,I=B+a.legendBordersWidth/2+a.legendSpaceBeforeText+a.legendFontSize,L+=2*a.legendBordersWidth+a.legendBordersSpaceBefore+a.legendBordersSpaceAfter,G=Math.floor(T-a.legendSpaceLeftText-a.legendBordersWidth/2),_=Math.ceil(L-a.legendBordersWidth)-a.legendBordersSpaceBefore-a.legendBordersSpaceAfter,E=Math.ceil(w*(y+a.legendSpaceBetweenTextHorizontal))-a.legendSpaceBetweenTextHorizontal+a.legendBordersWidth+a.legendSpaceRightText+a.legendSpaceLeftText):I=topNotUsableSize+a.legendBordersSpaceBefore+a.legendBordersWidth/2,P>0&&(A+=L,1==a.legendBorders&&(B-=P),I-=P),topNotUsableSize+=L;break;case 1:L=$,T=a.spaceLeft+(n-a.spaceLeft-a.spaceRight-w*(y+a.legendSpaceBetweenTextHorizontal)+a.legendSpaceBetweenTextHorizontal)/2,I=topNotUsableSize+a.legendSpaceBeforeText+a.legendFontSize,1==a.legendBorders&&(I+=a.legendBordersSpaceBefore+a.legendBordersWidth,B=I-a.legendSpaceBeforeText-a.legendFontSize-a.legendBordersWidth/2,L+=2*a.legendBordersWidth+a.legendBordersSpaceBefore+a.legendBordersSpaceAfter,G=Math.floor(T-a.legendSpaceLeftText-a.legendBordersWidth/2),_=Math.ceil(L-a.legendBordersWidth)-a.legendBordersSpaceBefore-a.legendBordersSpaceAfter,E=Math.ceil(w*(y+a.legendSpaceBetweenTextHorizontal))-a.legendSpaceBetweenTextHorizontal+a.legendBordersWidth+a.legendSpaceRightText+a.legendSpaceLeftText);break;case 2:L=$,T=a.spaceLeft+(n-a.spaceLeft-a.spaceRight-w*(y+a.legendSpaceBetweenTextHorizontal)+a.legendSpaceBetweenTextHorizontal)/2,I=topNotUsableSize+(i-topNotUsableSize-bottomNotUsableHeightWithoutXLabels-L)/2+a.legendSpaceBeforeText+a.legendFontSize,1==a.legendBorders&&(I+=a.legendBordersSpaceBefore-a.legendBordersSpaceAfter,B=I-a.legendSpaceBeforeText-a.legendFontSize-a.legendBordersWidth/2,L+=2*a.legendBordersWidth+a.legendBordersSpaceBefore+a.legendBordersSpaceAfter,G=Math.floor(T-a.legendSpaceLeftText-a.legendBordersWidth/2),_=Math.ceil(L-a.legendBordersWidth)-a.legendBordersSpaceBefore-a.legendBordersSpaceAfter,E=Math.ceil(w*(y+a.legendSpaceBetweenTextHorizontal))-a.legendSpaceBetweenTextHorizontal+a.legendBordersWidth+a.legendSpaceRightText+a.legendSpaceLeftText);break;case 3:L=$,T=a.spaceLeft+(n-a.spaceLeft-a.spaceRight-w*(y+a.legendSpaceBetweenTextHorizontal)+a.legendSpaceBetweenTextHorizontal)/2,availableHeight=i-topNotUsableSize-bottomNotUsableHeightWithoutXLabels,I=topNotUsableSize+availableHeight-L+a.legendSpaceBeforeText+a.legendFontSize,1==a.legendBorders&&(I-=a.legendBordersSpaceAfter+a.legendBordersWidth,B=I-a.legendSpaceBeforeText-a.legendFontSize-a.legendBordersWidth/2,L+=2*a.legendBordersWidth+a.legendBordersSpaceBefore+a.legendBordersSpaceAfter,G=Math.floor(T-a.legendSpaceLeftText-a.legendBordersWidth/2),_=Math.ceil(L-a.legendBordersWidth)-a.legendBordersSpaceBefore-a.legendBordersSpaceAfter,E=Math.ceil(w*(y+a.legendSpaceBetweenTextHorizontal))-a.legendSpaceBetweenTextHorizontal+a.legendBordersWidth+a.legendSpaceRightText+a.legendSpaceLeftText);break;default:L=$,I=i-g-a.spaceBottom-x-L+a.legendSpaceBeforeText+a.legendFontSize,T=a.spaceLeft+(n-a.spaceLeft-a.spaceRight-w*(y+a.legendSpaceBetweenTextHorizontal)+a.legendSpaceBetweenTextHorizontal)/2,1==a.legendBorders&&(L+=2*a.legendBordersWidth+a.legendBordersSpaceBefore+a.legendBordersSpaceAfter,I-=a.legendBordersWidth+a.legendBordersSpaceAfter,B=Math.floor(i-g-a.spaceBottom-x-L+a.legendBordersWidth/2+a.legendBordersSpaceBefore),G=Math.floor(T-a.legendSpaceLeftText-a.legendBordersWidth/2),_=Math.ceil(L-a.legendBordersWidth)-a.legendBordersSpaceBefore-a.legendBordersSpaceAfter,E=Math.ceil(w*(y+a.legendSpaceBetweenTextHorizontal))-a.legendSpaceBetweenTextHorizontal+a.legendBordersWidth+a.legendSpaceRightText+a.legendSpaceLeftText),p-=L,bottomNotUsableHeightWithoutXLabels+=L}var Z=a.legendSpaceRightText+w*(y+a.legendSpaceBetweenTextHorizontal)-a.legendSpaceBetweenTextHorizontal+a.legendSpaceLeftText;switch(1==a.legendBorders&&(Z+=2*a.legendBordersWidth+a.legendBordersSpaceLeft+a.legendBordersSpaceRight),a.legendPosX){case 0:T=a.spaceLeft+a.canvasBorders*a.canvasBordersWidth+a.legendSpaceLeftText,1==a.legendBorders&&(T+=a.legendBordersWidth+a.legendBordersSpaceLeft,G=a.spaceLeft+a.canvasBorders*a.canvasBordersWidth+a.legendBordersSpaceLeft),a.legendPosY>=1&&a.legendPosY<=3&&(Y+=Z,V+=Z);break;case 1:T=Y+a.legendSpaceLeftText,1==a.legendBorders&&(G=T,T+=a.legendBordersWidth+a.legendBordersSpaceLeft);break;case 2:T=Y+(n-X-Y)/2-(a.legendSpaceLeftText-a.legendSpaceRightText)-(w*(y+a.legendSpaceBetweenTextHorizontal)-a.legendSpaceBetweenTextHorizontal)/2,1==a.legendBorders&&(T-=a.legendBordersWidth+a.legendBordersSpaceRight,G=T-a.legendBordersWidth/2-a.legendSpaceLeftText);break;case 3:T=n-X-a.legendSpaceRightText-w*(y+a.legendSpaceBetweenTextHorizontal)+a.legendSpaceBetweenTextHorizontal/2,1==a.legendBorders&&(T-=a.legendBordersWidth+a.legendBordersSpaceRight,G=T-a.legendBordersWidth/2-a.legendSpaceLeftText);break;case 4:T=n-a.spaceRight-a.canvasBorders*a.canvasBordersWidth-a.legendSpaceRightText-w*(y+a.legendSpaceBetweenTextHorizontal)+a.legendSpaceBetweenTextHorizontal/2,1==a.legendBorders&&(T-=a.legendBordersWidth+a.legendBordersSpaceRight,G=T-a.legendBordersSpaceLeft-a.legendBordersWidth/2),a.legendPosY>=1&&a.legendPosY<=3&&(X+=Z,F-=Z)}1==a.legendBorders&&(B+=a.legendYPadding,G+=a.legendXPadding),I+=a.legendYPadding,T+=a.legendXPadding}}if(xLabelWidth=0,bottomNotUsableHeightWithXLabels=bottomNotUsableHeightWithoutXLabels,d&&(a.xAxisBottom||a.xAxisTop)){if(0==r){var ta=R,aa=W;nblab=t.labels.length}else{var ta=O,aa=H;nblab=o.length}"smart"==a.rotateLabels?(j=0,(availableWidth+a.xAxisSpaceBetweenLabels)/nblab<ta+a.xAxisSpaceBetweenLabels&&(j=45,availableWidth/nblab<Math.abs(Math.cos(j*Math.PI/180)*ta)&&(j=90))):(j=a.rotateLabels,0>j&&(j=0),j>180&&(j=180)),j>90&&(j+=180),z=Math.abs(Math.sin(j*Math.PI/180)*ta)+Math.abs(Math.sin((j+90)*Math.PI/180)*aa)+a.xAxisSpaceBefore+a.xAxisSpaceAfter,U=i-g-a.spaceBottom-x-k-(z-a.xAxisSpaceBefore)-a.graphSpaceAfter,xLabelWidth=Math.abs(Math.cos(j*Math.PI/180)*ta)+Math.abs(Math.cos((j+90)*Math.PI/180)*aa),Y=Max([Y,g+a.spaceLeft+xLabelWidth/2]),X=Max([X,g+a.spaceRight+xLabelWidth/2]),availableWidth=n-Y-X,a.legend&&a.xAxisBottom&&4==a.legendPosY&&(U-=L),bottomNotUsableHeightWithXLabels=bottomNotUsableHeightWithoutXLabels+z}else availableWidth=n-Y-X;if(availableHeight=i-topNotUsableSize-bottomNotUsableHeightWithXLabels,dispCrossImage(e,a,n/2,i/2,n/2,i/2,!1,t,-1,-1),"nihil"!=o){if(g>0&&(e.save(),e.beginPath(),e.lineWidth=2*g,e.strokeStyle=a.canvasBordersColor,e.moveTo(0,0),e.lineTo(0,i),e.lineTo(n,i),e.lineTo(n,0),e.lineTo(0,0),e.stroke(),e.restore()),u>0&&(e.save(),e.beginPath(),e.font=a.graphTitleFontStyle+" "+a.graphTitleFontSize+"px "+a.graphTitleFontFamily,e.fillStyle=a.graphTitleFontColor,e.textAlign="center",e.textBaseline="bottom",e.translate(a.spaceLeft+(n-a.spaceLeft-a.spaceRight)/2,m),e.fillText(a.graphTitle,0,0),e.stroke(),e.restore()),v>0&&(e.save(),e.beginPath(),e.font=a.graphSubTitleFontStyle+" "+a.graphSubTitleFontSize+"px "+a.graphSubTitleFontFamily,e.fillStyle=a.graphSubTitleFontColor,e.textAlign="center",e.textBaseline="bottom",e.translate(a.spaceLeft+(n-a.spaceLeft-a.spaceRight)/2,S),e.fillText(a.graphSubTitle,0,0),e.stroke(),e.restore()),P>0&&(a.yAxisLeft&&(e.save(),e.beginPath(),e.font=a.yAxisUnitFontStyle+" "+a.yAxisUnitFontSize+"px "+a.yAxisUnitFontFamily,e.fillStyle=a.yAxisUnitFontColor,e.textAlign="center",e.textBaseline="bottom",e.translate(Y,A),e.fillText(a.yAxisUnit,0,0),e.stroke(),e.restore()),a.yAxisRight&&(""==a.yAxisUnit2&&(a.yAxisUnit2=a.yAxisUnit),e.save(),e.beginPath(),e.font=a.yAxisUnitFontStyle+" "+a.yAxisUnitFontSize+"px "+a.yAxisUnitFontFamily,e.fillStyle=a.yAxisUnitFontColor,e.textAlign="center",e.textBaseline="bottom",e.translate(n-X,A),e.fillText(a.yAxisUnit2,0,0),e.stroke(),e.restore())),D>0&&(a.yAxisLeft&&(e.save(),e.beginPath(),e.font=a.yAxisFontStyle+" "+a.yAxisFontSize+"px "+a.yAxisFontFamily,e.fillStyle=a.yAxisFontColor,e.textAlign="center",e.textBaseline="bottom",e.translate(V,topNotUsableSize+availableHeight/2),e.rotate(-(90*(Math.PI/180))),e.fillText(a.yAxisLabel,0,0),e.stroke(),e.restore()),a.yAxisRight&&(""==a.yAxisLabel2&&(a.yAxisLabel2=a.yAxisLabel),e.save(),e.beginPath(),e.font=a.yAxisFontStyle+" "+a.yAxisFontSize+"px "+a.yAxisFontFamily,e.fillStyle=a.yAxisFontColor,e.textAlign="center",e.textBaseline="bottom",e.translate(F,topNotUsableSize+availableHeight/2),e.rotate(+(90*(Math.PI/180))),e.fillText(a.yAxisLabel2,0,0),e.stroke(),e.restore())),k>0&&a.xAxisBottom&&(e.save(),e.beginPath(),e.font=a.xAxisFontStyle+" "+a.xAxisFontSize+"px "+a.xAxisFontFamily,e.fillStyle=a.xAxisFontColor,e.textAlign="center",e.textBaseline="bottom",e.translate(Y+availableWidth/2,p),e.fillText(a.xAxisLabel,0,0),e.stroke(),e.restore()),C>1||1==C&&a.showSingleLegend){var ea={dispLegend:!0,xLegendBorderPos:G,yLegendBorderPos:B,legendBorderWidth:E,legendBorderHeight:_,nbLegendCols:w,xFirstLegendTextPos:T,yFirstLegendTextPos:I,drawLegendOnData:c,reverseLegend:s,legendBox:h,widestLegend:y};if(0==a.legendPosY||4==a.legendPosY||0==a.legendPosX||4==a.legendPosX){drawLegend(ea,t,a,e,f);var ea={dispLegend:!1}}}else var ea={dispLegend:!1};""!=a.footNote.trim()&&(e.save(),e.font=a.footNoteFontStyle+" "+a.footNoteFontSize+"px "+a.footNoteFontFamily,e.fillStyle=a.footNoteFontColor,e.textAlign="center",e.textBaseline="bottom",e.translate(Y+availableWidth/2,b),e.fillText(a.footNote,0,0),e.stroke(),e.restore())}return clrx=Y,clrwidth=availableWidth,clry=topNotUsableSize,clrheight=availableHeight,{leftNotUsableSize:Y,rightNotUsableSize:X,availableWidth:availableWidth,topNotUsableSize:topNotUsableSize,bottomNotUsableHeightWithoutXLabels:bottomNotUsableHeightWithoutXLabels,bottomNotUsableHeightWithXLabels:bottomNotUsableHeightWithXLabels,availableHeight:availableHeight,widestXLabel:R,highestXLabel:W,widestYLabel:O,widestYLabel2:N,highestYLabel:H,rotateLabels:j,xLabelPos:U,clrx:clrx,clry:clry,clrwidth:clrwidth,clrheight:clrheight,legendMsr:ea}}function drawLinesDataset(a,e,i,n,o,l,s){function r(t,a){return c-u-S.mainVal*(calculateOffset(v,i.datasets[t].data[a],m,p)-u)}function d(t,a,e){if("object"==typeof e.datasets[t].xPos&&"undefined"!=typeof e.datasets[t].xPos[Math.floor(a+1e-4)]){var i=f*g,n="undefined"!=typeof e.xBegin?e.xBegin:1*e.labels[0],o="undefined"!=typeof e.xEnd?e.xEnd:1*e.labels[e.labels.length-1];if(n>=o&&(o=n+100),1*e.datasets[t].xPos[Math.floor(a+1e-4)]>=n&&e.datasets[t].xPos[Math.floor(a+1e-4)]<=o){var l=h+i*((1*e.datasets[t].xPos[Math.floor(a+1e-4)]-n)/(o-n)),s=l;if(Math.abs(a-Math.floor(a+1e-4))>1e-4)var s=(a+Math.floor(a+1e-4),d(t,Math.ceil(a-1e-4),e));return l+(a-Math.floor(a+1e-4))*(s-l)}}return h+f*a}for(var c=s.xAxisPosY,h=s.yAxisPosX,f=s.valueHop,g=s.nbValueHop,p=s.scaleHop,u=s.zeroY,m=s.calculatedScale,v=s.logarithmic,S=animationCorrection(e,i,n,0,0,0),x=new Array,b=new Array,P=new Array,A=new Array,y=0;y<i.datasets.length;y++)if(P[y]=-999999999,A[y]=999999999,2==a&&2==i.datasets[y].axis||2!=a&&2!=i.datasets[y].axis)for(var C=0;C<i.datasets[y].data.length;C++)x[C]=0,b[C]=-999999999;S.mainVal=1;for(var y=0;y<i.datasets.length;y++)if(2==a&&2==i.datasets[y].axis||2!=a&&2!=i.datasets[y].axis)for(var C=0;C<i.datasets[y].data.length;C++)x[C]+=i.datasets[y].data[C],b[C]=Max([b[C],i.datasets[y].data[C]]),P[y]=Max([P[y],r(y,C)]),A[y]=Min([A[y],r(y,C)]);for(var y=0;y<i.datasets.length;y++)if(2==a&&2==i.datasets[y].axis||2!=a&&2!=i.datasets[y].axis){var M=-1,w=-1;o.strokeStyle="function"==typeof i.datasets[y].strokeColor?i.datasets[y].strokeColor("STROKECOLOR",i,n,y,-1,e,-1,"Line",o,h,P[y],h+f*(i.datasets[y].data.length-1),P[y]-(n.animationLeftToRight?1:1*S.mainVal)*(P[y]-A[y])):"string"==typeof i.datasets[y].strokeColor?i.datasets[y].strokeColor:n.defaultStrokeColor,o.lineWidth=n.datasetStrokeWidth,o.beginPath();var L,T;L=0,prevnotempty=0;for(var C=0;C<i.datasets[y].data.length;C++){var I=d(y,C,i);if(S=animationCorrection(e,i,n,y,C,0),0==S.mainVal&&L>0&&(o.stroke(),o.strokeStyle="rgba(0,0,0,0)",o.lineTo(T,c-u)),L=S.mainVal,S.mainVal>=1&&(lgtxt="string"==typeof i.datasets[y].title?i.datasets[y].title.trim():""),"undefined"!=typeof i.datasets[y].data[C]){if(T=d(y,C,i),-1==M?(o.moveTo(I,r(y,C)),w=C):n.bezierCurve?o.bezierCurveTo(d(y,C-(C-M)/2,i),r(y,M),d(y,C-(C-M)/2,i),r(y,C),d(y,C,i),r(y,C)):o.lineTo(d(y,C,i),r(y,C)),"undefined"!=typeof i.datasets[y].data[C+1]||1==n.extrapolateMissingData){if(S.subVal>0){for(nxtnotmiss=-1,t=C+1;t<i.datasets[y].data.length&&-1==nxtnotmiss;t++)"undefined"!=typeof i.datasets[y].data[t]&&(nxtnotmiss=t);-1!=nxtnotmiss&&(T=d(y,C+S.subVal,i),n.bezierCurve?o.bezierCurveTo(d(y,C+S.subVal/2,i),r(y,C),d(y,C+S.subVal/2,i),r(y,nxtnotmiss),d(y,C+S.subVal,i),r(y,nxtnotmiss)):o.lineTo(d(y,C+S.subVal,i),r(y,C+1)))}if(M=C,e>=1&&(divprev=0==y?i.datasets[y].data[C]:i.datasets[y].data[C]-i.datasets[y-1].data[C],divnext=y==i.datasets.length-1?i.datasets[y].data[C]:i.datasets[y].data[C]-i.datasets[y+1].data[C],lgtxt2="","undefined"!=typeof i.datasets[y].xPos&&"undefined"!=typeof i.datasets[y].xPos[C]&&(lgtxt2=i.datasets[y].xPos[C]),""==lgtxt2&&"undefined"!=typeof i.labels[C]&&(lgtxt2=i.labels[C]),"string"==typeof lgtxt2&&(lgtxt2=lgtxt2.trim()),jsGraphAnnotate[o.ChartNewId][jsGraphAnnotate[o.ChartNewId].length]=["POINT",d(y,C,i),r(y,C),lgtxt,lgtxt2,1*i.datasets[y].data[C],divprev,divnext,b[C],x[C],y,C],n.inGraphDataShow)){o.save(),o.textAlign=n.inGraphDataAlign,o.textBaseline=n.inGraphDataVAlign,o.font=n.inGraphDataFontStyle+" "+n.inGraphDataFontSize+"px "+n.inGraphDataFontFamily,o.fillStyle=n.inGraphDataFontColor;var G=(c-S.mainVal*calculateOffset(v,i.datasets[y].data[C],m,p),n.inGraphDataPaddingX),B=n.inGraphDataPaddingY,D=tmplbis(n.inGraphDataTmpl,{config:n,v1:fmtChartJS(n,lgtxt,n.fmtV1),v2:fmtChartJS(n,lgtxt2,n.fmtV2),v3:fmtChartJS(n,1*i.datasets[y].data[C],n.fmtV3),v4:fmtChartJS(n,divprev,n.fmtV4),v5:fmtChartJS(n,divnext,n.fmtV5),v6:fmtChartJS(n,b[C],n.fmtV6),v7:fmtChartJS(n,x[C],n.fmtV7),v8:roundToWithThousands(n,fmtChartJS(n,100*i.datasets[y].data[C]/x[C],n.fmtV8),n.roundPct),v9:fmtChartJS(n,h+f*V,n.fmtV9),v10:fmtChartJS(n,c-calculateOffset(v,i.datasets[y].data[C],m,p),n.fmtV10),v11:fmtChartJS(n,y,n.fmtV11),v12:fmtChartJS(n,C,n.fmtV12),data:i});o.translate(d(y,C,i)+G,r(y,C)-B),o.rotate(n.inGraphDataRotate*(Math.PI/180)),o.fillTextMultiLine(D,0,0,o.textBaseline,n.inGraphDataFontSize),o.restore()}}}else if(0==n.extrapolateMissingData)o.stroke(),n.datasetFill&&(o.lineTo(T,c-u),o.lineTo(d(y,w,i),c-u),o.lineTo(d(y,w,i),r(y,w)),o.closePath(),o.fillStyle="function"==typeof i.datasets[y].fillColor?i.datasets[y].fillColor("FILLCOLOR",i,n,y,-1,S.mainVal,-1,"Line",o,h,P[y],h+f*(i.datasets[y].data.length-1),P[y]-(n.animationLeftToRight?1:1*S.mainVal)*(P[y]-A[y])):"string"==typeof i.datasets[y].fillColor?i.datasets[y].fillColor:n.defaultFillColor,o.fill()),o.beginPath(),M=-1,w=-1,L=0,prevnotempty=0;else if(S.subVal>0){for(nxtnotmiss=-1,t=C+1;t<i.datasets[y].data.length&&-1==nxtnotmiss;t++)"undefined"!=typeof i.datasets[y].data[t]&&(nxtnotmiss=t);("undefined"!=typeof i.datasets[y].data[C]||1==n.extrapolateMissingData)&&-1!=nxtnotmiss&&(T=d(y,C+S.subVal,i),n.bezierCurve?o.bezierCurveTo(d(y,M+(C+S.subVal-M)/2,i),r(y,M),d(y,M+(C+S.subVal-M)/2,i),r(y,nxtnotmiss),d(y,C+S.subVal,i),r(y,nxtnotmiss)):o.lineTo(d(y,C+S.subVal,i),r(y,C+1)))}}if(o.stroke(),n.datasetFill?(o.lineTo(T,c-u),o.lineTo(d(y,w,i),c-u),o.lineTo(d(y,w,i),r(y,w)),o.closePath(),o.fillStyle="function"==typeof i.datasets[y].fillColor?i.datasets[y].fillColor("FILLCOLOR",i,n,y,-1,S.mainVal,-1,"Line",o,h,P[y],h+f*(i.datasets[y].data.length-1),P[y]-(n.animationLeftToRight?1:1*S.mainVal)*(P[y]-A[y])):"string"==typeof i.datasets[y].fillColor?i.datasets[y].fillColor:n.defaultFillColor,o.fill()):o.closePath(),n.pointDot){o.fillStyle="function"==typeof i.datasets[y].pointColor?i.datasets[y].pointColor("POINTCOLOR",i,n,y,-1,e,-1,"Line",o,h,P[y],h+f*(i.datasets[y].data.length-1),P[y]-(n.animationLeftToRight?1:1*S.mainVal)*(P[y]-A[y])):i.datasets[y].pointColor,o.strokeStyle="function"==typeof i.datasets[y].pointStrokeColor?i.datasets[y].pointStrokeColor("POINTSTROKECOLOR",i,n,y,-1,e,-1,"Line",o,h,P[y],h+f*(i.datasets[y].data.length-1),P[y]-(n.animationLeftToRight?1:1*S.mainVal)*(P[y]-A[y])):i.datasets[y].pointStrokeColor,o.lineWidth=n.pointDotStrokeWidth;for(var V=0;V<i.datasets[y].data.length;V++)if("undefined"!=typeof i.datasets[y].data[V]){var S=animationCorrection(e,i,n,y,V,0);(S.mainVal>0||!n.animationLeftToRight)&&(o.beginPath(),o.arc(d(y,V,i),r(y,V),n.pointDotRadius,0,2*Math.PI,!0),o.fill(),o.stroke())}}}}function log10(t){return Math.log(t)/Math.LN10}function setRect(t,a){a.clearRect?a.multiGraph||(clear(t),t.clearRect(0,0,width,height)):(clear(t),t.clearRect(0,0,width,height),t.fillStyle=a.savePngBackgroundColor,t.strokeStyle=a.savePngBackgroundColor,t.beginPath(),t.moveTo(0,0),t.lineTo(0,t.canvas.height),t.lineTo(t.canvas.width,t.canvas.height),t.lineTo(t.canvas.width,0),t.lineTo(0,0),t.stroke(),t.fill())}function defMouse(t,a,e){function i(i,n,o){function l(i){(null==o||o(i))&&doMouseAction(e,t,i,a,"mouseaction",n)}if("function"==typeof n){var s=i+" "+n.name;s in t._eventListeners&&(t.canvas.removeEventListener?t.canvas.removeEventListener(i,t._eventListeners[s]):t.canvas.detachEvent&&t.canvas.detachEvent(i,t._eventListeners[s])),t._eventListeners[s]=l,t.canvas.addEventListener?("mousewheel"==i&&(i="DOMMouseScroll"),t.canvas.addEventListener(i,l,!1)):t.canvas.attachEvent&&t.canvas.attachEvent("on"+i,l)}}1==e.annotateDisplay&&(0==cursorDivCreated&&(oCursor=new makeCursorObj("divCursor")),isIE()<9&&0!=isIE()?t.canvas.attachEvent("on"+e.annotateFunction.split(" ")[0],function(i){("left"==e.annotateFunction.split(" ")[1]&&1==i.which||"middle"==e.annotateFunction.split(" ")[1]&&2==i.which||"right"==e.annotateFunction.split(" ")[1]&&3==i.which||"string"!=typeof e.annotateFunction.split(" ")[1])&&doMouseAction(e,t,i,a,"annotate",e.mouseDownRight)}):t.canvas.addEventListener(e.annotateFunction.split(" ")[0],function(i){("left"==e.annotateFunction.split(" ")[1]&&1==i.which||"middle"==e.annotateFunction.split(" ")[1]&&2==i.which||"right"==e.annotateFunction.split(" ")[1]&&3==i.which||"string"!=typeof e.annotateFunction.split(" ")[1])&&doMouseAction(e,t,i,a,"annotate",e.mouseDownRight)},!1)),e.savePng&&(isIE()<9&&0!=isIE()?t.canvas.attachEvent("on"+e.savePngFunction.split(" ")[0],function(i){("left"==e.savePngFunction.split(" ")[1]&&1==i.which||"middle"==e.savePngFunction.split(" ")[1]&&2==i.which||"right"==e.savePngFunction.split(" ")[1]&&3==i.which||"string"!=typeof e.savePngFunction.split(" ")[1])&&saveCanvas(t,a,e)}):t.canvas.addEventListener(e.savePngFunction.split(" ")[0],function(i){("left"==e.savePngFunction.split(" ")[1]&&1==i.which||"middle"==e.savePngFunction.split(" ")[1]&&2==i.which||"right"==e.savePngFunction.split(" ")[1]&&3==i.which||"string"!=typeof e.savePngFunction.split(" ")[1])&&saveCanvas(t,a,e)},!1)),isIE()<9&&0!=isIE()?t.canvas.attachEvent("onmousewheel",function(){cursorDivCreated&&(document.getElementById("divCursor").style.display="none")}):t.canvas.addEventListener("DOMMouseScroll",function(){cursorDivCreated&&(document.getElementById("divCursor").style.display="none")},!1),i("mousedown",e.mouseDownLeft,function(t){return 1==t.which}),i("mousedown",e.mouseDownMiddle,function(t){return 2==t.which}),i("mousedown",e.mouseDownRight,function(t){return 3==t.which}),i("mousemove",e.mouseMove),i("mouseout",e.mouseOut),i("mousewheel",e.mouseWheel)}var chart=this,animationOptions={linear:function(t){return t},easeInQuad:function(t){return t*t},easeOutQuad:function(t){return-1*t*(t-2)},easeInOutQuad:function(t){return(t/=.5)<1?.5*t*t:-0.5*(--t*(t-2)-1)},easeInCubic:function(t){return t*t*t},easeOutCubic:function(t){return 1*((t=t/1-1)*t*t+1)},easeInOutCubic:function(t){return(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2)},easeInQuart:function(t){return t*t*t*t},easeOutQuart:function(t){return-1*((t=t/1-1)*t*t*t-1)},easeInOutQuart:function(t){return(t/=.5)<1?.5*t*t*t*t:-0.5*((t-=2)*t*t*t-2)},easeInQuint:function(t){return 1*(t/=1)*t*t*t*t},easeOutQuint:function(t){return 1*((t=t/1-1)*t*t*t*t+1)},easeInOutQuint:function(t){return(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)},easeInSine:function(t){return-1*Math.cos(t/1*(Math.PI/2))+1},easeOutSine:function(t){return 1*Math.sin(t/1*(Math.PI/2))},easeInOutSine:function(t){return-0.5*(Math.cos(Math.PI*t/1)-1)},easeInExpo:function(t){return 0==t?1:1*Math.pow(2,10*(t/1-1))},easeOutExpo:function(t){return 1==t?1:1*(-Math.pow(2,-10*t/1)+1)},easeInOutExpo:function(t){return 0==t?0:1==t?1:(t/=.5)<1?.5*Math.pow(2,10*(t-1)):.5*(-Math.pow(2,-10*--t)+2)},easeInCirc:function(t){return t>=1?t:-1*(Math.sqrt(1-(t/=1)*t)-1)},easeOutCirc:function(t){return 1*Math.sqrt(1-(t=t/1-1)*t)},easeInOutCirc:function(t){return(t/=.5)<1?-0.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)},easeInElastic:function(t){var a=1.70158,e=0,i=1;if(0==t)return 0;if(1==(t/=1))return 1;if(e||(e=.3),i<Math.abs(1)){i=1;var a=e/4}else var a=e/(2*Math.PI)*Math.asin(1/i);return-(i*Math.pow(2,10*(t-=1))*Math.sin(2*(1*t-a)*Math.PI/e))},easeOutElastic:function(t){var a=1.70158,e=0,i=1;if(0==t)return 0;if(1==(t/=1))return 1;if(e||(e=.3),i<Math.abs(1)){i=1;var a=e/4}else var a=e/(2*Math.PI)*Math.asin(1/i);return i*Math.pow(2,-10*t)*Math.sin(2*(1*t-a)*Math.PI/e)+1},easeInOutElastic:function(t){var a=1.70158,e=0,i=1;if(0==t)return 0;if(2==(t/=.5))return 1;if(e||(e=.3*1.5),i<Math.abs(1)){i=1;var a=e/4}else var a=e/(2*Math.PI)*Math.asin(1/i);return 1>t?-.5*i*Math.pow(2,10*(t-=1))*Math.sin(2*(1*t-a)*Math.PI/e):i*Math.pow(2,-10*(t-=1))*Math.sin(2*(1*t-a)*Math.PI/e)*.5+1},easeInBack:function(t){var a=1.70158;return 1*(t/=1)*t*((a+1)*t-a)},easeOutBack:function(t){var a=1.70158;return 1*((t=t/1-1)*t*((a+1)*t+a)+1)},easeInOutBack:function(t){var a=1.70158;return(t/=.5)<1?.5*t*t*(((a*=1.525)+1)*t-a):.5*((t-=2)*t*(((a*=1.525)+1)*t+a)+2)},easeInBounce:function(t){return 1-animationOptions.easeOutBounce(1-t)},easeOutBounce:function(t){return(t/=1)<1/2.75?7.5625*t*t:2/2.75>t?1*(7.5625*(t-=1.5/2.75)*t+.75):2.5/2.75>t?1*(7.5625*(t-=2.25/2.75)*t+.9375):1*(7.5625*(t-=2.625/2.75)*t+.984375)},easeInOutBounce:function(t){return.5>t?.5*animationOptions.easeInBounce(2*t):.5*animationOptions.easeOutBounce(2*t-1)+.5}},width=context.canvas.width,height=context.canvas.height;window.devicePixelRatio&&(context.canvas.style.width=width+"px",context.canvas.style.height=height+"px",context.canvas.height=height*window.devicePixelRatio,context.canvas.width=width*window.devicePixelRatio,context.scale(window.devicePixelRatio,window.devicePixelRatio)),this.PolarArea=function(t,a){chart.PolarArea.defaults={inGraphDataShow:!1,inGraphDataPaddingRadius:5,inGraphDataPaddingAngle:0,inGraphDataTmpl:"<%=(v1 == ''? '' : v1+':')+ v2 + ' (' + v6 + ' %)'%>",inGraphDataAlign:"off-center",inGraphDataVAlign:"off-center",inGraphDataRotate:0,inGraphDataFontFamily:"'Arial'",inGraphDataFontSize:12,inGraphDataFontStyle:"normal",inGraphDataFontColor:"#666",inGraphDataRadiusPosition:3,inGraphDataAnglePosition:2,scaleOverlay:!0,scaleOverride:!1,scaleOverride2:!1,scaleSteps:null,scaleStepWidth:null,scaleStartValue:null,scaleShowLine:!0,scaleLineColor:"rgba(0,0,0,.1)",scaleLineWidth:1,scaleShowLabels:!0,scaleShowLabels2:!0,scaleLabel:"<%=value%>",scaleFontFamily:"'Arial'",scaleFontSize:12,scaleFontStyle:"normal",scaleFontColor:"#666",scaleShowLabelBackdrop:!0,scaleBackdropColor:"rgba(255,255,255,0.75)",scaleBackdropPaddingY:2,scaleBackdropPaddingX:2,segmentShowStroke:!0,segmentStrokeColor:"#fff",segmentStrokeWidth:2,animation:!0,animationSteps:100,animationEasing:"easeOutBounce",animateRotate:!0,animateScale:!1,onAnimationComplete:null,annotateLabel:"<%=(v1 == ''? '' : v1+':')+ v2 + ' (' + v6 + ' %)'%>",startAngle:90},chart.PolarArea.defaults=mergeChartConfig(chart.defaults.commonOptions,chart.PolarArea.defaults),chart.PolarArea.defaults=mergeChartConfig(chart.PolarArea.defaults,charJSPersonalDefaultOptions),chart.PolarArea.defaults=mergeChartConfig(chart.PolarArea.defaults,charJSPersonalDefaultOptionsPolarArea);var e=a?mergeChartConfig(chart.PolarArea.defaults,a):chart.PolarArea.defaults;return new PolarArea(t,e,context)},this.Radar=function(t,a){chart.Radar.defaults={inGraphDataShow:!1,inGraphDataPaddingRadius:5,inGraphDataTmpl:"<%=v3%>",inGraphDataAlign:"off-center",inGraphDataVAlign:"off-center",inGraphDataRotate:0,inGraphDataFontFamily:"'Arial'",inGraphDataFontSize:12,inGraphDataFontStyle:"normal",inGraphDataFontColor:"#666",inGraphDataRadiusPosition:3,yAxisMinimumInterval:"none",scaleOverlay:!1,scaleOverride:!1,scaleOverride2:!1,scaleSteps:null,scaleStepWidth:null,scaleStartValue:null,scaleShowLine:!0,scaleLineColor:"rgba(0,0,0,.1)",scaleLineWidth:1,scaleShowLabels:!1,scaleShowLabels2:!0,scaleLabel:"<%=value%>",scaleFontFamily:"'Arial'",scaleFontSize:12,scaleFontStyle:"normal",scaleFontColor:"#666",scaleShowLabelBackdrop:!0,scaleBackdropColor:"rgba(255,255,255,0.75)",scaleBackdropPaddingY:2,scaleBackdropPaddingX:2,angleShowLineOut:!0,angleLineColor:"rgba(0,0,0,.1)",angleLineWidth:1,pointLabelFontFamily:"'Arial'",pointLabelFontStyle:"normal",pointLabelFontSize:12,pointLabelFontColor:"#666",pointDot:!0,pointDotRadius:3,pointDotStrokeWidth:1,datasetFill:!0,datasetStrokeWidth:2,animation:!0,animationSteps:60,animationEasing:"easeOutQuart",onAnimationComplete:null,annotateLabel:"<%=(v1 == '' ? '' : v1) + (v1!='' && v2 !='' ? ' - ' : '')+(v2 == '' ? '' : v2)+(v1!='' || v2 !='' ? ':' : '') + v3%>",startAngle:90,graphMaximized:!1},chart.Radar.defaults=mergeChartConfig(chart.defaults.commonOptions,chart.Radar.defaults),chart.Radar.defaults=mergeChartConfig(chart.Radar.defaults,charJSPersonalDefaultOptions),chart.Radar.defaults=mergeChartConfig(chart.Radar.defaults,charJSPersonalDefaultOptionsRadar);var e=a?mergeChartConfig(chart.Radar.defaults,a):chart.Radar.defaults;return new Radar(t,e,context)},this.Pie=function(t,a){chart.Pie.defaults={inGraphDataShow:!1,inGraphDataPaddingRadius:5,inGraphDataPaddingAngle:0,inGraphDataTmpl:"<%=(v1 == ''? '' : v1+':')+ v2 + ' (' + v6 + ' %)'%>",inGraphDataAlign:"off-center",inGraphDataVAlign:"off-center",inGraphDataRotate:0,inGraphDataFontFamily:"'Arial'",inGraphDataFontSize:12,inGraphDataFontStyle:"normal",inGraphDataFontColor:"#666",inGraphDataRadiusPosition:3,inGraphDataAnglePosition:2,inGraphDataMinimumAngle:0,segmentShowStroke:!0,segmentStrokeColor:"#fff",segmentStrokeWidth:2,animation:!0,animationSteps:100,animationEasing:"easeOutBounce",animateRotate:!0,animateScale:!1,onAnimationComplete:null,annotateLabel:"<%=(v1 == ''? '' : v1+':')+ v2 + ' (' + v6 + ' %)'%>",startAngle:90,radiusScale:1},chart.Pie.defaults=mergeChartConfig(chart.defaults.commonOptions,chart.Pie.defaults),chart.Pie.defaults=mergeChartConfig(chart.Pie.defaults,charJSPersonalDefaultOptions),chart.Pie.defaults=mergeChartConfig(chart.Pie.defaults,charJSPersonalDefaultOptionsPie);
var e=a?mergeChartConfig(chart.Pie.defaults,a):chart.Pie.defaults;return new Pie(t,e,context)},this.Doughnut=function(t,a){chart.Doughnut.defaults={inGraphDataShow:!1,inGraphDataPaddingRadius:5,inGraphDataPaddingAngle:0,inGraphDataTmpl:"<%=(v1 == ''? '' : v1+':')+ v2 + ' (' + v6 + ' %)'%>",inGraphDataAlign:"off-center",inGraphDataVAlign:"off-center",inGraphDataRotate:0,inGraphDataFontFamily:"'Arial'",inGraphDataFontSize:12,inGraphDataFontStyle:"normal",inGraphDataFontColor:"#666",inGraphDataRadiusPosition:3,inGraphDataAnglePosition:2,inGraphDataMinimumAngle:0,segmentShowStroke:!0,segmentStrokeColor:"#fff",segmentStrokeWidth:2,percentageInnerCutout:50,animation:!0,animationSteps:100,animationEasing:"easeOutBounce",animateRotate:!0,animateScale:!1,onAnimationComplete:null,annotateLabel:"<%=(v1 == ''? '' : v1+':')+ v2 + ' (' + v6 + ' %)'%>",startAngle:90,radiusScale:1},chart.Doughnut.defaults=mergeChartConfig(chart.defaults.commonOptions,chart.Doughnut.defaults),chart.Doughnut.defaults=mergeChartConfig(chart.Doughnut.defaults,charJSPersonalDefaultOptions),chart.Doughnut.defaults=mergeChartConfig(chart.Doughnut.defaults,charJSPersonalDefaultOptionsDoughnut);var e=a?mergeChartConfig(chart.Doughnut.defaults,a):chart.Doughnut.defaults;return new Doughnut(t,e,context)},this.Line=function(t,a){chart.Line.defaults={inGraphDataShow:!1,inGraphDataPaddingX:3,inGraphDataPaddingY:3,inGraphDataTmpl:"<%=v3%>",inGraphDataAlign:"left",inGraphDataVAlign:"bottom",inGraphDataRotate:0,inGraphDataFontFamily:"'Arial'",inGraphDataFontSize:12,inGraphDataFontStyle:"normal",inGraphDataFontColor:"#666",drawXScaleLine:[{position:"bottom"}],scaleOverlay:!1,scaleOverride:!1,scaleOverride2:!1,scaleSteps:null,scaleStepWidth:null,scaleStartValue:null,scaleSteps2:null,scaleStepWidth2:null,scaleStartValue2:null,scaleLabel2:"<%=value%>",scaleLineColor:"rgba(0,0,0,.1)",scaleLineWidth:1,scaleShowLabels:!0,scaleShowLabels2:!0,scaleLabel:"<%=value%>",scaleFontFamily:"'Arial'",scaleFontSize:12,scaleFontStyle:"normal",scaleFontColor:"#666",scaleShowGridLines:!0,scaleXGridLinesStep:1,scaleYGridLinesStep:1,scaleGridLineColor:"rgba(0,0,0,.05)",scaleGridLineWidth:1,showYAxisMin:!0,rotateLabels:"smart",logarithmic:!1,logarithmic2:!1,scaleTickSizeLeft:5,scaleTickSizeRight:5,scaleTickSizeBottom:5,scaleTickSizeTop:5,bezierCurve:!0,pointDot:!0,pointDotRadius:4,pointDotStrokeWidth:2,datasetStrokeWidth:2,datasetFill:!0,animation:!0,animationSteps:60,animationEasing:"easeOutQuart",extrapolateMissingData:!0,onAnimationComplete:null,annotateLabel:"<%=(v1 == '' ? '' : v1) + (v1!='' && v2 !='' ? ' - ' : '')+(v2 == '' ? '' : v2)+(v1!='' || v2 !='' ? ':' : '') + v3%>"},chart.Line.defaults=mergeChartConfig(chart.defaults.commonOptions,chart.Line.defaults),chart.Line.defaults=mergeChartConfig(chart.defaults.xyAxisCommonOptions,chart.Line.defaults),chart.Line.defaults=mergeChartConfig(chart.Line.defaults,charJSPersonalDefaultOptions),chart.Line.defaults=mergeChartConfig(chart.Line.defaults,charJSPersonalDefaultOptionsLine);var e=a?mergeChartConfig(chart.Line.defaults,a):chart.Line.defaults;return new Line(t,e,context)},this.StackedBar=function(t,a){chart.StackedBar.defaults={inGraphDataShow:!1,inGraphDataPaddingX:0,inGraphDataPaddingY:-3,inGraphDataTmpl:"<%=v3%>",inGraphDataAlign:"center",inGraphDataVAlign:"top",inGraphDataRotate:0,inGraphDataFontFamily:"'Arial'",inGraphDataFontSize:12,inGraphDataFontStyle:"normal",inGraphDataFontColor:"#666",inGraphDataXPosition:2,inGraphDataYPosition:3,scaleOverlay:!1,scaleOverride:!1,scaleOverride2:!1,scaleSteps:null,scaleStepWidth:null,scaleStartValue:null,scaleLineColor:"rgba(0,0,0,.1)",scaleLineWidth:1,scaleShowLabels:!0,scaleShowLabels2:!0,scaleLabel:"<%=value%>",scaleFontFamily:"'Arial'",scaleFontSize:12,scaleFontStyle:"normal",scaleFontColor:"#666",scaleShowGridLines:!0,scaleXGridLinesStep:1,scaleYGridLinesStep:1,scaleGridLineColor:"rgba(0,0,0,.05)",scaleGridLineWidth:1,showYAxisMin:!0,rotateLabels:"smart",scaleTickSizeLeft:5,scaleTickSizeRight:5,scaleTickSizeBottom:5,scaleTickSizeTop:5,barShowStroke:!0,barStrokeWidth:2,barValueSpacing:5,barDatasetSpacing:1,animation:!0,animationSteps:60,animationEasing:"easeOutQuart",onAnimationComplete:null,annotateLabel:"<%=(v1 == '' ? '' : v1) + (v1!='' && v2 !='' ? ' - ' : '')+(v2 == '' ? '' : v2)+(v1!='' || v2 !='' ? ':' : '') + v3 + ' (' + v6 + ' %)'%>"},chart.StackedBar.defaults=mergeChartConfig(chart.defaults.commonOptions,chart.StackedBar.defaults),chart.StackedBar.defaults=mergeChartConfig(chart.defaults.xyAxisCommonOptions,chart.StackedBar.defaults),chart.StackedBar.defaults=mergeChartConfig(chart.StackedBar.defaults,charJSPersonalDefaultOptions),chart.StackedBar.defaults=mergeChartConfig(chart.StackedBar.defaults,charJSPersonalDefaultOptionsStackedBar);var e=a?mergeChartConfig(chart.StackedBar.defaults,a):chart.StackedBar.defaults;return new StackedBar(t,e,context)},this.HorizontalStackedBar=function(t,a){chart.HorizontalStackedBar.defaults={inGraphDataShow:!1,inGraphDataPaddingX:-3,inGraphDataPaddingY:0,inGraphDataTmpl:"<%=v3%>",inGraphDataAlign:"right",inGraphDataVAlign:"middle",inGraphDataRotate:0,inGraphDataFontFamily:"'Arial'",inGraphDataFontSize:12,inGraphDataFontStyle:"normal",inGraphDataFontColor:"#666",inGraphDataXPosition:3,inGraphDataYPosition:2,scaleOverlay:!1,scaleOverride:!1,scaleOverride2:!1,scaleSteps:null,scaleStepWidth:null,scaleStartValue:null,scaleLineColor:"rgba(0,0,0,.1)",scaleLineWidth:1,scaleShowLabels:!0,scaleShowLabels2:!0,scaleLabel:"<%=value%>",scaleFontFamily:"'Arial'",scaleFontSize:12,scaleFontStyle:"normal",scaleFontColor:"#666",scaleShowGridLines:!0,scaleXGridLinesStep:1,scaleYGridLinesStep:1,scaleGridLineColor:"rgba(0,0,0,.05)",scaleGridLineWidth:1,scaleTickSizeLeft:5,scaleTickSizeRight:5,scaleTickSizeBottom:5,scaleTickSizeTop:5,showYAxisMin:!0,rotateLabels:"smart",barShowStroke:!0,barStrokeWidth:2,barValueSpacing:5,barDatasetSpacing:1,animation:!0,animationSteps:60,animationEasing:"easeOutQuart",onAnimationComplete:null,annotateLabel:"<%=(v1 == '' ? '' : v1) + (v1!='' && v2 !='' ? ' - ' : '')+(v2 == '' ? '' : v2)+(v1!='' || v2 !='' ? ':' : '') + v3 + ' (' + v6 + ' %)'%>",reverseOrder:!1},chart.HorizontalStackedBar.defaults=mergeChartConfig(chart.defaults.commonOptions,chart.HorizontalStackedBar.defaults),chart.HorizontalStackedBar.defaults=mergeChartConfig(chart.defaults.xyAxisCommonOptions,chart.HorizontalStackedBar.defaults),chart.HorizontalStackedBar.defaults=mergeChartConfig(chart.HorizontalStackedBar.defaults,charJSPersonalDefaultOptions),chart.HorizontalStackedBar.defaults=mergeChartConfig(chart.HorizontalStackedBar.defaults,charJSPersonalDefaultOptionsHorizontalStackedBar);var e=a?mergeChartConfig(chart.HorizontalStackedBar.defaults,a):chart.HorizontalStackedBar.defaults;return new HorizontalStackedBar(t,e,context)},this.Bar=function(t,a){chart.Bar.defaults={inGraphDataShow:!1,inGraphDataPaddingX:0,inGraphDataPaddingY:3,inGraphDataTmpl:"<%=v3%>",inGraphDataAlign:"center",inGraphDataVAlign:"bottom",inGraphDataRotate:0,inGraphDataFontFamily:"'Arial'",inGraphDataFontSize:12,inGraphDataFontStyle:"normal",inGraphDataFontColor:"#666",inGraphDataXPosition:2,inGraphDataYPosition:3,scaleOverlay:!1,scaleOverride:!1,scaleOverride2:!1,scaleSteps:null,scaleStepWidth:null,scaleStartValue:null,scaleLineColor:"rgba(0,0,0,.1)",scaleLineWidth:1,scaleShowLabels:!0,scaleShowLabels2:!0,scaleLabel:"<%=value%>",scaleFontFamily:"'Arial'",scaleFontSize:12,scaleFontStyle:"normal",scaleFontColor:"#666",scaleShowGridLines:!0,scaleXGridLinesStep:1,scaleYGridLinesStep:1,scaleGridLineColor:"rgba(0,0,0,.05)",scaleGridLineWidth:1,showYAxisMin:!0,rotateLabels:"smart",logarithmic:!1,logarithmic2:!1,scaleTickSizeLeft:5,scaleTickSizeRight:5,scaleTickSizeBottom:5,scaleTickSizeTop:5,barShowStroke:!0,barStrokeWidth:2,barValueSpacing:5,barDatasetSpacing:1,barBorderRadius:0,animation:!0,animationSteps:60,animationEasing:"easeOutQuart",onAnimationComplete:null,annotateLabel:"<%=(v1 == '' ? '' : v1) + (v1!='' && v2 !='' ? ' - ' : '')+(v2 == '' ? '' : v2)+(v1!='' || v2 !='' ? ':' : '') + v3 + ' (' + v6 + ' %)'%>"},chart.Bar.defaults=mergeChartConfig(chart.defaults.commonOptions,chart.Bar.defaults),chart.Bar.defaults=mergeChartConfig(chart.defaults.xyAxisCommonOptions,chart.Bar.defaults),chart.Bar.defaults=mergeChartConfig(chart.Bar.defaults,charJSPersonalDefaultOptions),chart.Bar.defaults=mergeChartConfig(chart.Bar.defaults,charJSPersonalDefaultOptionsBar);var e=a?mergeChartConfig(chart.Bar.defaults,a):chart.Bar.defaults;return new Bar(t,e,context)},this.HorizontalBar=function(t,a){chart.HorizontalBar.defaults={inGraphDataShow:!1,inGraphDataPaddingX:3,inGraphDataPaddingY:0,inGraphDataTmpl:"<%=v3%>",inGraphDataAlign:"left",inGraphDataVAlign:"middle",inGraphDataRotate:0,inGraphDataFontFamily:"'Arial'",inGraphDataFontSize:12,inGraphDataFontStyle:"normal",inGraphDataFontColor:"#666",inGraphDataXPosition:3,inGraphDataYPosition:2,scaleOverlay:!1,scaleOverride:!1,scaleOverride2:!1,scaleSteps:null,scaleStepWidth:null,scaleStartValue:null,scaleLineColor:"rgba(0,0,0,.1)",scaleLineWidth:1,scaleShowLabels:!0,scaleShowLabels2:!0,scaleLabel:"<%=value%>",scaleFontFamily:"'Arial'",scaleFontSize:12,scaleFontStyle:"normal",scaleFontColor:"#666",scaleShowGridLines:!0,scaleXGridLinesStep:1,scaleYGridLinesStep:1,scaleGridLineColor:"rgba(0,0,0,.05)",scaleGridLineWidth:1,scaleTickSizeLeft:5,scaleTickSizeRight:5,scaleTickSizeBottom:5,scaleTickSizeTop:5,showYAxisMin:!0,rotateLabels:"smart",barShowStroke:!0,barStrokeWidth:2,barValueSpacing:5,barDatasetSpacing:1,barBorderRadius:0,animation:!0,animationSteps:60,animationEasing:"easeOutQuart",onAnimationComplete:null,annotateLabel:"<%=(v1 == '' ? '' : v1) + (v1!='' && v2 !='' ? ' - ' : '')+(v2 == '' ? '' : v2)+(v1!='' || v2 !='' ? ':' : '') + v3 + ' (' + v6 + ' %)'%>",reverseOrder:!1},chart.HorizontalBar.defaults=mergeChartConfig(chart.defaults.commonOptions,chart.HorizontalBar.defaults),chart.HorizontalBar.defaults=mergeChartConfig(chart.defaults.xyAxisCommonOptions,chart.HorizontalBar.defaults),chart.HorizontalBar.defaults=mergeChartConfig(chart.HorizontalBar.defaults,charJSPersonalDefaultOptions),chart.HorizontalBar.defaults=mergeChartConfig(chart.HorizontalBar.defaults,charJSPersonalDefaultOptionsHorizontalBar);var e=a?mergeChartConfig(chart.HorizontalBar.defaults,a):chart.HorizontalBar.defaults;return new HorizontalBar(t,e,context)},chart.defaults={},chart.defaults.commonOptions={multiGraph:!1,clearRect:!0,dynamicDisplay:!1,graphSpaceBefore:5,graphSpaceAfter:5,canvasBorders:!1,canvasBackgroundColor:"none",canvasBordersWidth:3,canvasBordersColor:"black",graphTitle:"",graphTitleFontFamily:"'Arial'",graphTitleFontSize:24,graphTitleFontStyle:"bold",graphTitleFontColor:"#666",graphTitleSpaceBefore:5,graphTitleSpaceAfter:5,graphSubTitle:"",graphSubTitleFontFamily:"'Arial'",graphSubTitleFontSize:18,graphSubTitleFontStyle:"normal",graphSubTitleFontColor:"#666",graphSubTitleSpaceBefore:5,graphSubTitleSpaceAfter:5,footNote:"",footNoteFontFamily:"'Arial'",footNoteFontSize:8,footNoteFontStyle:"bold",footNoteFontColor:"#666",footNoteSpaceBefore:5,footNoteSpaceAfter:5,legend:!1,showSingleLegend:!1,maxLegendCols:999,legendPosY:4,legendPosX:-2,legendFontFamily:"'Arial'",legendFontSize:12,legendFontStyle:"normal",legendFontColor:"#666",legendBlockSize:15,legendBorders:!0,legendBordersWidth:1,legendBordersColors:"#666",legendBordersSpaceBefore:5,legendBordersSpaceAfter:5,legendBordersSpaceLeft:5,legendBordersSpaceRight:5,legendSpaceBeforeText:5,legendSpaceAfterText:5,legendSpaceLeftText:5,legendSpaceRightText:5,legendSpaceBetweenTextVertical:5,legendSpaceBetweenTextHorizontal:5,legendSpaceBetweenBoxAndText:5,legendFillColor:"rgba(0,0,0,0)",legendXPadding:0,legendYPadding:0,annotateDisplay:!1,savePng:!1,savePngOutput:"NewWindow",savePngFunction:"mousedown right",savePngBackgroundColor:"WHITE",annotateFunction:"mousemove",annotateFontFamily:"'Arial'",annotateBorder:"none",annotateBorderRadius:"2px",annotateBackgroundColor:"rgba(0,0,0,0.8)",annotateFontSize:12,annotateFontColor:"white",annotateFontStyle:"normal",annotatePadding:"3px",annotateClassName:"",crossText:[""],crossTextIter:["all"],crossTextOverlay:[!0],crossTextFontFamily:["'Arial'"],crossTextFontSize:[12],crossTextFontStyle:["normal"],crossTextFontColor:["rgba(220,220,220,1)"],crossTextRelativePosX:[2],crossTextRelativePosY:[2],crossTextBaseline:["middle"],crossTextAlign:["center"],crossTextPosX:[0],crossTextPosY:[0],crossTextAngle:[0],crossTextFunction:null,crossImage:[void 0],crossImageIter:["all"],crossImageOverlay:[!0],crossImageRelativePosX:[2],crossImageRelativePosY:[2],crossImageBaseline:["middle"],crossImageAlign:["center"],crossImagePosX:[0],crossImagePosY:[0],crossImageAngle:[0],spaceTop:0,spaceBottom:0,spaceRight:0,spaceLeft:0,decimalSeparator:".",thousandSeparator:"",roundNumber:"none",roundPct:-1,fmtV1:"none",fmtV2:"none",fmtV3:"none",fmtV4:"none",fmtV5:"none",fmtV6:"none",fmtV7:"none",fmtV8:"none",fmtV9:"none",fmtV10:"none",fmtV11:"none",fmtV12:"none",fmtV13:"none",fmtXLabel:"none",fmtYLabel:"none",fmtYLabel2:"none",fmtLegend:"none",animationStartValue:0,animationStopValue:1,animationCount:1,animationPauseTime:5,animationBackward:!1,animationStartWithDataset:1,animationStartWithData:1,animationLeftToRight:!1,animationByDataset:!1,defaultStrokeColor:"rgba(220,220,220,1)",defaultFillColor:"rgba(220,220,220,0.5)",mouseDownRight:null,mouseDownLeft:null,mouseDownMiddle:null,mouseMove:null,mouseOut:null,mouseWheel:null,savePngName:"canvas",responsive:!1,maintainAspectRatio:!0},chart.defaults.xyAxisCommonOptions={yAxisMinimumInterval:"none",yAxisMinimumInterval2:"none",yScaleLabelsMinimumWidth:0,xScaleLabelsMinimumWidth:0,yAxisLeft:!0,yAxisRight:!1,xAxisBottom:!0,xAxisTop:!1,xAxisSpaceBetweenLabels:5,fullWidthGraph:!1,yAxisLabel:"",yAxisLabel2:"",yAxisFontFamily:"'Arial'",yAxisFontSize:16,yAxisFontStyle:"normal",yAxisFontColor:"#666",yAxisLabelSpaceRight:5,yAxisLabelSpaceLeft:5,yAxisSpaceRight:5,yAxisSpaceLeft:5,xAxisLabel:"",xAxisFontFamily:"'Arial'",xAxisFontSize:16,xAxisFontStyle:"normal",xAxisFontColor:"#666",xAxisLabelSpaceBefore:5,xAxisLabelSpaceAfter:5,xAxisSpaceBefore:5,xAxisSpaceAfter:5,yAxisUnit:"",yAxisUnit2:"",yAxisUnitFontFamily:"'Arial'",yAxisUnitFontSize:8,yAxisUnitFontStyle:"normal",yAxisUnitFontColor:"#666",yAxisUnitSpaceBefore:5,yAxisUnitSpaceAfter:5};var clear=function(t){t.clearRect(0,0,width,height)},PolarArea=function(t,a,e){function i(i){var n=-a.startAngle*(Math.PI/180)+2*Math.PI,o=0,r=0,d=1,c=1;r=0;for(var h=0;h<t.length;h++)"undefined"!=typeof t[h].value&&r++;for(r=2*Math.PI/r;0>n;)n+=2*Math.PI;for(;n>2*Math.PI;)n-=2*Math.PI;if(a.animation&&(a.animateScale&&(d=i),a.animateRotate&&(c=i)),i>=1){totvalue=0;for(var h=0;h<t.length;h++)"undefined"!=typeof t[h].value&&(totvalue+=1*t[h].value)}for(var h=0;h<t.length;h++)correctedRotateAnimation=animationCorrection(c,t,a,h,-1,0).mainVal,"undefined"!=typeof t[h].value&&(e.beginPath(),e.arc(g,p,d*calculateOffset(a.logarithmic,1*t[h].value,s,l),n,n+correctedRotateAnimation*r,!1),e.lineTo(g,p),e.closePath(),e.fillStyle="function"==typeof t[h].color?t[h].color("COLOR",t,a,h,-1,i,t[h].value,"PolarArea",e,g,p,0,d*calculateOffset(a.logarithmic,1*t[h].value,s,l)):t[h].color,e.fill(),n+=r,a.segmentShowStroke&&(e.strokeStyle=a.segmentStrokeColor,e.lineWidth=a.segmentStrokeWidth,e.stroke()));if(i>=1){n-=2*Math.PI;for(var h=0;h<t.length;h++)if("undefined"!=typeof t[h].value){if(o+=1*t[h].value,n+=r,lgtxt="string"==typeof t[h].title?t[h].title.trim():"",jsGraphAnnotate[e.ChartNewId][jsGraphAnnotate[e.ChartNewId].length]=["ARC",g,p,0,calculateOffset(a.logarithmic,1*t[h].value,s,l),n-r,n,lgtxt,1*t[h].value,o,totvalue,r,h],a.inGraphDataShow){1==a.inGraphDataAnglePosition?posAngle=u+a.inGraphDataPaddingAngle*(Math.PI/180):2==a.inGraphDataAnglePosition?posAngle=u-r/2+a.inGraphDataPaddingAngle*(Math.PI/180):3==a.inGraphDataAnglePosition&&(posAngle=u-r+a.inGraphDataPaddingAngle*(Math.PI/180)),1==a.inGraphDataRadiusPosition?labelRadius=0+a.inGraphDataPaddingRadius:2==a.inGraphDataRadiusPosition?labelRadius=calculateOffset(a.logarithmic,1*t[h].value,s,l)/2+a.inGraphDataPaddingRadius:3==a.inGraphDataRadiusPosition?labelRadius=calculateOffset(a.logarithmic,1*t[h].value,s,l)+a.inGraphDataPaddingRadius:4==a.inGraphDataRadiusPosition&&(labelRadius=l*s.steps+a.inGraphDataPaddingRadius),e.save(),e.textAlign="off-center"==a.inGraphDataAlign?"inRadiusAxis"==a.inGraphDataRotate||(posAngle+2*Math.PI)%(2*Math.PI)>3*Math.PI/2||(posAngle+2*Math.PI)%(2*Math.PI)<Math.PI/2?"left":"right":"to-center"==a.inGraphDataAlign?"inRadiusAxis"==a.inGraphDataRotate||(posAngle+2*Math.PI)%(2*Math.PI)>3*Math.PI/2||(posAngle+2*Math.PI)%(2*Math.PI)<Math.PI/2?"right":"left":a.inGraphDataAlign,e.textBaseline="off-center"==a.inGraphDataVAlign?(posAngle+2*Math.PI)%(2*Math.PI)>Math.PI?"top":"bottom":"to-center"==a.inGraphDataVAlign?(posAngle+2*Math.PI)%(2*Math.PI)>Math.PI?"bottom":"top":a.inGraphDataVAlign,e.font=a.inGraphDataFontStyle+" "+a.inGraphDataFontSize+"px "+a.inGraphDataFontFamily,e.fillStyle=a.inGraphDataFontColor;var m=tmplbis(a.inGraphDataTmpl,{config:a,v1:fmtChartJS(a,lgtxt,a.fmtV1),v2:fmtChartJS(a,1*t[h].value,a.fmtV2),v3:fmtChartJS(a,o,a.fmtV3),v4:fmtChartJS(a,totvalue,a.fmtV4),v5:fmtChartJS(a,r,a.fmtV5),v6:roundToWithThousands(a,fmtChartJS(a,100*t[h].value/totvalue,a.fmtV6),a.roundPct),v7:fmtChartJS(a,g,a.fmtV7),v8:fmtChartJS(a,p,a.fmtV8),v9:fmtChartJS(a,0,a.fmtV9),v10:fmtChartJS(a,calculateOffset(a.logarithmic,1*t[h].value,s,l),a.fmtV10),v11:fmtChartJS(a,n-r,a.fmtV11),v12:fmtChartJS(a,r,a.fmtV12),v13:fmtChartJS(a,h,a.fmtV13),data:t});e.translate(g+labelRadius*Math.cos(posAngle),p-labelRadius*Math.sin(posAngle)),e.rotate("inRadiusAxis"==a.inGraphDataRotate?2*Math.PI-posAngle:"inRadiusAxisRotateLabels"==a.inGraphDataRotate?(posAngle+2*Math.PI)%(2*Math.PI)>Math.PI/2&&(posAngle+2*Math.PI)%(2*Math.PI)<3*Math.PI/2?3*Math.PI-posAngle:2*Math.PI-posAngle:a.inGraphDataRotate*(Math.PI/180)),e.fillTextMultiLine(m,0,0,e.textBaseline,a.inGraphDataFontSize),e.restore()}u-=r}}f.legendMsr.dispLegend&&drawLegend(f.legendMsr,t,a,e,"PolarArea")}function n(){for(var t=0;t<s.steps;t++)if(a.scaleShowLine&&(e.beginPath(),e.arc(g,p,l*(t+1),0,2*Math.PI,!0),e.strokeStyle=a.scaleLineColor,e.lineWidth=a.scaleLineWidth,e.stroke()),a.scaleShowLabels){e.textAlign="center",e.font=a.scaleFontStyle+" "+a.scaleFontSize+"px "+a.scaleFontFamily;var i=s.labels[t+1];if(a.scaleShowLabelBackdrop){var n=e.measureTextMultiLine(i,a.scaleFontSize).textWidth;e.fillStyle=a.scaleBackdropColor,e.beginPath(),e.rect(Math.round(g-n/2-a.scaleBackdropPaddingX),Math.round(p-l*(t+1)-.5*a.scaleFontSize-a.scaleBackdropPaddingY),Math.round(n+2*a.scaleBackdropPaddingX),Math.round(a.scaleFontSize+2*a.scaleBackdropPaddingY)),e.fill()}e.textBaseline="middle",e.fillStyle=a.scaleFontColor,e.fillTextMultiLine(i,g,p-l*(t+1),e.textBaseline,a.scaleFontSize)}}function o(){for(var e=Number.MIN_VALUE,i=Number.MAX_VALUE,n=0;n<t.length;n++)1*t[n].value>e&&(e=1*t[n].value),1*t[n].value<i&&(i=1*t[n].value);Math.abs(e-i)<1e-8&&(e=Max([2*e,1]),i=0),isNaN(a.graphMin)||(i=a.graphMin),isNaN(a.graphMax)||(e=a.graphMax);var o=Math.floor(d/(.66*r)),l=Math.floor(d/r*.5);return{maxValue:e,minValue:i,maxSteps:o,minSteps:l}}var l,s,r,d,c,h,f,g,p;if(e.tpchart="PolarArea",setting_new_chart_vars(e),!dynamicFunction(t,a,e))return void(a.responsive&&"undefined"==typeof e.firstPass&&(a.multiGraph||addResponsiveChart(e.ChartNewId,e,t,a)));if(a.responsive&&"undefined"==typeof e.firstPass){if(!a.multiGraph)return addResponsiveChart(e.ChartNewId,e,t,a),void subUpdateChart(e,t,a);e.firstPass=1}for(var u=a.startAngle*(Math.PI/180)+2*Math.PI;a.startAngle<0;)a.startAngle+=360;for(;a.startAngle>360;)a.startAngle-=360;for(;0>u;)u+=2*Math.PI;for(;u>2*Math.PI;)u-=2*Math.PI;a.logarithmic=!1,a.logarithmic2=!1,"undefined"==typeof jsGraphAnnotate[e.ChartNewId]?jsGraphAnnotate[e.ChartNewId]=new Array:a.multiGraph||clearAnnotate(e.ChartNewId),defMouse(e,t,a),setRect(e,a),c=o(),h=a.scaleShowLabels?a.scaleLabel:"",a.scaleOverride?(s={steps:a.scaleSteps,stepValue:a.scaleStepWidth,graphMin:a.scaleStartValue,graphMax:a.scaleStartValue+a.scaleSteps*a.scaleStepWidth,labels:[]},populateLabels(1,a,h,s.labels,s.steps,a.scaleStartValue,s.graphMax,a.scaleStepWidth),f=setMeasures(t,a,e,height,width,s.labels,null,!0,!1,!1,!1,!0,"PolarArea")):(s=calculateScale(1,a,c.maxSteps,c.minSteps,c.maxValue,c.minValue,h),f=setMeasures(t,a,e,height,width,s.labels,null,!0,!1,!1,!1,!0,"PolarArea")),g=f.leftNotUsableSize+f.availableWidth/2,p=f.topNotUsableSize+f.availableHeight/2,l=Math.floor((Min([f.availableHeight,f.availableWidth])/2-5)/s.steps),l>0?animationLoop(a,n,i,e,f.clrx,f.clry,f.clrwidth,f.clrheight,g,p,g-(Min([f.availableHeight,f.availableWidth])/2-5),p+(Min([f.availableHeight,f.availableWidth])/2-5),t):testRedraw(e,t,a)},Radar=function(t,a,e){function i(i){for(var n=new Array,o=new Array,l=new Array,s=0;s<t.datasets.length;s++){l[s]=-999999999;for(var c=0;c<t.datasets[s].data.length;c++)n[c]=0,o[c]=-999999999}for(var s=0;s<t.datasets.length;s++)for(var c=0;c<t.datasets[s].data.length;c++)"undefined"!=typeof t.datasets[s].data[c]&&(n[c]+=1*t.datasets[s].data[c],o[c]=Max([o[c],1*t.datasets[s].data[c]]),l[s]=Max([l[s],1*t.datasets[s].data[c]]));var h=2*Math.PI/t.datasets[0].data.length;e.save();for(var s=0;s<t.datasets.length;s++){i>=1&&(lgtxt="string"==typeof t.datasets[s].title?t.datasets[s].title.trim():"");for(var f=-1,c=0;c<t.datasets[s].data.length;c++){var g=animationCorrection(i,t,a,s,c,1).animVal;g>1&&(g-=1),"undefined"!=typeof t.datasets[s].data[c]&&(-1==f?(e.beginPath(),e.moveTo(u+g*Math.cos(a.startAngle*Math.PI/180-c*h)*calculateOffset(a.logarithmic,t.datasets[s].data[c],d,r),m-g*Math.sin(a.startAngle*Math.PI/180-c*h)*calculateOffset(a.logarithmic,t.datasets[s].data[c],d,r)),f=c):e.lineTo(u+g*Math.cos(a.startAngle*Math.PI/180-c*h)*calculateOffset(a.logarithmic,t.datasets[s].data[c],d,r),m-g*Math.sin(a.startAngle*Math.PI/180-c*h)*calculateOffset(a.logarithmic,t.datasets[s].data[c],d,r)),i>=1&&(divprev=0==s?0:t.datasets[s].data[c]-t.datasets[s-1].data[c],divnext=s==t.datasets.length-1?0:t.datasets[s+1].data[c]-t.datasets[s].data[c],lgtxt2="string"==typeof t.labels[c]?t.labels[c].trim():"",jsGraphAnnotate[e.ChartNewId][jsGraphAnnotate[e.ChartNewId].length]=["POINT",u+Math.cos(a.startAngle*Math.PI/180-c*h)*calculateOffset(a.logarithmic,t.datasets[s].data[c],d,r),m-Math.sin(a.startAngle*Math.PI/180-c*h)*calculateOffset(a.logarithmic,t.datasets[s].data[c],d,r),lgtxt,lgtxt2,1*t.datasets[s].data[c],divprev,divnext,o[c],n[c],s,c]))}if(e.closePath(),e.fillStyle=a.datasetFill?"function"==typeof t.datasets[s].fillColor?t.datasets[s].fillColor("FILLCOLOR",t,a,s,-1,g,-1,"Radar",e,u,m,0,(a.animationLeftToRight?1:g)*calculateOffset(a.logarithmic,l[s],d,r)):"string"==typeof t.datasets[s].fillColor?t.datasets[s].fillColor:a.defaultFillColor:"rgba(0,0,0,0)",e.strokeStyle="function"==typeof t.datasets[s].strokeColor?t.datasets[s].strokeColor("STROKECOLOR",t,a,s,-1,g,-1,"Radar",e,u,m,0,(a.animationLeftToRight?1:g)*calculateOffset(a.logarithmic,l[s],d,r)):"string"==typeof t.datasets[s].strokeColor?t.datasets[s].strokeColor:a.defaultStrokeColor,e.lineWidth=a.datasetStrokeWidth,e.fill(),e.stroke(),a.pointDot&&(!a.animationLeftToRight||a.animationLeftToRight&&i>=1)){e.beginPath(),e.fillStyle="function"==typeof t.datasets[s].pointColor?t.datasets[s].pointColor("POINTCOLOR",t,a,s,-1,g,-1,"Radar",e,u,m,0,(a.animationLeftToRight?1:g)*calculateOffset(a.logarithmic,l[s],d,r)):t.datasets[s].pointColor,e.strokeStyle="function"==typeof t.datasets[s].pointStrokeColor?t.datasets[s].pointStrokeColor("POINTSTROKECOLOR",t,a,s,-1,g,-1,"Radar",e,u,m,0,(a.animationLeftToRight?1:g)*calculateOffset(a.logarithmic,l[s],d,r)):t.datasets[s].pointStrokeColor,e.lineWidth=a.pointDotStrokeWidth;for(var v=0;v<t.datasets[s].data.length;v++)"undefined"!=typeof t.datasets[s].data[v]&&(e.beginPath(),e.arc(u+g*Math.cos(a.startAngle*Math.PI/180-v*h)*calculateOffset(a.logarithmic,t.datasets[s].data[v],d,r),m-g*Math.sin(a.startAngle*Math.PI/180-v*h)*calculateOffset(a.logarithmic,t.datasets[s].data[v],d,r),a.pointDotRadius,2*Math.PI,!1),e.fill(),e.stroke())}}if(e.restore(),i>=1&&a.inGraphDataShow)for(var s=0;s<t.datasets.length;s++){lgtxt="string"==typeof t.datasets[s].title?t.datasets[s].title.trim():"";for(var c=0;c<t.datasets[s].data.length;c++)if("undefined"!=typeof t.datasets[s].data[c]){divprev=0==s?0:t.datasets[s].data[c]-t.datasets[s-1].data[c],divnext=s==t.datasets.length-1?0:t.datasets[s+1].data[c]-t.datasets[s].data[c],lgtxt2="string"==typeof t.labels[c]?t.labels[c].trim():"",e.save(),e.textAlign=a.inGraphDataAlign,e.textBaseline=a.inGraphDataVAlign,e.textAlign="off-center"==a.inGraphDataAlign?"inRadiusAxis"==a.inGraphDataRotate||(a.startAngle*Math.PI/180-c*h+4*Math.PI)%(2*Math.PI)>3*Math.PI/2||(a.startAngle*Math.PI/180-c*h+4*Math.PI)%(2*Math.PI)<=Math.PI/2?"left":"right":"to-center"==a.inGraphDataAlign?"inRadiusAxis"==a.inGraphDataRotate||(a.startAngle*Math.PI/180-c*h+4*Math.PI)%(2*Math.PI)>3*Math.PI/2||(a.startAngle*Math.PI/180-c*h+4*Math.PI)%(2*Math.PI)<Math.PI/2?"right":"left":a.inGraphDataAlign,e.textBaseline="off-center"==a.inGraphDataVAlign?(a.startAngle*Math.PI/180-c*h+4*Math.PI)%(2*Math.PI)>Math.PI?"bottom":"top":"to-center"==a.inGraphDataVAlign?(a.startAngle*Math.PI/180-c*h+4*Math.PI)%(2*Math.PI)>Math.PI?"top":"bottom":a.inGraphDataVAlign,e.font=a.inGraphDataFontStyle+" "+a.inGraphDataFontSize+"px "+a.inGraphDataFontFamily,e.fillStyle=a.inGraphDataFontColor;var S;1==a.inGraphDataRadiusPosition?S=0+a.inGraphDataPaddingRadius:2==a.inGraphDataRadiusPosition?S=calculateOffset(a.logarithmic,t.datasets[s].data[c],d,r)/2+a.inGraphDataPaddingRadius:3==a.inGraphDataRadiusPosition&&(S=calculateOffset(a.logarithmic,t.datasets[s].data[c],d,r)+a.inGraphDataPaddingRadius),e.translate(u+Math.cos(a.startAngle*Math.PI/180-c*h)*S,m-Math.sin(a.startAngle*Math.PI/180-c*h)*S),e.rotate("inRadiusAxis"==a.inGraphDataRotate?c*h:"inRadiusAxisRotateLabels"==a.inGraphDataRotate?(c*h+2*Math.PI)%(2*Math.PI)>Math.PI/2&&(c*h+2*Math.PI)%(2*Math.PI)<3*Math.PI/2?3*Math.PI+c*h:2*Math.PI+c*h:a.inGraphDataRotate*(Math.PI/180));var x=tmplbis(a.inGraphDataTmpl,{config:a,v1:fmtChartJS(a,lgtxt,a.fmtV1),v2:fmtChartJS(a,lgtxt2,a.fmtV2),v3:fmtChartJS(a,1*t.datasets[s].data[c],a.fmtV3),v4:fmtChartJS(a,divprev,a.fmtV4),v5:fmtChartJS(a,divnext,a.fmtV5),v6:fmtChartJS(a,o[c],a.fmtV6),v7:fmtChartJS(a,n[c],a.fmtV7),v8:roundToWithThousands(a,fmtChartJS(a,100*t.datasets[s].data[c]/n[c],a.fmtV8),a.roundPct),v9:fmtChartJS(a,u+Math.cos(a.startAngle*Math.PI/180-c*h)*calculateOffset(a.logarithmic,t.datasets[s].data[c],d,r),a.fmtV9),v10:fmtChartJS(a,m-Math.sin(a.startAngle*Math.PI/180-c*h)*calculateOffset(a.logarithmic,t.datasets[s].data[c],d,r),a.fmtV10),v11:fmtChartJS(a,s,a.fmtV11),v12:fmtChartJS(a,c,a.fmtV12),data:t});e.fillTextMultiLine(x,0,0,e.textBaseline,a.inGraphDataFontSize),e.restore()}}p.legendMsr.dispLegend&&drawLegend(p.legendMsr,t,a,e,"Radar")}function n(){var i=2*Math.PI/t.datasets[0].data.length;if(e.save(),e.translate(u,m),e.rotate((90-a.startAngle)*Math.PI/180),a.angleShowLineOut){e.strokeStyle=a.angleLineColor,e.lineWidth=a.angleLineWidth;for(var n=0;n<t.datasets[0].data.length;n++)e.rotate(i),e.beginPath(),e.moveTo(0,0),e.lineTo(0,-s),e.stroke()}for(var o=0;o<d.steps;o++)if(e.beginPath(),a.scaleShowLine){e.strokeStyle=a.scaleLineColor,e.lineWidth=a.scaleLineWidth,e.moveTo(0,-r*(o+1));for(var l=0;l<t.datasets[0].data.length;l++)e.rotate(i),e.lineTo(0,-r*(o+1));e.closePath(),e.stroke()}if(e.rotate(-(90-a.startAngle)*Math.PI/180),a.scaleShowLabels)for(var o=0;o<d.steps;o++){if(e.textAlign="center",e.font=a.scaleFontStyle+" "+a.scaleFontSize+"px "+a.scaleFontFamily,e.textBaseline="middle",a.scaleShowLabelBackdrop){var c=e.measureTextMultiLine(d.labels[o+1],a.scaleFontSize).textWidth;e.fillStyle=a.scaleBackdropColor,e.beginPath(),e.rect(Math.round(Math.cos(a.startAngle*Math.PI/180)*r*(o+1)-c/2-a.scaleBackdropPaddingX),Math.round(-Math.sin(a.startAngle*Math.PI/180)*r*(o+1)-.5*a.scaleFontSize-a.scaleBackdropPaddingY),Math.round(c+2*a.scaleBackdropPaddingX),Math.round(a.scaleFontSize+2*a.scaleBackdropPaddingY)),e.fill()}e.fillStyle=a.scaleFontColor,e.fillTextMultiLine(d.labels[o+1],Math.cos(a.startAngle*Math.PI/180)*r*(o+1),-Math.sin(a.startAngle*Math.PI/180)*r*(o+1),e.textBaseline,a.scaleFontSize)}for(var h=0;h<t.labels.length;h++){e.font=a.pointLabelFontStyle+" "+a.pointLabelFontSize+"px "+a.pointLabelFontFamily,e.fillStyle=a.pointLabelFontColor;for(var f=Math.sin((90-a.startAngle)*Math.PI/180+i*h)*(s+a.pointLabelFontSize),g=Math.cos((90-a.startAngle)*Math.PI/180+i*h)*(s+a.pointLabelFontSize),p=(90-a.startAngle)*Math.PI/180+i*h;0>p;)p+=2*Math.PI;for(;p>2*Math.PI;)p-=2*Math.PI;e.textAlign=p==Math.PI||0==p?"center":p>Math.PI?"right":"left",e.textBaseline="middle",e.fillTextMultiLine(t.labels[h],f,-g,e.textBaseline,a.pointLabelFontSize)}e.restore()}function o(){var i,n,o,l,r,d,h,f,g=2*Math.PI/t.datasets[0].data.length,m=a.startAngle*Math.PI/180;if(e.font=a.pointLabelFontStyle+" "+a.pointLabelFontSize+"px "+a.pointLabelFontFamily,a.graphMaximized){l=p.availableWidth/2,o=p.availableWidth/2,d=40;for(var v=0;v<t.labels.length;v++){var S=e.measureTextMultiLine(t.labels[v],a.scaleFontSize).textWidth+e.measureTextMultiLine(t.labels[v],a.scaleFontSize).textHeight;n=(p.availableWidth-S)/(1+Math.abs(Math.cos(m))),m<Math.PI/2&&m>-Math.PI/2||m>3*Math.PI/2?l>n&&(l=n):0!=Math.cos(m)&&o>n&&(o=n),m-=g}}else l=p.availableWidth/2,o=p.availableWidth/2,d=1;for(h=0,f=0,u=l+p.rightNotUsableSize,i=l,r=0;d>r;++r,i+=(p.availableWidth-o-l)/d){s=Max([i,p.availableWidth-i]);var m=a.startAngle*Math.PI/180;n=p.available;for(var v=0;v<t.labels.length;v++){var S=e.measureTextMultiLine(t.labels[v],a.scaleFontSize).textWidth+e.measureTextMultiLine(t.labels[v],a.scaleFontSize).textHeight;m<Math.PI/2&&m>-Math.PI/2||m>3*Math.PI/2?n=(p.availableWidth-i-S)/Math.abs(Math.cos(m)):Math.cos(0!=m)&&(n=(i-S)/Math.abs(Math.cos(m))),s>n&&(s=n),Math.sin(m)*p.availableHeight/2>p.availableHeight/2-2*a.scaleFontSize&&(n=Math.sin(m)*p.availableHeight/2-1.5*a.scaleFontSize,s>n&&(s=n)),m-=g}s>h&&(h=s,u=i+p.rightNotUsableSize)}s=h-a.scaleFontSize/2,c=Default(c,5)}function l(){for(var e=Number.MIN_VALUE,i=Number.MAX_VALUE,n=0;n<t.datasets.length;n++)for(var o=0;o<t.datasets[n].data.length;o++)1*t.datasets[n].data[o]>e&&(e=1*t.datasets[n].data[o]),1*t.datasets[n].data[o]<i&&(i=1*t.datasets[n].data[o]);Math.abs(e-i)<1e-8&&(e=Max([2*e,1]),i=0),isNaN(a.graphMin)||(i=a.graphMin),isNaN(a.graphMax)||(e=a.graphMax);var l=Math.floor(h/(.66*c)),s=Math.floor(h/c*.5);return{maxValue:e,minValue:i,maxSteps:l,minSteps:s}}var s,r,d,c,h,f,g,p,u,m;if(e.tpchart="Radar",setting_new_chart_vars(e),!dynamicFunction(t,a,e))return void(a.responsive&&"undefined"==typeof e.firstPass&&(a.multiGraph||addResponsiveChart(e.ChartNewId,e,t,a)));if(a.responsive&&"undefined"==typeof e.firstPass){if(!a.multiGraph)return addResponsiveChart(e.ChartNewId,e,t,a),void subUpdateChart(e,t,a);e.firstPass=1}for(;a.startAngle<0;)a.startAngle+=360;for(;a.startAngle>360;)a.startAngle-=360;a.logarithmic=!1,a.logarithmic2=!1,"undefined"==typeof jsGraphAnnotate[e.ChartNewId]?jsGraphAnnotate[e.ChartNewId]=new Array:a.multiGraph||clearAnnotate(e.ChartNewId),defMouse(e,t,a),t.labels||(t.labels=[]),setRect(e,a),f=l(),g=a.scaleShowLabels?a.scaleLabel:"",a.scaleOverride?(d={steps:a.scaleSteps,stepValue:a.scaleStepWidth,graphMin:a.scaleStartValue,graphMax:a.scaleStartValue+a.scaleSteps*a.scaleStepWidth,labels:[]},populateLabels(1,a,g,d.labels,d.steps,a.scaleStartValue,d.graphMax,a.scaleStepWidth),p=setMeasures(t,a,e,height,width,d.labels,null,!0,!1,!1,!0,a.datasetFill,"Radar")):(d=calculateScale(1,a,f.maxSteps,f.minSteps,f.maxValue,f.minValue,g),p=setMeasures(t,a,e,height,width,d.labels,null,!0,!1,!1,!0,a.datasetFill,"Radar")),o(),m=p.topNotUsableSize+p.availableHeight/2,r=s/d.steps,animationLoop(a,n,i,e,p.clrx,p.clry,p.clrwidth,p.clrheight,u,m,u-s,m+s,t)},Pie=function(t,a,e){function i(i){for(var n=-a.startAngle*(Math.PI/180)+2*Math.PI,c=0,h=1,f=1,g=a.startAngle*(Math.PI/180)+2*Math.PI;0>n;)n+=2*Math.PI;
for(;n>2*Math.PI;)n-=2*Math.PI;for(;0>g;)g+=2*Math.PI;for(;g>2*Math.PI;)g-=2*Math.PI;if(a.animation&&(a.animateScale&&(h=i),a.animateRotate&&(f=i)),i>=1){totvalue=0;for(var p=0;p<t.length;p++)"undefined"!=typeof t[p].value&&(totvalue+=1*t[p].value)}for(var p=0;p<t.length;p++)if(correctedRotateAnimation=animationCorrection(f,t,a,p,-1,0).mainVal,"undefined"!=typeof t[p].value){var u=correctedRotateAnimation*(1*t[p].value/d)*2*Math.PI;u>=2*Math.PI&&(u=2*Math.PI-.001),e.beginPath(),e.arc(l,s,h*r,n,n+u),e.lineTo(l,s),e.closePath(),e.fillStyle="function"==typeof t[p].color?t[p].color("COLOR",t,a,p,-1,i,t[p].value,"Pie",e,l,s,0,h*r):t[p].color,e.fill(),n+=u,c+=1*t[p].value,a.segmentShowStroke&&(e.lineWidth=a.segmentStrokeWidth,e.strokeStyle=a.segmentStrokeColor,e.stroke())}if(i>=1){n-=2*Math.PI;for(var p=0;p<t.length;p++)if(correctedRotateAnimation=animationCorrection(f,t,a,p,-1,0).mainVal,"undefined"!=typeof t[p].value){var u=correctedRotateAnimation*(1*t[p].value/d)*2*Math.PI;if(u>=2*Math.PI&&(u=2*Math.PI-.001),n+=u,c+=1*t[p].value,lgtxt="string"==typeof t[p].title?t[p].title.trim():"",jsGraphAnnotate[e.ChartNewId][jsGraphAnnotate[e.ChartNewId].length]=["ARC",l,s,0,r,n-u,n,lgtxt,1*t[p].value,c,totvalue,u,p],a.inGraphDataShow&&u>=Math.PI/180*a.inGraphDataMinimumAngle){1==a.inGraphDataAnglePosition?posAngle=g+a.inGraphDataPaddingAngle*(Math.PI/180):2==a.inGraphDataAnglePosition?posAngle=g-u/2+a.inGraphDataPaddingAngle*(Math.PI/180):3==a.inGraphDataAnglePosition&&(posAngle=g-u+a.inGraphDataPaddingAngle*(Math.PI/180)),1==a.inGraphDataRadiusPosition?labelRadius=0+a.inGraphDataPaddingRadius:2==a.inGraphDataRadiusPosition?labelRadius=r/2+a.inGraphDataPaddingRadius:3==a.inGraphDataRadiusPosition&&(labelRadius=r+a.inGraphDataPaddingRadius),e.save(),e.textAlign="off-center"==a.inGraphDataAlign?"inRadiusAxis"==a.inGraphDataRotate||(posAngle+2*Math.PI)%(2*Math.PI)>3*Math.PI/2||(posAngle+2*Math.PI)%(2*Math.PI)<Math.PI/2?"left":"right":"to-center"==a.inGraphDataAlign?"inRadiusAxis"==a.inGraphDataRotate||(posAngle+2*Math.PI)%(2*Math.PI)>3*Math.PI/2||(posAngle+2*Math.PI)%(2*Math.PI)<Math.PI/2?"right":"left":a.inGraphDataAlign,e.textBaseline="off-center"==a.inGraphDataVAlign?(posAngle+2*Math.PI)%(2*Math.PI)>Math.PI?"top":"bottom":"to-center"==a.inGraphDataVAlign?(posAngle+2*Math.PI)%(2*Math.PI)>Math.PI?"bottom":"top":a.inGraphDataVAlign,e.font=a.inGraphDataFontStyle+" "+a.inGraphDataFontSize+"px "+a.inGraphDataFontFamily,e.fillStyle=a.inGraphDataFontColor;var m=tmplbis(a.inGraphDataTmpl,{config:a,v1:fmtChartJS(a,lgtxt,a.fmtV1),v2:fmtChartJS(a,1*t[p].value,a.fmtV2),v3:fmtChartJS(a,c,a.fmtV3),v4:fmtChartJS(a,totvalue,a.fmtV4),v5:fmtChartJS(a,u,a.fmtV5),v6:roundToWithThousands(a,fmtChartJS(a,100*t[p].value/totvalue,a.fmtV6),a.roundPct),v7:fmtChartJS(a,l,a.fmtV7),v8:fmtChartJS(a,s,a.fmtV8),v9:fmtChartJS(a,0,a.fmtV9),v10:fmtChartJS(a,r,a.fmtV10),v11:fmtChartJS(a,n-u,a.fmtV11),v12:fmtChartJS(a,n,a.fmtV12),v13:fmtChartJS(a,p,a.fmtV13),data:t});e.translate(l+labelRadius*Math.cos(posAngle),s-labelRadius*Math.sin(posAngle)),e.rotate("inRadiusAxis"==a.inGraphDataRotate?2*Math.PI-posAngle:"inRadiusAxisRotateLabels"==a.inGraphDataRotate?(posAngle+2*Math.PI)%(2*Math.PI)>Math.PI/2&&(posAngle+2*Math.PI)%(2*Math.PI)<3*Math.PI/2?3*Math.PI-posAngle:2*Math.PI-posAngle:a.inGraphDataRotate*(Math.PI/180)),e.fillTextMultiLine(m,0,0,e.textBaseline,a.inGraphDataFontSize),e.restore()}g-=u}}o.legendMsr.dispLegend&&drawLegend(o.legendMsr,t,a,e,"Pie")}function n(){for(var i,n=-a.startAngle*(Math.PI/180)+2*Math.PI,c=0;0>n;)n+=2*Math.PI;for(;n>2*Math.PI;)n-=2*Math.PI;if(l=o.leftNotUsableSize+o.availableWidth/2,s=o.topNotUsableSize+o.availableHeight/2,r=Min([o.availableHeight/2,o.availableWidth/2])-5,a.inGraphDataShow&&3==a.inGraphDataRadiusPosition&&"off-center"==a.inGraphDataAlign&&0==a.inGraphDataRotate){r=Min([o.availableHeight/2,o.availableWidth/2])-a.inGraphDataFontSize-a.inGraphDataPaddingRadius-5;for(var h=a.startAngle*(Math.PI/180)+2*Math.PI;0>h;)h+=2*Math.PI;for(;h>2*Math.PI;)h-=2*Math.PI;for(var f=0,g=0;g<t.length;g++)"undefined"!=typeof t[g].value&&(f+=1*t[g].value);e.font=a.inGraphDataFontStyle+" "+a.inGraphDataFontSize+"px "+a.inGraphDataFontFamily;for(var p,c=0,g=0;g<t.length;g++)if("undefined"!=typeof t[g].value){c+=1*t[g].value;var u=1*t[g].value/d*2*Math.PI;n+=u,1==a.inGraphDataAnglePosition?p=h+a.inGraphDataPaddingAngle*(Math.PI/180):2==a.inGraphDataAnglePosition?p=h-u/2+a.inGraphDataPaddingAngle*(Math.PI/180):3==a.inGraphDataAnglePosition&&(p=h-u+a.inGraphDataPaddingAngle*(Math.PI/180)),h-=u,i="string"==typeof t[g].title?t[g].title.trim():"";var m=tmplbis(a.inGraphDataTmpl,{config:a,v1:fmtChartJS(a,i,a.fmtV1),v2:fmtChartJS(a,1*t[g].value,a.fmtV2),v3:fmtChartJS(a,c,a.fmtV3),v4:fmtChartJS(a,f,a.fmtV4),v5:fmtChartJS(a,u,a.fmtV5),v6:roundToWithThousands(a,fmtChartJS(a,100*t[g].value/f,a.fmtV6),a.roundPct),v7:fmtChartJS(a,l,a.fmtV7),v8:fmtChartJS(a,s,a.fmtV8),v9:fmtChartJS(a,0,a.fmtV9),v10:fmtChartJS(a,r,a.fmtV10),v11:fmtChartJS(a,n-u,a.fmtV11),v12:fmtChartJS(a,n,a.fmtV12),v13:fmtChartJS(a,g,a.fmtV13),data:t}),v=e.measureText(m).width,S=Math.abs((o.availableWidth/2-v)/Math.cos(p))-a.inGraphDataPaddingRadius-5;r>S&&(r=S)}}r*=a.radiusScale}var o,l,s,r,d=0;if(e.tpchart="Pie",setting_new_chart_vars(e),!dynamicFunction(t,a,e))return void(a.responsive&&"undefined"==typeof e.firstPass&&(a.multiGraph||addResponsiveChart(e.ChartNewId,e,t,a)));if(a.responsive&&"undefined"==typeof e.firstPass){if(!a.multiGraph)return addResponsiveChart(e.ChartNewId,e,t,a),void subUpdateChart(e,t,a);e.firstPass=1}for(;a.startAngle<0;)a.startAngle+=360;for(;a.startAngle>360;)a.startAngle-=360;a.logarithmic=!1,a.logarithmic2=!1,"undefined"==typeof jsGraphAnnotate[e.ChartNewId]?jsGraphAnnotate[e.ChartNewId]=new Array:a.multiGraph||clearAnnotate(e.ChartNewId),defMouse(e,t,a),setRect(e,a),o=setMeasures(t,a,e,height,width,"none",null,!0,!1,!1,!1,!0,"Pie");for(var c=0;c<t.length;c++)"undefined"!=typeof t[c].value&&(d+=1*t[c].value);n(),r>0?animationLoop(a,null,i,e,o.clrx,o.clry,o.clrwidth,o.clrheight,l,s,l-r,s+r,t):testRedraw(e,t,a)},Doughnut=function(t,a,e){function i(i){for(var n=-a.startAngle*(Math.PI/180)+2*Math.PI,f=0,g=1,p=1;0>n;)n+=2*Math.PI;for(;n>2*Math.PI;)n-=2*Math.PI;if(a.animation&&(a.animateScale&&(g=i),a.animateRotate&&(p=i)),i>=1){totvalue=0;for(var u=0;u<t.length;u++)"undefined"!=typeof t[u].value&&(totvalue+=1*t[u].value)}for(var u=0;u<t.length;u++)if(correctedRotateAnimation=animationCorrection(p,t,a,u,-1,0).mainVal,"undefined"!=typeof t[u].value){var m=correctedRotateAnimation*(1*t[u].value/d)*2*Math.PI;m>=2*Math.PI&&(m=2*Math.PI-.001),e.beginPath(),e.arc(l,s,g*r,n,n+m,!1),e.arc(l,s,g*h,n+m,n,!0),e.closePath(),e.fillStyle="function"==typeof t[u].color?t[u].color("COLOR",t,a,u,-1,i,t[u].value,"Doughnut",e,l,s,g*h,g*r):t[u].color,e.fill(),n+=m,f+=1*t[u].value,a.segmentShowStroke&&(e.lineWidth=a.segmentStrokeWidth,e.strokeStyle=a.segmentStrokeColor,e.stroke())}if(i>=1){n-=2*Math.PI;for(var u=0;u<t.length;u++)if(correctedRotateAnimation=animationCorrection(p,t,a,u,-1,0).mainVal,"undefined"!=typeof t[u].value){var m=correctedRotateAnimation*(1*t[u].value/d)*2*Math.PI;if(m>=2*Math.PI&&(m=2*Math.PI-.001),n+=m,f+=1*t[u].value,lgtxt="string"==typeof t[u].title?t[u].title.trim():"",jsGraphAnnotate[e.ChartNewId][jsGraphAnnotate[e.ChartNewId].length]=["ARC",l,s,h,r,n-m,n,lgtxt,1*t[u].value,f,totvalue,m,u],a.inGraphDataShow&&m>=Math.PI/180*a.inGraphDataMinimumAngle){1==a.inGraphDataAnglePosition?posAngle=c+a.inGraphDataPaddingAngle*(Math.PI/180):2==a.inGraphDataAnglePosition?posAngle=c-m/2+a.inGraphDataPaddingAngle*(Math.PI/180):3==a.inGraphDataAnglePosition&&(posAngle=c-m+a.inGraphDataPaddingAngle*(Math.PI/180)),1==a.inGraphDataRadiusPosition?labelRadius=h+a.inGraphDataPaddingRadius:2==a.inGraphDataRadiusPosition?labelRadius=h+(r-h)/2+a.inGraphDataPaddingRadius:3==a.inGraphDataRadiusPosition&&(labelRadius=r+a.inGraphDataPaddingRadius),e.save(),e.textAlign="off-center"==a.inGraphDataAlign?"inRadiusAxis"==a.inGraphDataRotate||(posAngle+2*Math.PI)%(2*Math.PI)>3*Math.PI/2||(posAngle+2*Math.PI)%(2*Math.PI)<Math.PI/2?"left":"right":"to-center"==a.inGraphDataAlign?"inRadiusAxis"==a.inGraphDataRotate||(posAngle+2*Math.PI)%(2*Math.PI)>3*Math.PI/2||(posAngle+2*Math.PI)%(2*Math.PI)<Math.PI/2?"right":"left":a.inGraphDataAlign,e.textBaseline="off-center"==a.inGraphDataVAlign?(posAngle+2*Math.PI)%(2*Math.PI)>Math.PI?"top":"bottom":"to-center"==a.inGraphDataVAlign?(posAngle+2*Math.PI)%(2*Math.PI)>Math.PI?"bottom":"top":a.inGraphDataVAlign,e.font=a.inGraphDataFontStyle+" "+a.inGraphDataFontSize+"px "+a.inGraphDataFontFamily,e.fillStyle=a.inGraphDataFontColor;var v=tmplbis(a.inGraphDataTmpl,{config:a,v1:fmtChartJS(a,lgtxt,a.fmtV1),v2:fmtChartJS(a,1*t[u].value,a.fmtV2),v3:fmtChartJS(a,f,a.fmtV3),v4:fmtChartJS(a,totvalue,a.fmtV4),v5:fmtChartJS(a,m,a.fmtV5),v6:roundToWithThousands(a,fmtChartJS(a,100*t[u].value/totvalue,a.fmtV6),a.roundPct),v7:fmtChartJS(a,l,a.fmtV7),v8:fmtChartJS(a,s,a.fmtV8),v9:fmtChartJS(a,h,a.fmtV9),v10:fmtChartJS(a,r,a.fmtV10),v11:fmtChartJS(a,n-m,a.fmtV11),v12:fmtChartJS(a,n,a.fmtV12),v13:fmtChartJS(a,u,a.fmtV13)});e.translate(l+labelRadius*Math.cos(posAngle),s-labelRadius*Math.sin(posAngle)),e.rotate("inRadiusAxis"==a.inGraphDataRotate?2*Math.PI-posAngle:"inRadiusAxisRotateLabels"==a.inGraphDataRotate?(posAngle+2*Math.PI)%(2*Math.PI)>Math.PI/2&&(posAngle+2*Math.PI)%(2*Math.PI)<3*Math.PI/2?3*Math.PI-posAngle:2*Math.PI-posAngle:a.inGraphDataRotate*(Math.PI/180)),e.fillTextMultiLine(v,0,0,e.textBaseline,a.inGraphDataFontSize),e.restore()}c-=m}}o.legendMsr.dispLegend&&drawLegend(o.legendMsr,t,a,e,"Doughnut")}function n(){for(var i,n=-a.startAngle*(Math.PI/180)+2*Math.PI,c=0;0>n;)n+=2*Math.PI;for(;n>2*Math.PI;)n-=2*Math.PI;if(l=o.leftNotUsableSize+o.availableWidth/2,s=o.topNotUsableSize+o.availableHeight/2,r=Min([o.availableHeight/2,o.availableWidth/2])-5,a.inGraphDataShow&&3==a.inGraphDataRadiusPosition&&"off-center"==a.inGraphDataAlign&&0==a.inGraphDataRotate){r=Min([o.availableHeight/2,o.availableWidth/2])-a.inGraphDataFontSize-a.inGraphDataPaddingRadius-5;for(var f=a.startAngle*(Math.PI/180)+2*Math.PI;0>f;)f+=2*Math.PI;for(;f>2*Math.PI;)f-=2*Math.PI;for(var g=0,p=0;p<t.length;p++)"undefined"!=typeof t[p].value&&(g+=1*t[p].value);e.font=a.inGraphDataFontStyle+" "+a.inGraphDataFontSize+"px "+a.inGraphDataFontFamily;for(var u,n=0,p=0;p<t.length;p++)if("undefined"!=typeof t[p].value){c+=1*t[p].value;var m=1*t[p].value/d*2*Math.PI;n+=m,1==a.inGraphDataAnglePosition?u=f+a.inGraphDataPaddingAngle*(Math.PI/180):2==a.inGraphDataAnglePosition?u=f-m/2+a.inGraphDataPaddingAngle*(Math.PI/180):3==a.inGraphDataAnglePosition&&(u=f-m+a.inGraphDataPaddingAngle*(Math.PI/180)),f-=m,i="string"==typeof t[p].title?t[p].title.trim():"";var v=tmplbis(a.inGraphDataTmpl,{config:a,v1:fmtChartJS(a,i,a.fmtV1),v2:fmtChartJS(a,1*t[p].value,a.fmtV2),v3:fmtChartJS(a,c,a.fmtV3),v4:fmtChartJS(a,g,a.fmtV4),v5:fmtChartJS(a,m,a.fmtV5),v6:roundToWithThousands(a,fmtChartJS(a,100*t[p].value/g,a.fmtV6),a.roundPct),v7:fmtChartJS(a,l,a.fmtV7),v8:fmtChartJS(a,s,a.fmtV8),v9:fmtChartJS(a,h,a.fmtV9),v10:fmtChartJS(a,r,a.fmtV10),v11:fmtChartJS(a,n-m,a.fmtV11),v12:fmtChartJS(a,n,a.fmtV12),v13:fmtChartJS(a,p,a.fmtV13),data:t}),S=e.measureText(v).width,x=Math.abs((o.availableWidth/2-S)/Math.cos(u))-a.inGraphDataPaddingRadius-5;r>x&&(r=x)}}r*=a.radiusScale}var o,l,s,r,d=0;if(e.tpchart="Doughnut",setting_new_chart_vars(e),!dynamicFunction(t,a,e))return void(a.responsive&&"undefined"==typeof e.firstPass&&(a.multiGraph||addResponsiveChart(e.ChartNewId,e,t,a)));if(a.responsive&&"undefined"==typeof e.firstPass){if(!a.multiGraph)return addResponsiveChart(e.ChartNewId,e,t,a),void subUpdateChart(e,t,a);e.firstPass=1}for(var c=a.startAngle*(Math.PI/180)+2*Math.PI;a.startAngle<0;)a.startAngle+=360;for(;a.startAngle>360;)a.startAngle-=360;for(;0>c;)c+=2*Math.PI;for(;c>2*Math.PI;)c-=2*Math.PI;a.logarithmic=!1,a.logarithmic2=!1,"undefined"==typeof jsGraphAnnotate[e.ChartNewId]?jsGraphAnnotate[e.ChartNewId]=new Array:a.multiGraph||clearAnnotate(e.ChartNewId),defMouse(e,t,a),setRect(e,a),o=setMeasures(t,a,e,height,width,"none",null,!0,!1,!1,!1,!0,"Doughnut"),n();for(var h=r*(a.percentageInnerCutout/100),f=0;f<t.length;f++)"undefined"!=typeof t[f].value&&(d+=1*t[f].value);r>0?animationLoop(a,null,i,e,o.clrx,o.clry,o.clrwidth,o.clrheight,l,s,l-r,s+r,t):testRedraw(e,t,a)},Line=function(data,config,ctx){function drawLines(t){drawLinesDataset(1,t,data,config,ctx,offsets,{xAxisPosY:xAxisPosY,yAxisPosX:yAxisPosX,valueHop:valueHop,nbValueHop:data.labels.length-1,scaleHop:scaleHop,zeroY:zeroY,calculatedScale:calculatedScale,logarithmic:config.logarithmic}),drawLinesDataset(2,t,data,config,ctx,offsets,{xAxisPosY:xAxisPosY,yAxisPosX:yAxisPosX,valueHop:valueHop,nbValueHop:data.labels.length-1,scaleHop:scaleHop2,zeroY:zeroY2,calculatedScale:calculatedScale2,logarithmic:config.logarithmic2}),t>=1&&"function"==typeof drawMath&&drawMath(ctx,config,data,msr,{xAxisPosY:xAxisPosY,yAxisPosX:yAxisPosX,valueHop:valueHop,scaleHop:scaleHop,zeroY:zeroY,calculatedScale:calculatedScale,calculateOffset:calculateOffset}),msr.legendMsr.dispLegend&&drawLegend(msr.legendMsr,data,config,ctx,"Line")}function drawScale(){if(config.drawXScaleLine!==!1)for(var t=0;t<config.drawXScaleLine.length;t++){ctx.lineWidth=config.drawXScaleLine[t].lineWidth?config.drawXScaleLine[t].lineWidth:config.scaleLineWidth,ctx.strokeStyle=config.drawXScaleLine[t].lineColor?config.drawXScaleLine[t].lineColor:config.scaleLineColor,ctx.beginPath();var a;switch(config.drawXScaleLine[t].position){case"bottom":a=xAxisPosY;break;case"top":a=xAxisPosY-msr.availableHeight-config.scaleTickSizeTop;break;case"0":case 0:0!=zeroY&&(a=xAxisPosY-zeroY)}ctx.moveTo(yAxisPosX-config.scaleTickSizeLeft,a),ctx.lineTo(yAxisPosX+msr.availableWidth+config.scaleTickSizeRight,a),ctx.stroke()}for(var e=0;e<data.labels.length;e++)ctx.beginPath(),ctx.moveTo(yAxisPosX+e*valueHop,xAxisPosY+config.scaleTickSizeBottom),ctx.lineWidth=config.scaleGridLineWidth,ctx.strokeStyle=config.scaleGridLineColor,config.scaleShowGridLines&&e>0&&e%config.scaleXGridLinesStep==0?ctx.lineTo(yAxisPosX+e*valueHop,xAxisPosY-msr.availableHeight-config.scaleTickSizeTop):ctx.lineTo(yAxisPosX+e*valueHop,xAxisPosY),ctx.stroke();ctx.lineWidth=config.scaleLineWidth,ctx.strokeStyle=config.scaleLineColor,ctx.beginPath(),ctx.moveTo(yAxisPosX,xAxisPosY+config.scaleTickSizeBottom),ctx.lineTo(yAxisPosX,xAxisPosY-msr.availableHeight-config.scaleTickSizeTop),ctx.stroke();for(var i=0;i<calculatedScale.steps;i++)ctx.beginPath(),ctx.moveTo(yAxisPosX-config.scaleTickSizeLeft,xAxisPosY-(i+1)*scaleHop),ctx.lineWidth=config.scaleGridLineWidth,ctx.strokeStyle=config.scaleGridLineColor,config.scaleShowGridLines&&i%config.scaleYGridLinesStep==0?ctx.lineTo(yAxisPosX+msr.availableWidth+config.scaleTickSizeRight,xAxisPosY-(i+1)*scaleHop):ctx.lineTo(yAxisPosX,xAxisPosY-(i+1)*scaleHop),ctx.stroke()}function drawLabels(){if(ctx.font=config.scaleFontStyle+" "+config.scaleFontSize+"px "+config.scaleFontFamily,(config.xAxisTop||config.xAxisBottom)&&(ctx.textBaseline="top",msr.rotateLabels>90?(ctx.save(),ctx.textAlign="left"):msr.rotateLabels>0?(ctx.save(),ctx.textAlign="right"):ctx.textAlign="center",ctx.fillStyle=config.scaleFontColor,config.xAxisBottom))for(var t=0;t<data.labels.length;t++)ctx.save(),msr.rotateLabels>0?(ctx.translate(yAxisPosX+t*valueHop-msr.highestXLabel/2,msr.xLabelPos),ctx.rotate(-(msr.rotateLabels*(Math.PI/180))),ctx.fillTextMultiLine(fmtChartJS(config,data.labels[t],config.fmtXLabel),0,0,ctx.textBaseline,config.scaleFontSize)):ctx.fillTextMultiLine(fmtChartJS(config,data.labels[t],config.fmtXLabel),yAxisPosX+t*valueHop,msr.xLabelPos,ctx.textBaseline,config.scaleFontSize),ctx.restore();ctx.textAlign="right",ctx.textBaseline="middle";for(var a=config.showYAxisMin?-1:0;a<calculatedScale.steps;a++)config.scaleShowLabels&&(config.yAxisLeft&&(ctx.textAlign="right",ctx.fillTextMultiLine(calculatedScale.labels[a+1],yAxisPosX-(config.scaleTickSizeLeft+config.yAxisSpaceRight),xAxisPosY-(a+1)*scaleHop,ctx.textBaseline,config.scaleFontSize)),config.yAxisRight&&!valueBounds.dbAxis&&(ctx.textAlign="left",ctx.fillTextMultiLine(calculatedScale.labels[a+1],yAxisPosX+msr.availableWidth+(config.scaleTickSizeRight+config.yAxisSpaceRight),xAxisPosY-(a+1)*scaleHop,ctx.textBaseline,config.scaleFontSize)));if(config.yAxisRight&&valueBounds.dbAxis)for(var a=config.showYAxisMin?-1:0;a<calculatedScale2.steps;a++)config.scaleShowLabels&&(ctx.textAlign="left",ctx.fillTextMultiLine(calculatedScale2.labels[a+1],yAxisPosX+msr.availableWidth+(config.scaleTickSizeRight+config.yAxisSpaceRight),xAxisPosY-(a+1)*scaleHop2,ctx.textBaseline,config.scaleFontSize))}function getValueBounds(){for(var upperValue=Number.MIN_VALUE,lowerValue=Number.MAX_VALUE,upperValue2=Number.MIN_VALUE,lowerValue2=Number.MAX_VALUE,secondAxis=!1,firstAxis=!1,i=0;i<data.datasets.length;i++){var mathFctName=data.datasets[i].drawMathDeviation,mathValueHeight=0;if("function"==typeof eval(mathFctName)){var parameter={data:data,datasetNr:i};mathValueHeight=window[mathFctName](parameter)}for(var j=0;j<data.datasets[i].data.length;j++)2==data.datasets[i].axis?(secondAxis=!0,1*data.datasets[i].data[j]+mathValueHeight>upperValue2&&(upperValue2=1*data.datasets[i].data[j]+mathValueHeight),1*data.datasets[i].data[j]-mathValueHeight<lowerValue2&&(lowerValue2=1*data.datasets[i].data[j]-mathValueHeight)):(firstAxis=!0,1*data.datasets[i].data[j]+mathValueHeight>upperValue&&(upperValue=1*data.datasets[i].data[j]+mathValueHeight),1*data.datasets[i].data[j]-mathValueHeight<lowerValue&&(lowerValue=1*data.datasets[i].data[j]-mathValueHeight))}Math.abs(upperValue-lowerValue)<1e-8&&(upperValue=Max([2*upperValue,1]),lowerValue=0),isNaN(config.graphMin)||(lowerValue=config.graphMin),isNaN(config.graphMax)||(upperValue=config.graphMax),secondAxis&&(Math.abs(upperValue2-lowerValue2)<1e-8&&(upperValue2=Max([2*upperValue2,1]),lowerValue2=0),isNaN(config.graphMin2)||(lowerValue2=config.graphMin2),isNaN(config.graphMax2)||(upperValue2=config.graphMax2)),!firstAxis&&secondAxis&&(upperValue=upperValue2,lowerValue=lowerValue2),labelHeight=config.scaleFontSize,scaleHeight=msr.availableHeight;var maxSteps=Math.floor(scaleHeight/(.66*labelHeight)),minSteps=Math.floor(scaleHeight/labelHeight*.5);return{maxValue:upperValue,minValue:lowerValue,maxValue2:upperValue2,minValue2:lowerValue2,dbAxis:secondAxis,maxSteps:maxSteps,minSteps:minSteps}}var maxSize,scaleHop,scaleHop2,calculatedScale,calculatedScale2,labelHeight,scaleHeight,valueBounds,labelTemplateString,labelTemplateString2,valueHop,widestXLabel,xAxisLength,yAxisPosX,xAxisPosY,rotateLabels=0,msr,zeroY=0,zeroY2=0,offsets=[];if(ctx.tpchart="Line",setting_new_chart_vars(ctx),!dynamicFunction(data,config,ctx))return void(config.responsive&&"undefined"==typeof ctx.firstPass&&(config.multiGraph||addResponsiveChart(ctx.ChartNewId,ctx,data,config)));if(config.responsive&&"undefined"==typeof ctx.firstPass){if(!config.multiGraph)return addResponsiveChart(ctx.ChartNewId,ctx,data,config),void subUpdateChart(ctx,data,config);ctx.firstPass=1}for(var mxlgt=0,i=0;i<data.datasets.length;i++)mxlgt=Max([mxlgt,data.datasets[i].data.length]);if(1==mxlgt){"string"==typeof data.labels[0]&&(data.labels=["",data.labels[0],""]);for(var i=0;i<data.datasets.length;i++)data.datasets[i].data=[void 0,data.datasets[i].data[0],void 0]}"undefined"==typeof jsGraphAnnotate[ctx.ChartNewId]?jsGraphAnnotate[ctx.ChartNewId]=new Array:config.multiGraph||clearAnnotate(ctx.ChartNewId),defMouse(ctx,data,config),setRect(ctx,config),msr=setMeasures(data,config,ctx,height,width,"nihil",[""],!1,!1,!0,!0,config.datasetFill,"Line"),valueBounds=getValueBounds(),config.logarithmic!==!1&&valueBounds.minValue<=0&&(config.logarithmic=!1),config.logarithmic2!==!1&&valueBounds.minValue2<=0&&(config.logarithmic2=!1);var OrderOfMagnitude=calculateOrderOfMagnitude(Math.pow(10,calculateOrderOfMagnitude(valueBounds.maxValue)+1))-calculateOrderOfMagnitude(Math.pow(10,calculateOrderOfMagnitude(valueBounds.minValue)));("fuzzy"==config.logarithmic&&4>OrderOfMagnitude||config.scaleOverride)&&(config.logarithmic=!1);var OrderOfMagnitude2=calculateOrderOfMagnitude(Math.pow(10,calculateOrderOfMagnitude(valueBounds.maxValue2)+1))-calculateOrderOfMagnitude(Math.pow(10,calculateOrderOfMagnitude(valueBounds.minValue2)));if(("fuzzy"==config.logarithmic2&&4>OrderOfMagnitude2||config.scaleOverride2)&&(config.logarithmic2=!1),labelTemplateString=config.scaleShowLabels?config.scaleLabel:"",labelTemplateString2=config.scaleShowLabels2?config.scaleLabel2:"",config.scaleOverride?(calculatedScale={steps:config.scaleSteps,stepValue:config.scaleStepWidth,graphMin:config.scaleStartValue,graphMax:config.scaleStartValue+config.scaleSteps*config.scaleStepWidth,labels:[]},populateLabels(1,config,labelTemplateString,calculatedScale.labels,calculatedScale.steps,config.scaleStartValue,calculatedScale.graphMax,config.scaleStepWidth)):valueBounds.maxSteps>0&&valueBounds.minSteps>0&&(calculatedScale=calculateScale(1,config,valueBounds.maxSteps,valueBounds.minSteps,valueBounds.maxValue,valueBounds.minValue,labelTemplateString)),valueBounds.dbAxis?config.scaleOverride2?(calculatedScale2={steps:config.scaleSteps2,stepValue:config.scaleStepWidth2,graphMin:config.scaleStartValue2,graphMax:config.scaleStartValue2+config.scaleSteps2*config.scaleStepWidth2,labels:[]},populateLabels(2,config,labelTemplateString2,calculatedScale2.labels,calculatedScale2.steps,config.scaleStartValue2,calculatedScale2.graphMax,config.scaleStepWidth2)):valueBounds.maxSteps>0&&valueBounds.minSteps>0&&(calculatedScale2=calculateScale(2,config,valueBounds.maxSteps,valueBounds.minSteps,valueBounds.maxValue2,valueBounds.minValue2,labelTemplateString)):calculatedScale2={steps:0,stepValue:0,graphMin:0,graphMax:0,labels:null},valueBounds.maxSteps>0&&valueBounds.minSteps>0){msr=setMeasures(data,config,ctx,height,width,calculatedScale.labels,calculatedScale2.labels,!1,!1,!0,!0,config.datasetFill,"Line");var prevHeight=msr.availableHeight;msr.availableHeight=msr.availableHeight-config.scaleTickSizeBottom-config.scaleTickSizeTop,msr.availableWidth=msr.availableWidth-config.scaleTickSizeLeft-config.scaleTickSizeRight,scaleHop=Math.floor(msr.availableHeight/calculatedScale.steps),scaleHop2=Math.floor(msr.availableHeight/calculatedScale2.steps),valueHop=Math.floor(msr.availableWidth/(data.labels.length-1)),(0==valueHop||config.fullWidthGraph)&&(valueHop=msr.availableWidth/(data.labels.length-1)),msr.clrwidth=msr.clrwidth-(msr.availableWidth-(data.labels.length-1)*valueHop),msr.availableWidth=(data.labels.length-1)*valueHop,msr.availableHeight=calculatedScale.steps*scaleHop,msr.xLabelPos+=config.scaleTickSizeBottom+config.scaleTickSizeTop-(prevHeight-msr.availableHeight),msr.clrheight+=config.scaleTickSizeBottom+config.scaleTickSizeTop-(prevHeight-msr.availableHeight),yAxisPosX=msr.leftNotUsableSize+config.scaleTickSizeLeft,xAxisPosY=msr.topNotUsableSize+msr.availableHeight+config.scaleTickSizeTop,drawLabels(),valueBounds.minValue<0&&(zeroY=calculateOffset(config.logarithmic,0,calculatedScale,scaleHop)),valueBounds.minValue2<0&&(zeroY2=calculateOffset(config.logarithmic2,0,calculatedScale2,scaleHop2));for(var i=0;i<data.datasets.length;i++){offsets[i]=[];for(var j=0;j<data.datasets[i].data.length;j++)offsets[i][j]=2==data.datasets[i].axis?calculateOffset(config.logarithmic2,data.datasets[i].data[j],calculatedScale2,scaleHop2)-zeroY2:calculateOffset(config.logarithmic,data.datasets[i].data[j],calculatedScale,scaleHop)-zeroY}animationLoop(config,drawScale,drawLines,ctx,msr.clrx,msr.clry,msr.clrwidth,msr.clrheight,yAxisPosX+msr.availableWidth/2,xAxisPosY-msr.availableHeight/2,yAxisPosX,xAxisPosY,data)}else testRedraw(ctx,data,config)},StackedBar=function(t,a,e){function i(i){e.lineWidth=a.barStrokeWidth;for(var n=new Array(t.datasets.length),o=new Array(t.datasets.length),l=new Array,d=new Array,c=0;c<t.datasets.length;c++)for(var h=0;h<t.datasets[c].data.length;h++)l[h]=0,d[h]=0;for(var c=0;c<t.datasets.length;c++)for(var h=0;h<t.datasets[c].data.length;h++)"undefined"!=typeof t.datasets[c].data[h]&&(d[h]+=1*t.datasets[c].data[h]);for(var c=0;c<t.datasets.length;c++){i>=1&&(lgtxt="string"==typeof t.datasets[c].title?t.datasets[c].title.trim():"");for(var h=0;h<t.datasets[c].data.length;h++){var f=animationCorrection(i,t,a,c,h,1).animVal;f>1&&(f-=1),"undefined"==typeof n[h]&&(n[h]=0,o[h]=0,zeroY=calculateOffset(a.logarithmic,0,r,s));var S=p+a.barValueSpacing+g*h;if("undefined"!=typeof t.datasets[c].data[h]&&1*t.datasets[c].data[h]!=0){if(1*t.datasets[c].data[h]<0)var x=n[h],b=n[h]+1*t.datasets[c].data[h];else var x=o[h],b=o[h]+1*t.datasets[c].data[h];if(a.animationByDataset){var P=u-calculateOffset(a.logarithmic,x,r,s),A=u-calculateOffset(a.logarithmic,b,r,s);A=P+f*(A-P)}else var P=u-calculateOffset(a.logarithmic,f*x,r,s),A=u-calculateOffset(a.logarithmic,f*b,r,s);e.fillStyle=a.defaultFillColor,"function"==typeof t.datasets[c].fillColor?e.fillStyle=t.datasets[c].fillColor("FILLCOLOR",t,a,c,h,f,1*t.datasets[c].data[h],"StackedBar",e,S,P,S+m,A):"string"==typeof t.datasets[c].fillColor?e.fillStyle=t.datasets[c].fillColor:"object"==typeof t.datasets[c].fillColor&&"string"==typeof t.datasets[c].fillColor[0]&&(e.fillStyle=t.datasets[c].fillColor[Min([t.datasets[c].fillColor.length-1,h])]),e.strokeStyle=a.defaultStrokeColor,"function"==typeof t.datasets[c].strokeColor?e.strokeStyle=t.datasets[c].strokeColor("STROKECOLOR",t,a,c,h,f,1*t.datasets[c].data[h],"StackedBar",e,S,P,S+m,A):"string"==typeof t.datasets[c].strokeColor?e.strokeStyle=t.datasets[c].strokeColor:"object"==typeof t.datasets[c].strokeColor&&"string"==typeof t.datasets[c].strokeColor[0]&&(e.strokeStyle=t.datasets[c].strokeColor[Min([t.datasets[c].strokeColor.length-1,h])]),0!=f&&(e.beginPath(),e.moveTo(S,P),e.lineTo(S,A),e.lineTo(S+m,A),e.lineTo(S+m,P),a.barShowStroke&&e.stroke(),e.closePath(),e.fill(),l[h]+=1*t.datasets[c].data[h],i>=1&&(lgtxt2="string"==typeof t.labels[h]?t.labels[h].trim():"",jsGraphAnnotate[e.ChartNewId][jsGraphAnnotate[e.ChartNewId].length]=1*t.datasets[c].data[h]<0?["RECT",S,A,S+m,P,lgtxt,lgtxt2,1*t.datasets[c].data[h],l[h],d[h],c,h]:["RECT",S,P,S+m,A,lgtxt,lgtxt2,1*t.datasets[c].data[h],l[h],d[h],c,h])),1*t.datasets[c].data[h]<0?n[h]=n[h]+1*t.datasets[c].data[h]:o[h]=o[h]+1*t.datasets[c].data[h]}}}var n=new Array(t.datasets.length),o=new Array(t.datasets.length);if(i>=1&&a.inGraphDataShow){for(var y=0,C=0,c=0;c<t.datasets.length;c++)for(var h=0;h<t.datasets[c].data.length;h++)l[h]=0;for(var c=0;c<t.datasets.length;c++){lgtxt="string"==typeof t.datasets[c].title?t.datasets[c].title.trim():"";for(var h=0;h<t.datasets[c].data.length;h++)if("undefined"==typeof n[h]&&(n[h]=0,o[h]=0,zeroY=calculateOffset(a.logarithmic,0,r,s)),"undefined"!=typeof t.datasets[c].data[h]){if(1*t.datasets[c].data[h]<0)var x=n[h],b=n[h]+1*t.datasets[c].data[h];else var x=o[h],b=o[h]+1*t.datasets[c].data[h];var P=u-calculateOffset(a.logarithmic,x,r,s),A=u-calculateOffset(a.logarithmic,b,r,s);e.save(),e.textAlign=a.inGraphDataAlign,e.textBaseline=a.inGraphDataVAlign,e.font=a.inGraphDataFontStyle+" "+a.inGraphDataFontSize+"px "+a.inGraphDataFontFamily,e.fillStyle=a.inGraphDataFontColor,lgtxt2="string"==typeof t.labels[h]?t.labels[h].trim():"",l[h]+=1+t.datasets[c].data[h];var M=tmplbis(a.inGraphDataTmpl,{config:a,v1:fmtChartJS(a,lgtxt,a.fmtV1),v2:fmtChartJS(a,lgtxt2,a.fmtV2),v3:fmtChartJS(a,1*t.datasets[c].data[h],a.fmtV3),v4:fmtChartJS(a,l[h],a.fmtV4),v5:fmtChartJS(a,d[h],a.fmtV5),v6:roundToWithThousands(a,fmtChartJS(a,100*t.datasets[c].data[h]/d[h],a.fmtV6),a.roundPct),v7:fmtChartJS(a,S,a.fmtV7),v8:fmtChartJS(a,u,a.fmtV8),v9:fmtChartJS(a,S+m,a.fmtV9),v10:fmtChartJS(a,u-calculateOffset(a.logarithmic,t.datasets[c].data[h],r,s)+a.barStrokeWidth/2,a.fmtV10),v11:fmtChartJS(a,c,a.fmtV11),v12:fmtChartJS(a,h,a.fmtV12),data:t}),S=p+a.barValueSpacing+g*h;e.beginPath(),e.beginPath(),y=0,C=0,1==a.inGraphDataXPosition?C=S+a.inGraphDataPaddingX:2==a.inGraphDataXPosition?C=S+m/2+a.inGraphDataPaddingX:3==a.inGraphDataXPosition&&(C=S+m+a.inGraphDataPaddingX),1==a.inGraphDataYPosition?y=P-a.inGraphDataPaddingY:2==a.inGraphDataYPosition?y=A-(botbar-topbar)/2-a.inGraphDataPaddingY:3==a.inGraphDataYPosition&&(y=A-a.inGraphDataPaddingY),y>v.topNotUsableSize&&(e.translate(C,y),e.rotate(a.inGraphDataRotate*(Math.PI/180)),e.fillTextMultiLine(M,0,0,e.textBaseline,a.inGraphDataFontSize)),e.restore(),1*t.datasets[c].data[h]<0?n[h]=n[h]+1*t.datasets[c].data[h]:o[h]=o[h]+1*t.datasets[c].data[h]}}}v.legendMsr.dispLegend&&drawLegend(v.legendMsr,t,a,e,"StackedBar")}function n(){e.lineWidth=a.scaleLineWidth,e.strokeStyle=a.scaleLineColor,e.beginPath(),e.moveTo(p-a.scaleTickSizeLeft,u),e.lineTo(p+v.availableWidth+a.scaleTickSizeRight,u),e.stroke();for(var i=0;i<t.labels.length;i++)e.beginPath(),e.moveTo(p+i*g,u+a.scaleTickSizeBottom),e.lineWidth=a.scaleGridLineWidth,e.strokeStyle=a.scaleGridLineColor,a.scaleShowGridLines&&i>0&&i%a.scaleXGridLinesStep==0?e.lineTo(p+i*g,u-v.availableHeight-a.scaleTickSizeTop):e.lineTo(p+i*g,u),e.stroke();e.lineWidth=a.scaleLineWidth,e.strokeStyle=a.scaleLineColor,e.beginPath(),e.moveTo(p,u+a.scaleTickSizeBottom),e.lineTo(p,u-v.availableHeight-a.scaleTickSizeTop),e.stroke();for(var n=a.showYAxisMin?-1:0;n<r.steps;n++)e.beginPath(),e.moveTo(p-a.scaleTickSizeLeft,u-(n+1)*s),e.lineWidth=a.scaleGridLineWidth,e.strokeStyle=a.scaleGridLineColor,a.scaleShowGridLines&&n%a.scaleYGridLinesStep==0?e.lineTo(p+v.availableWidth+a.scaleTickSizeRight,u-(n+1)*s):e.lineTo(p,u-(n+1)*s),e.stroke()}function o(){if(e.font=a.scaleFontStyle+" "+a.scaleFontSize+"px "+a.scaleFontFamily,(a.xAxisTop||a.xAxisBottom)&&(e.textBaseline="top",v.rotateLabels>90?(e.save(),e.textAlign="left"):v.rotateLabels>0?(e.save(),e.textAlign="right"):e.textAlign="center",e.fillStyle=a.scaleFontColor,a.xAxisBottom))for(var i=0;i<t.labels.length;i++)e.save(),v.rotateLabels>0?(e.translate(p+a.barValueSpacing+i*g+m/2-v.highestXLabel/2,v.xLabelPos),e.rotate(-(v.rotateLabels*(Math.PI/180))),e.fillTextMultiLine(fmtChartJS(a,t.labels[i],a.fmtXLabel),0,0,e.textBaseline,a.scaleFontSize)):e.fillTextMultiLine(fmtChartJS(a,t.labels[i],a.fmtXLabel),p+a.barValueSpacing+i*g+m/2,v.xLabelPos,e.textBaseline,a.scaleFontSize),e.restore();e.textAlign="right",e.textBaseline="middle";for(var n=a.showYAxisMin?-1:0;n<r.steps;n++)a.scaleShowLabels&&(a.yAxisLeft&&(e.textAlign="right",e.fillTextMultiLine(r.labels[n+1],p-(a.scaleTickSizeLeft+a.yAxisSpaceRight),u-(n+1)*s,e.textBaseline,a.scaleFontSize)),a.yAxisRight&&(e.textAlign="left",e.fillTextMultiLine(r.labels[n+1],p+v.availableWidth+(a.scaleTickSizeRight+a.yAxisSpaceRight),u-(n+1)*s,e.textBaseline,a.scaleFontSize)))}function l(){for(var e=Number.MIN_VALUE,i=Number.MAX_VALUE,n=(new Array(t.datasets.length),new Array(t.datasets.length),0);n<t.datasets.length;n++)for(var o=0;o<t.datasets[n].data.length;o++){var l=n,s=0,r=0;for("undefined"!=typeof t.datasets[0].data[o]&&(1*t.datasets[0].data[o]>0?(s+=1*t.datasets[0].data[o],s>e&&(e=s),i>s&&(i=s)):(r+=1*t.datasets[0].data[o],r>e&&(e=r),i>r&&(i=r)));l>0;)"undefined"!=typeof t.datasets[l].data[o]&&(1*t.datasets[l].data[o]>0?(s+=1*t.datasets[l].data[o],s>e&&(e=s),i>s&&(i=s)):(r+=1*t.datasets[l].data[o],r>e&&(e=r),i>r&&(i=r))),l--}isNaN(a.graphMin)||(i=a.graphMin),isNaN(a.graphMax)||(e=a.graphMax),Math.abs(e-i)<1e-8&&(e=Max([2*e,1]),i=0),d=a.scaleFontSize,c=v.availableHeight;var h=Math.floor(c/(.66*d)),f=Math.floor(c/d*.5);return{maxValue:e,minValue:i,maxSteps:h,minSteps:f}}var s,r,d,c,h,f,g,p,u,m,v;if(e.tpchart="StackedBar",setting_new_chart_vars(e),!dynamicFunction(t,a,e))return void(a.responsive&&"undefined"==typeof e.firstPass&&(a.multiGraph||addResponsiveChart(e.ChartNewId,e,t,a)));if(a.responsive&&"undefined"==typeof e.firstPass){if(!a.multiGraph)return addResponsiveChart(e.ChartNewId,e,t,a),void subUpdateChart(e,t,a);e.firstPass=1}if(a.logarithmic=!1,"undefined"==typeof jsGraphAnnotate[e.ChartNewId]?jsGraphAnnotate[e.ChartNewId]=new Array:a.multiGraph||clearAnnotate(e.ChartNewId),defMouse(e,t,a),setRect(e,a),v=setMeasures(t,a,e,height,width,"nihil",[""],!0,!1,!0,!0,!0,"StackedBar"),h=l(),h.maxSteps>0&&h.minSteps>0){if(f=a.scaleShowLabels?a.scaleLabel:"",a.scaleOverride){r={steps:a.scaleSteps,stepValue:a.scaleStepWidth,graphMin:a.scaleStartValue,labels:[]};
for(var S=0;S<=r.steps;S++)f&&r.labels.push(tmpl(f,{value:fmtChartJS(a,1*(a.scaleStartValue+a.scaleStepWidth*S).toFixed(getDecimalPlaces(a.scaleStepWidth)),a.fmtYLabel)}));v=setMeasures(t,a,e,height,width,r.labels,null,!0,!1,!0,!0,!0,"StackedBar")}else r=calculateScale(1,a,h.maxSteps,h.minSteps,h.maxValue,h.minValue,f),v=setMeasures(t,a,e,height,width,r.labels,null,!0,!1,!0,!0,!0,"StackedBar");var x=v.availableHeight;v.availableHeight=v.availableHeight-a.scaleTickSizeBottom-a.scaleTickSizeTop,v.availableWidth=v.availableWidth-a.scaleTickSizeLeft-a.scaleTickSizeRight,s=Math.floor(v.availableHeight/r.steps),g=Math.floor(v.availableWidth/t.labels.length),(0==g||a.fullWidthGraph)&&(g=v.availableWidth/t.labels.length),v.clrwidth=v.clrwidth-(v.availableWidth-t.labels.length*g),v.availableWidth=t.labels.length*g,v.availableHeight=r.steps*s,v.xLabelPos+=a.scaleTickSizeBottom+a.scaleTickSizeTop-(x-v.availableHeight),v.clrheight+=a.scaleTickSizeBottom+a.scaleTickSizeTop-(x-v.availableHeight),p=v.leftNotUsableSize+a.scaleTickSizeLeft,u=v.topNotUsableSize+v.availableHeight+a.scaleTickSizeTop,m=g-2*a.scaleGridLineWidth-2*a.barValueSpacing-(a.barDatasetSpacing*t.datasets.length-1)-a.barStrokeWidth/2-1,m>=0&&1>=m&&(m=1),0>m&&m>=-1&&(m=-1),o(),animationLoop(a,n,i,e,v.clrx,v.clry,v.clrwidth,v.clrheight,p+v.availableWidth/2,u-v.availableHeight/2,p,u,t)}else testRedraw(e,t,a)},HorizontalStackedBar=function(t,a,e){function i(t,a,e){var i=a.steps*a.stepValue,n=t-a.graphMin,o=CapValue(n/i,1,0);return e*a.steps*o}function n(n){e.lineWidth=a.barStrokeWidth;for(var o=new Array(t.datasets.length),l=new Array(t.datasets.length),s=new Array,c=new Array,h=0;h<t.datasets.length;h++)for(var f=0;f<t.datasets[h].data.length;f++)s[f]=0,c[f]=0;for(var h=0;h<t.datasets.length;h++)for(var f=0;f<t.datasets[h].data.length;f++)"undefined"!=typeof t.datasets[h].data[f]&&(c[f]+=1*t.datasets[h].data[f]);for(var h=0;h<t.datasets.length;h++){n>=1&&(lgtxt="string"==typeof t.datasets[h].title?t.datasets[h].title.trim():"");for(var f=0;f<t.datasets[h].data.length;f++){var g=animationCorrection(n,t,a,h,f,1).animVal;g>1&&(g-=1),"undefined"==typeof o[f]&&(o[f]=0,l[f]=0,zeroY=i(0,d,r));var x=m+a.barValueSpacing-r*(f+1);if("undefined"!=typeof t.datasets[h].data[f]&&1*t.datasets[h].data[f]!=0){if(1*t.datasets[h].data[f]<0)var b=o[f],P=o[f]+1*t.datasets[h].data[f];else var b=l[f],P=l[f]+1*t.datasets[h].data[f];if(a.animationByDataset){var A=u+i(b,d,p),y=u+i(P,d,p);y=A+g*(y-A)}else var A=u+i(g*b,d,p),y=u+i(g*P,d,p);e.fillStyle=a.defaultFillColor,"function"==typeof t.datasets[h].fillColor?e.fillStyle=t.datasets[h].fillColor("FILLCOLOR",t,a,h,f,g,1*t.datasets[h].data[f],"HorizontalStackedBar",e,A,x,y,x+v):"string"==typeof t.datasets[h].fillColor?e.fillStyle=t.datasets[h].fillColor:"object"==typeof t.datasets[h].fillColor&&"string"==typeof t.datasets[h].fillColor[0]&&(e.fillStyle=t.datasets[h].fillColor[Min([t.datasets[h].fillColor.length-1,f])]),e.strokeStyle=a.defaultStrokeColor,"function"==typeof t.datasets[h].strokeColor?e.strokeStyle=t.datasets[h].strokeColor("STROKECOLOR",t,a,h,f,g,1*t.datasets[h].data[f],e,"HorizontalStackedBar",e,A,x,y,x+v):"string"==typeof t.datasets[h].strokeColor?e.strokeStyle=t.datasets[h].strokeColor:"object"==typeof t.datasets[h].strokeColor&&"string"==typeof t.datasets[h].strokeColor[0]&&(e.strokeStyle=t.datasets[h].strokeColor[Min([t.datasets[h].strokeColor.length-1,f])]),0!=g&&(e.beginPath(),e.moveTo(A,x),e.lineTo(y,x),e.lineTo(y,x+v),e.lineTo(A,x+v),e.lineTo(A,x),a.barShowStroke&&e.stroke(),e.closePath(),e.fill(),s[f]+=1*t.datasets[h].data[f],n>=1&&(lgtxt2="string"==typeof t.labels[f]?t.labels[f].trim():"",jsGraphAnnotate[e.ChartNewId][jsGraphAnnotate[e.ChartNewId].length]=1*t.datasets[h].data[f]<0?["RECT",y,x+v,A,x,lgtxt,lgtxt2,1*t.datasets[h].data[f],s[f],c[f],h,f]:["RECT",A,x+v,y,x,lgtxt,lgtxt2,1*t.datasets[h].data[f],s[f],c[f],h,f])),1*t.datasets[h].data[f]<0?o[f]=o[f]+1*t.datasets[h].data[f]:l[f]=l[f]+1*t.datasets[h].data[f]}}}if(n>=1&&a.inGraphDataShow){for(var o=new Array(t.datasets.length),l=new Array(t.datasets.length),C=0,M=0,h=0;h<t.datasets.length;h++)for(var f=0;f<t.datasets[h].data.length;f++)s[f]=0;for(var h=0;h<t.datasets.length;h++){lgtxt="string"==typeof t.datasets[h].title?t.datasets[h].title.trim():"";for(var f=0;f<t.datasets[h].data.length;f++)if("undefined"==typeof o[f]&&(o[f]=0,l[f]=0,zeroY=i(0,d,r)),"undefined"!=typeof t.datasets[h].data[f]){if(1*t.datasets[h].data[f]<0)var b=o[f],P=o[f]+1*t.datasets[h].data[f];else var b=l[f],P=l[f]+1*t.datasets[h].data[f];var A=u+i(b,d,p),y=u+i(P,d,p);e.save(),e.textAlign=a.inGraphDataAlign,e.textBaseline=a.inGraphDataVAlign,e.font=a.inGraphDataFontStyle+" "+a.inGraphDataFontSize+"px "+a.inGraphDataFontFamily,e.fillStyle=a.inGraphDataFontColor,lgtxt2="string"==typeof t.labels[f]?t.labels[f].trim():"";var x=m+a.barValueSpacing-r*(f+1);s[f]+=t.datasets[h].data[f];var w=tmplbis(a.inGraphDataTmpl,{config:a,v1:fmtChartJS(a,lgtxt,a.fmtV1),v2:fmtChartJS(a,lgtxt2,a.fmtV2),v3:fmtChartJS(a,1*t.datasets[h].data[f],a.fmtV3),v4:fmtChartJS(a,s[f],a.fmtV4),v5:fmtChartJS(a,c[f],a.fmtV5),v6:roundToWithThousands(a,fmtChartJS(a,100*t.datasets[h].data[f]/c[f],a.fmtV6),a.roundPct),v7:fmtChartJS(a,u,a.fmtV7),v8:fmtChartJS(a,x+v,a.fmtV8),v9:fmtChartJS(a,u+i(t.datasets[h].data[f],d,p)+a.barStrokeWidth/2,a.fmtV9),v10:fmtChartJS(a,x,a.fmtV10),v11:fmtChartJS(a,h,a.fmtV11),v12:fmtChartJS(a,f,a.fmtV12),data:t});e.beginPath(),C=0,M=0,1==a.inGraphDataXPosition?M=A+a.inGraphDataPaddingX:2==a.inGraphDataXPosition?M=A+(y-A)/2+a.inGraphDataPaddingX:3==a.inGraphDataXPosition&&(M=y+a.inGraphDataPaddingX),1==a.inGraphDataYPosition?C=x+v-a.inGraphDataPaddingY:2==a.inGraphDataYPosition?C=x+v/2-a.inGraphDataPaddingY:3==a.inGraphDataYPosition&&(C=x-a.inGraphDataPaddingY),M<=S.availableWidth+S.leftNotUsableSize&&(e.translate(M,C),e.rotate(a.inGraphDataRotate*(Math.PI/180)),e.fillTextMultiLine(w,0,0,e.textBaseline,a.inGraphDataFontSize),e.restore()),1*t.datasets[h].data[f]<0?o[f]=o[f]+1*t.datasets[h].data[f]:l[f]=l[f]+1*t.datasets[h].data[f]}}}S.legendMsr.dispLegend&&drawLegend(S.legendMsr,t,a,e,"HorizontalStackedBar")}function o(){e.lineWidth=a.scaleLineWidth,e.strokeStyle=a.scaleLineColor,e.beginPath(),e.moveTo(u-a.scaleTickSizeLeft,m),e.lineTo(u+S.availableWidth,m),e.stroke();for(var i=a.showYAxisMin?-1:0;i<d.steps;i++)i>=0&&(e.beginPath(),e.moveTo(u+i*p,m+a.scaleTickSizeBottom),e.lineWidth=a.scaleGridLineWidth,e.strokeStyle=a.scaleGridLineColor,a.scaleShowGridLines&&i>0&&i%a.scaleXGridLinesStep==0?e.lineTo(u+i*p,m-S.availableHeight-a.scaleTickSizeTop):e.lineTo(u+i*p,m),e.stroke());e.lineWidth=a.scaleLineWidth,e.strokeStyle=a.scaleLineColor,e.beginPath(),e.moveTo(u,m+a.scaleTickSizeBottom),e.lineTo(u,m-S.availableHeight-a.scaleTickSizeTop),e.stroke();for(var n=0;n<t.labels.length;n++)e.beginPath(),e.moveTo(u-a.scaleTickSizeLeft,m-(n+1)*r),e.lineWidth=a.scaleGridLineWidth,e.strokeStyle=a.scaleGridLineColor,a.scaleShowGridLines&&n%a.scaleYGridLinesStep==0?e.lineTo(u+S.availableWidth,m-(n+1)*r):e.lineTo(u,m-(n+1)*r),e.stroke()}function l(){if(e.font=a.scaleFontStyle+" "+a.scaleFontSize+"px "+a.scaleFontFamily,a.scaleShowLabels&&(a.xAxisTop||a.xAxisBottom)&&(e.textBaseline="top",S.rotateLabels>90?(e.save(),e.textAlign="left"):S.rotateLabels>0?(e.save(),e.textAlign="right"):e.textAlign="center",e.fillStyle=a.scaleFontColor,a.xAxisBottom))for(var i=a.showYAxisMin?-1:0;i<d.steps;i++)e.save(),S.rotateLabels>0?(e.translate(u+(i+1)*p-S.highestXLabel/2,S.xLabelPos),e.rotate(-(S.rotateLabels*(Math.PI/180))),e.fillTextMultiLine(d.labels[i+1],0,0,e.textBaseline,a.scaleFontSize)):e.fillTextMultiLine(d.labels[i+1],u+(i+1)*p,S.xLabelPos,e.textBaseline,a.scaleFontSize),e.restore();e.textAlign="right",e.textBaseline="middle";for(var n=0;n<t.labels.length;n++)a.yAxisLeft&&(e.textAlign="right",e.fillTextMultiLine(fmtChartJS(a,t.labels[n],a.fmtXLabel),u-(a.scaleTickSizeLeft+a.yAxisSpaceRight),m-(n+1)*r+v/2,e.textBaseline,a.scaleFontSize)),a.yAxisRight&&(e.textAlign="left",e.fillTextMultiLine(fmtChartJS(a,t.labels[n],a.fmtXLabel),u+S.availableWidth+(a.scaleTickSizeRight+a.yAxisSpaceRight),m-(n+1)*r+v/2,e.textBaseline,a.scaleFontSize))}function s(){for(var e=Number.MIN_VALUE,i=Number.MAX_VALUE,n=(new Array(t.datasets.length),new Array(t.datasets.length),0);n<t.datasets.length;n++)for(var o=0;o<t.datasets[n].data.length;o++){var l=n,s=0,r=0;for("undefined"!=typeof t.datasets[0].data[o]&&(1*t.datasets[0].data[o]>0?(s+=1*t.datasets[0].data[o],s>e&&(e=s),i>s&&(i=s)):(r+=1*t.datasets[0].data[o],r>e&&(e=r),i>r&&(i=r)));l>0;)"undefined"!=typeof t.datasets[l].data[o]&&(1*t.datasets[l].data[o]>0?(s+=1*t.datasets[l].data[o],s>e&&(e=s),i>s&&(i=s)):(r+=1*t.datasets[l].data[o],r>e&&(e=r),i>r&&(i=r))),l--}isNaN(a.graphMin)||(i=a.graphMin),isNaN(a.graphMax)||(e=a.graphMax),Math.abs(e-i)<1e-8&&(e=Max([2*e,1]),i=0),c=a.scaleFontSize,h=S.availableHeight;var d=Math.floor(h/(.66*c)),f=Math.floor(h/c*.5);return{maxValue:e,minValue:i,maxSteps:d,minSteps:f}}var r,d,c,h,f,g,p,u,m,v,S;if(e.tpchart="HorizontalStackedBar",setting_new_chart_vars(e),!dynamicFunction(t,a,e))return void(a.responsive&&"undefined"==typeof e.firstPass&&(a.multiGraph||addResponsiveChart(e.ChartNewId,e,t,a)));if(a.responsive&&"undefined"==typeof e.firstPass){if(!a.multiGraph)return addResponsiveChart(e.ChartNewId,e,t,a),void subUpdateChart(e,t,a);e.firstPass=1}if(a.reverseOrder&&"undefined"==typeof e.reversed&&(e.reversed=!0,t=reverseData(t)),a.logarithmic=!1,"undefined"==typeof jsGraphAnnotate[e.ChartNewId]?jsGraphAnnotate[e.ChartNewId]=new Array:a.multiGraph||clearAnnotate(e.ChartNewId),defMouse(e,t,a),setRect(e,a),S=setMeasures(t,a,e,height,width,"nihil",[""],!0,!0,!0,!0,!0,"HorizontalStackedBar"),f=s(),f.maxSteps>0&&f.minSteps>0){if(g=a.scaleShowLabels?a.scaleLabel:"",a.scaleOverride){d={steps:a.scaleSteps,stepValue:a.scaleStepWidth,graphMin:a.scaleStartValue,labels:[]};for(var x=0;x<=d.steps;x++)g&&d.labels.push(tmpl(g,{value:fmtChartJS(a,1*(a.scaleStartValue+a.scaleStepWidth*x).toFixed(getDecimalPlaces(a.scaleStepWidth)),a.fmtYLabel)}));S=setMeasures(t,a,e,height,width,d.labels,null,!0,!0,!0,!0,!0,"HorizontalStackedBar")}else d=calculateScale(1,a,f.maxSteps,f.minSteps,f.maxValue,f.minValue,g),S=setMeasures(t,a,e,height,width,d.labels,null,!0,!0,!0,!0,!0,"HorizontalStackedBar");S.availableHeight=S.availableHeight-a.scaleTickSizeBottom-a.scaleTickSizeTop,S.availableWidth=S.availableWidth-a.scaleTickSizeLeft-a.scaleTickSizeRight,r=Math.floor(S.availableHeight/t.labels.length),p=Math.floor(S.availableWidth/d.steps),(0==p||a.fullWidthGraph)&&(p=S.availableWidth/d.steps),S.clrwidth=S.clrwidth-(S.availableWidth-d.steps*p),S.availableWidth=d.steps*p,S.availableHeight=t.labels.length*r,u=S.leftNotUsableSize+a.scaleTickSizeLeft,m=S.topNotUsableSize+S.availableHeight+a.scaleTickSizeTop,v=r-2*a.scaleGridLineWidth-2*a.barValueSpacing-(a.barDatasetSpacing*t.datasets.length-1)-a.barStrokeWidth/2-1,v>=0&&1>=v&&(v=1),0>v&&v>=-1&&(v=-1),l(),animationLoop(a,o,n,e,S.clrx,S.clry,S.clrwidth,S.clrheight,u+S.availableWidth/2,m-S.availableHeight/2,u,m,t)}else testRedraw(e,t,a)},Bar=function(data,config,ctx){function drawBars(t){for(var a,e,i,n=new Array,o=new Array,l=0;l<data.datasets.length;l++)for(var s=0;s<data.datasets[l].data.length;s++)n[s]=0,o[s]=0;for(var l=0;l<data.datasets.length;l++)for(var s=0;s<data.datasets[l].data.length;s++)"undefined"!=typeof data.datasets[l].data[s]&&(o[s]+=1*data.datasets[l].data[s]);ctx.lineWidth=config.barStrokeWidth;for(var l=0;l<data.datasets.length;l++)if("Line"!=data.datasets[l].type){t>=1&&(lgtxt="string"==typeof data.datasets[l].title?data.datasets[l].title.trim():"");for(var s=0;s<data.datasets[l].data.length;s++){var r=animationCorrection(t,data,config,l,s,1).animVal;r>1&&(r-=1);var d=yAxisPosX+config.barValueSpacing+valueHop*s+barWidth*l+config.barDatasetSpacing*l+config.barStrokeWidth*l,c=r*(calculateOffset(config.logarithmic,1*data.datasets[l].data[s],calculatedScale,scaleHop)-zeroY)+config.barStrokeWidth/2;ctx.fillStyle=config.defaultFillColor,"function"==typeof data.datasets[l].fillColor?ctx.fillStyle=data.datasets[l].fillColor("FILLCOLOR",data,config,l,s,r,1*data.datasets[l].data[s],"Bar",ctx,d,xAxisPosY-zeroY,d+barWidth,xAxisPosY-zeroY-c):"string"==typeof data.datasets[l].fillColor?ctx.fillStyle=data.datasets[l].fillColor:"object"==typeof data.datasets[l].fillColor&&"string"==typeof data.datasets[l].fillColor[0]&&(ctx.fillStyle=data.datasets[l].fillColor[Min([data.datasets[l].fillColor.length-1,s])]),ctx.strokeStyle=config.defaultStrokeColor,"function"==typeof data.datasets[l].strokeColor?ctx.strokeStyle=data.datasets[l].strokeColor("STROKECOLOR",data,config,l,s,CurrentAnimPc,1*data.datasets[l].data[s],"Bar",ctx,d,xAxisPosY-zeroY-c,d+barWidth,xAxisPosY-zeroY):"string"==typeof data.datasets[l].strokeColor?ctx.strokeStyle=data.datasets[l].strokeColor:"object"==typeof data.datasets[l].strokeColor&&"string"==typeof data.datasets[l].strokeColor[0]&&(ctx.strokeStyle=data.datasets[l].strokeColor[Min([data.datasets[l].strokeColor.length-1,s])]),"undefined"!=typeof data.datasets[l].data[s]&&(roundRect(ctx,d,xAxisPosY-zeroY,barWidth,c,config.barShowStroke,config.barBorderRadius),n[s]+=1*data.datasets[l].data[s],t>=1&&(lgtxt2="string"==typeof data.labels[s]?data.labels[s].trim():"",a=xAxisPosY-zeroY,e=xAxisPosY-calculateOffset(config.logarithmic,1*data.datasets[l].data[s],calculatedScale,scaleHop)+config.barStrokeWidth/2,e>a&&(i=a,a=e,e=i),jsGraphAnnotate[ctx.ChartNewId][jsGraphAnnotate[ctx.ChartNewId].length]=["RECT",d,a,d+barWidth,e,lgtxt,lgtxt2,1*data.datasets[l].data[s],n[s],o[s],l,s]))}}else{var h={datasets:[],labels:data.labels};h.datasets.push(data.datasets[l]),lineConfig=mergeChartConfig(config,{datasetFill:data.datasets[l].fill}),drawLinesDataset(1,t,h,lineConfig,ctx,offsets,{xAxisPosY:xAxisPosY,yAxisPosX:yAxisPosX+config.barValueSpacing+(barWidth+config.barDatasetSpacing/2+config.barStrokeWidth)*nrOfBars/2,valueHop:valueHop,scaleHop:scaleHop,nbValueHop:data.labels.length,zeroY:zeroY,calculatedScale:calculatedScale,logarithmic:config.logarithmic})}if(t>=1&&config.inGraphDataShow){for(var l=0;l<data.datasets.length;l++)for(var s=0;s<data.datasets[l].data.length;s++)n[s]=0;for(var l=0;l<data.datasets.length;l++){lgtxt="string"==typeof data.datasets[l].title?data.datasets[l].title.trim():"";for(var s=0;s<data.datasets[l].data.length;s++)if("Line"!=data.datasets[l].type&&"undefined"!=typeof data.datasets[l].data[s]){"string"==typeof data.labels[s]&&(lgtxt2=data.labels[s].trim()),ctx.save(),ctx.textAlign=config.inGraphDataAlign,ctx.textBaseline=config.inGraphDataVAlign,ctx.font=config.inGraphDataFontStyle+" "+config.inGraphDataFontSize+"px "+config.inGraphDataFontFamily,ctx.fillStyle=config.inGraphDataFontColor;var d=yAxisPosX+config.barValueSpacing+valueHop*s+barWidth*l+config.barDatasetSpacing*l+config.barStrokeWidth*l;a=xAxisPosY-zeroY,e=xAxisPosY-calculateOffset(config.logarithmic,1*data.datasets[l].data[s],calculatedScale,scaleHop)+config.barStrokeWidth/2,ctx.beginPath();var f=0,g=0;1==config.inGraphDataXPosition?g=d+config.inGraphDataPaddingX:2==config.inGraphDataXPosition?g=d+barWidth/2+config.inGraphDataPaddingX:3==config.inGraphDataXPosition&&(g=d+barWidth+config.inGraphDataPaddingX),1==config.inGraphDataYPosition?f=xAxisPosY-zeroY-config.inGraphDataPaddingY:2==config.inGraphDataYPosition?f=xAxisPosY-(calculateOffset(config.logarithmic,1*data.datasets[l].data[s],calculatedScale,scaleHop)+config.barStrokeWidth/2)/2-config.inGraphDataPaddingY:3==config.inGraphDataYPosition&&(f=xAxisPosY-calculateOffset(config.logarithmic,1*data.datasets[l].data[s],calculatedScale,scaleHop)+config.barStrokeWidth/2-config.inGraphDataPaddingY),ctx.translate(g,f),n[s]+=1*data.datasets[l].data[s];var p=tmplbis(config.inGraphDataTmpl,{config:config,v1:fmtChartJS(config,lgtxt,config.fmtV1),v2:fmtChartJS(config,lgtxt2,config.fmtV2),v3:fmtChartJS(config,1*data.datasets[l].data[s],config.fmtV3),v4:fmtChartJS(config,n[s],config.fmtV4),v5:fmtChartJS(config,o[s],config.fmtV5),v6:roundToWithThousands(config,fmtChartJS(config,100*data.datasets[l].data[s]/o[s],config.fmtV6),config.roundPct),v7:fmtChartJS(config,d,config.fmtV7),v8:fmtChartJS(config,a,config.fmtV8),v9:fmtChartJS(config,d+barWidth,config.fmtV9),v10:fmtChartJS(config,e,config.fmtV10),v11:fmtChartJS(config,l,config.fmtV11),v12:fmtChartJS(config,s,config.fmtV12),data:data});ctx.rotate(config.inGraphDataRotate*(Math.PI/180)),ctx.fillTextMultiLine(p,0,0,ctx.textBaseline,config.inGraphDataFontSize),ctx.restore()}}}t>=1&&"function"==typeof drawMath&&drawMath(ctx,config,data,msr,{xAxisPosY:xAxisPosY,yAxisPosX:yAxisPosX,valueHop:valueHop,scaleHop:scaleHop,zeroY:zeroY,calculatedScale:calculatedScale,calculateOffset:calculateOffset,barWidth:barWidth}),msr.legendMsr.dispLegend&&drawLegend(msr.legendMsr,data,config,ctx,"Bar")}function roundRect(t,a,e,i,n,o,l){t.beginPath(),t.moveTo(a+l,e),t.lineTo(a+i-l,e),t.quadraticCurveTo(a+i,e,a+i,e),t.lineTo(a+i,e-n+l),t.quadraticCurveTo(a+i,e-n,a+i-l,e-n),t.lineTo(a+l,e-n),t.quadraticCurveTo(a,e-n,a,e-n+l),t.lineTo(a,e),t.quadraticCurveTo(a,e,a+l,e),o&&t.stroke(),t.closePath(),t.fill()}function drawScale(){ctx.lineWidth=config.scaleLineWidth,ctx.strokeStyle=config.scaleLineColor,ctx.beginPath(),ctx.moveTo(yAxisPosX-config.scaleTickSizeLeft,xAxisPosY),ctx.lineTo(yAxisPosX+msr.availableWidth+config.scaleTickSizeRight,xAxisPosY),ctx.stroke();for(var t=0;t<data.labels.length;t++)ctx.beginPath(),ctx.moveTo(yAxisPosX+t*valueHop,xAxisPosY+config.scaleTickSizeBottom),ctx.lineWidth=config.scaleGridLineWidth,ctx.strokeStyle=config.scaleGridLineColor,config.scaleShowGridLines&&t>0&&t%config.scaleXGridLinesStep==0?ctx.lineTo(yAxisPosX+t*valueHop,xAxisPosY-msr.availableHeight-config.scaleTickSizeTop):ctx.lineTo(yAxisPosX+t*valueHop,xAxisPosY),ctx.stroke();ctx.lineWidth=config.scaleLineWidth,ctx.strokeStyle=config.scaleLineColor,ctx.beginPath(),ctx.moveTo(yAxisPosX,xAxisPosY+config.scaleTickSizeBottom),ctx.lineTo(yAxisPosX,xAxisPosY-msr.availableHeight-config.scaleTickSizeTop),ctx.stroke();for(var a=0;a<calculatedScale.steps;a++)ctx.beginPath(),ctx.moveTo(yAxisPosX-config.scaleTickSizeLeft,xAxisPosY-(a+1)*scaleHop),ctx.lineWidth=config.scaleGridLineWidth,ctx.strokeStyle=config.scaleGridLineColor,config.scaleShowGridLines&&a%config.scaleYGridLinesStep==0?ctx.lineTo(yAxisPosX+msr.availableWidth+config.scaleTickSizeRight,xAxisPosY-(a+1)*scaleHop):ctx.lineTo(yAxisPosX,xAxisPosY-(a+1)*scaleHop),ctx.stroke()}function drawLabels(){if(ctx.font=config.scaleFontStyle+" "+config.scaleFontSize+"px "+config.scaleFontFamily,(config.xAxisTop||config.xAxisBottom)&&(ctx.textBaseline="top",msr.rotateLabels>90?(ctx.save(),ctx.textAlign="left"):msr.rotateLabels>0?(ctx.save(),ctx.textAlign="right"):ctx.textAlign="center",ctx.fillStyle=config.scaleFontColor,config.xAxisBottom))for(var t=0;t<data.labels.length;t++)ctx.save(),msr.rotateLabels>0?(ctx.translate(yAxisPosX+t*valueHop+valueHop/2-msr.highestXLabel/2,msr.xLabelPos),ctx.rotate(-(msr.rotateLabels*(Math.PI/180))),ctx.fillTextMultiLine(fmtChartJS(config,data.labels[t],config.fmtXLabel),0,0,ctx.textBaseline,config.scaleFontSize)):ctx.fillTextMultiLine(fmtChartJS(config,data.labels[t],config.fmtXLabel),yAxisPosX+t*valueHop+valueHop/2,msr.xLabelPos,ctx.textBaseline,config.scaleFontSize),ctx.restore();ctx.textAlign="right",ctx.textBaseline="middle";for(var a=config.showYAxisMin?-1:0;a<calculatedScale.steps;a++)config.scaleShowLabels&&(config.yAxisLeft&&(ctx.textAlign="right",ctx.fillTextMultiLine(calculatedScale.labels[a+1],yAxisPosX-(config.scaleTickSizeLeft+config.yAxisSpaceRight),xAxisPosY-(a+1)*scaleHop,ctx.textBaseline,config.scaleFontSize)),config.yAxisRight&&(ctx.textAlign="left",ctx.fillTextMultiLine(calculatedScale.labels[a+1],yAxisPosX+msr.availableWidth+(config.scaleTickSizeRight+config.yAxisSpaceRight),xAxisPosY-(a+1)*scaleHop,ctx.textBaseline,config.scaleFontSize)))}function getValueBounds(){for(var upperValue=Number.MIN_VALUE,lowerValue=Number.MAX_VALUE,i=0;i<data.datasets.length;i++){var mathFctName=data.datasets[i].drawMathDeviation,mathValueHeight=0;if("function"==typeof eval(mathFctName)){var parameter={data:data,datasetNr:i};mathValueHeight=window[mathFctName](parameter)}for(var j=0;j<data.datasets[i].data.length;j++)1*data.datasets[i].data[j]+mathValueHeight>upperValue&&(upperValue=1*data.datasets[i].data[j]+mathValueHeight),1*data.datasets[i].data[j]-mathValueHeight<lowerValue&&(lowerValue=1*data.datasets[i].data[j]-mathValueHeight)}Math.abs(upperValue-lowerValue)<1e-8&&(upperValue=Max([2*upperValue,1]),lowerValue=0),isNaN(config.graphMin)||(lowerValue=config.graphMin),isNaN(config.graphMax)||(upperValue=config.graphMax),labelHeight=config.scaleFontSize,scaleHeight=msr.availableHeight;var maxSteps=Math.floor(scaleHeight/(.66*labelHeight)),minSteps=Math.floor(scaleHeight/labelHeight*.5);return{maxValue:upperValue,minValue:lowerValue,maxSteps:maxSteps,minSteps:minSteps}}var maxSize,scaleHop,calculatedScale,labelHeight,scaleHeight,valueBounds,labelTemplateString,valueHop,widestXLabel,xAxisLength,yAxisPosX,xAxisPosY,barWidth,rotateLabels=0,msr,offsets=[];if(ctx.tpchart="Bar",setting_new_chart_vars(ctx),!dynamicFunction(data,config,ctx))return void(config.responsive&&"undefined"==typeof ctx.firstPass&&(config.multiGraph||addResponsiveChart(ctx.ChartNewId,ctx,data,config)));if(config.responsive&&"undefined"==typeof ctx.firstPass){if(!config.multiGraph)return addResponsiveChart(ctx.ChartNewId,ctx,data,config),void subUpdateChart(ctx,data,config);ctx.firstPass=1}for(var nrOfBars=data.datasets.length,nrOfLines=0,lineDatasets=[],barDatasets=[],i=0;i<data.datasets.length;i++)"Line"==data.datasets[i].type?(nrOfLines++,lineDatasets.push(i)):barDatasets.push(i);for(var bufferDataset,l=0,i=data.datasets.length-1;i>=0;i--)if(lineDatasets.indexOf(i)>=0){l++;for(var b=i;b<data.datasets.length-l;b++)bufferDataset=data.datasets[b+1],data.datasets[b+1]=data.datasets[b],data.datasets[b]=bufferDataset}if(nrOfBars-=nrOfLines,"undefined"==typeof jsGraphAnnotate[ctx.ChartNewId]?jsGraphAnnotate[ctx.ChartNewId]=new Array:config.multiGraph||clearAnnotate(ctx.ChartNewId),defMouse(ctx,data,config),setRect(ctx,config),msr=setMeasures(data,config,ctx,height,width,"nihil",[""],!0,!1,!0,!0,!0,"Bar"),valueBounds=getValueBounds(),valueBounds.maxSteps>0&&valueBounds.minSteps>0){config.logarithmic!==!1&&valueBounds.minValue<=0&&(config.logarithmic=!1);var OrderOfMagnitude=calculateOrderOfMagnitude(Math.pow(10,calculateOrderOfMagnitude(valueBounds.maxValue)+1))-calculateOrderOfMagnitude(Math.pow(10,calculateOrderOfMagnitude(valueBounds.minValue)));("fuzzy"==config.logarithmic&&4>OrderOfMagnitude||config.scaleOverride)&&(config.logarithmic=!1),labelTemplateString=config.scaleShowLabels?config.scaleLabel:"",config.scaleOverride?(calculatedScale={steps:config.scaleSteps,stepValue:config.scaleStepWidth,graphMin:config.scaleStartValue,graphMax:config.scaleStartValue+config.scaleSteps*config.scaleStepWidth,labels:[]},populateLabels(1,config,labelTemplateString,calculatedScale.labels,calculatedScale.steps,config.scaleStartValue,calculatedScale.graphMax,config.scaleStepWidth),msr=setMeasures(data,config,ctx,height,width,calculatedScale.labels,null,!0,!1,!0,!0,!0,"Bar")):(calculatedScale=calculateScale(1,config,valueBounds.maxSteps,valueBounds.minSteps,valueBounds.maxValue,valueBounds.minValue,labelTemplateString),msr=setMeasures(data,config,ctx,height,width,calculatedScale.labels,null,!0,!1,!0,!0,!0,"Bar"));var prevHeight=msr.availableHeight;msr.availableHeight=msr.availableHeight-config.scaleTickSizeBottom-config.scaleTickSizeTop,msr.availableWidth=msr.availableWidth-config.scaleTickSizeLeft-config.scaleTickSizeRight,scaleHop=Math.floor(msr.availableHeight/calculatedScale.steps),valueHop=Math.floor(msr.availableWidth/data.labels.length),(0==valueHop||config.fullWidthGraph)&&(valueHop=msr.availableWidth/data.labels.length),msr.clrwidth=msr.clrwidth-(msr.availableWidth-data.labels.length*valueHop),msr.availableWidth=data.labels.length*valueHop,msr.availableHeight=calculatedScale.steps*scaleHop,msr.xLabelPos+=config.scaleTickSizeBottom+config.scaleTickSizeTop-(prevHeight-msr.availableHeight),msr.clrheight+=config.scaleTickSizeBottom+config.scaleTickSizeTop-(prevHeight-msr.availableHeight),yAxisPosX=msr.leftNotUsableSize+config.scaleTickSizeLeft,xAxisPosY=msr.topNotUsableSize+msr.availableHeight+config.scaleTickSizeTop,barWidth=(valueHop-2*config.scaleGridLineWidth-2*config.barValueSpacing-(config.barDatasetSpacing*nrOfBars-1)-(config.barStrokeWidth/2*nrOfBars-1))/nrOfBars,barWidth>=0&&1>=barWidth&&(barWidth=1),0>barWidth&&barWidth>=-1&&(barWidth=-1);var zeroY=0;if(valueBounds.minValue<0)var zeroY=calculateOffset(config.logarithmic,0,calculatedScale,scaleHop);for(var i=0;i<data.datasets.length;i++){offsets[i]=[];for(var j=0;j<data.datasets[i].data.length;j++)offsets[i][j]=calculateOffset(config.logarithmic,data.datasets[i].data[j],calculatedScale,scaleHop)-zeroY}drawLabels(),animationLoop(config,drawScale,drawBars,ctx,msr.clrx,msr.clry,msr.clrwidth,msr.clrheight,yAxisPosX+msr.availableWidth/2,xAxisPosY-msr.availableHeight/2,yAxisPosX,xAxisPosY,data)}else testRedraw(ctx,data,config)},HorizontalBar=function(t,a,e){function i(i){for(var o=new Array,l=new Array,s=0;s<t.datasets.length;s++)for(var c=0;c<t.datasets[s].data.length;c++)o[c]=0,l[c]=0;for(var s=0;s<t.datasets.length;s++)for(var c=0;c<t.datasets[s].data.length;c++)"undefined"!=typeof t.datasets[s].data[c]&&(l[c]+=1*t.datasets[s].data[c]);e.lineWidth=a.barStrokeWidth;for(var s=0;s<t.datasets.length;s++){i>=1&&(lgtxt="string"==typeof t.datasets[s].title?t.datasets[s].title.trim():"");for(var c=0;c<t.datasets[s].data.length;c++){var h=animationCorrection(i,t,a,s,c,1).animVal;h>1&&(h-=1);var f=m+a.barValueSpacing-r*(c+1)+v*s+a.barDatasetSpacing*s+a.barStrokeWidth*s,g=h*(calculateOffset(a.logarithmic,1*t.datasets[s].data[c],d,p)-x)+a.barStrokeWidth/2;e.fillStyle=a.defaultFillColor,"function"==typeof t.datasets[s].fillColor?e.fillStyle=t.datasets[s].fillColor("FILLCOLOR",t,a,s,c,h,1*t.datasets[s].data[c],"HorizontalBar",e,u+x,f,u+x+g,f+v):"string"==typeof t.datasets[s].fillColor?e.fillStyle=t.datasets[s].fillColor:"object"==typeof t.datasets[s].fillColor&&"string"==typeof t.datasets[s].fillColor[0]&&(e.fillStyle=t.datasets[s].fillColor[Min([t.datasets[s].fillColor.length-1,c])]),e.strokeStyle=a.defaultStrokeColor,"function"==typeof t.datasets[s].strokeColor?e.strokeStyle=t.datasets[s].strokeColor("STROKECOLOR",t,a,s,c,h,1*t.datasets[s].data[c],"HorizontalBar",e,u,f,u+g,f+v):"string"==typeof t.datasets[s].strokeColor?e.strokeStyle=t.datasets[s].strokeColor:"object"==typeof t.datasets[s].strokeColor&&"string"==typeof t.datasets[s].strokeColor[0]&&(e.strokeStyle=t.datasets[s].strokeColor[Min([t.datasets[s].strokeColor.length-1,c])]),"undefined"!=typeof t.datasets[s].data[c]&&(n(e,f,u+x,v,g,a.barShowStroke,a.barBorderRadius,0),o[c]+=1*t.datasets[s].data[c],i>=1&&(lgtxt2="string"==typeof t.labels[c]?t.labels[c].trim():"",t1=u+x,t2=u+calculateOffset(a.logarithmic,1*t.datasets[s].data[c],d,p)+a.barStrokeWidth/2,t1>t2&&(t3=t1,t1=t2,t2=t3),jsGraphAnnotate[e.ChartNewId][jsGraphAnnotate[e.ChartNewId].length]=["RECT",t1,f+v,t2,f,lgtxt,lgtxt2,1*t.datasets[s].data[c],o[c],l[c],s,c]))}}if(i>=1&&a.inGraphDataShow){for(var s=0;s<t.datasets.length;s++)for(var c=0;c<t.datasets[s].data.length;c++)o[c]=0;for(var s=0;s<t.datasets.length;s++){lgtxt="string"==typeof t.datasets[s].title?t.datasets[s].title.trim():"";for(var c=0;c<t.datasets[s].data.length;c++)if("undefined"!=typeof t.datasets[s].data[c]){"string"==typeof t.labels[c]&&(lgtxt2=t.labels[c].trim()),e.save(),e.textAlign=a.inGraphDataAlign,e.textBaseline=a.inGraphDataVAlign,e.font=a.inGraphDataFontStyle+" "+a.inGraphDataFontSize+"px "+a.inGraphDataFontFamily,e.fillStyle=a.inGraphDataFontColor;var f=m+a.barValueSpacing-r*(c+1)+v*s+a.barDatasetSpacing*s+a.barStrokeWidth*s;t1=u+x,t2=u+calculateOffset(a.logarithmic,1*t.datasets[s].data[c],d,p)+a.barStrokeWidth/2,t1>t2&&(t3=t1,t1=t2,t2=t3),e.beginPath();var b=0,P=0;1==a.inGraphDataYPosition?b=f-a.inGraphDataPaddingY+v:2==a.inGraphDataYPosition?b=f+v/2-a.inGraphDataPaddingY:3==a.inGraphDataYPosition&&(b=f-a.inGraphDataPaddingY),1==a.inGraphDataXPosition?P=u+x+a.inGraphDataPaddingX:2==a.inGraphDataXPosition?P=u+(calculateOffset(a.logarithmic,1*t.datasets[s].data[c],d,p)+a.barStrokeWidth/2)/2+a.inGraphDataPaddingX:3==a.inGraphDataXPosition&&(P=u+calculateOffset(a.logarithmic,1*t.datasets[s].data[c],d,p)+a.barStrokeWidth/2+a.inGraphDataPaddingX),e.translate(P,b),o[c]+=1*t.datasets[s].data[c];var A=tmplbis(a.inGraphDataTmpl,{config:a,v1:fmtChartJS(a,lgtxt,a.fmtV1),v2:fmtChartJS(a,lgtxt2,a.fmtV2),v3:fmtChartJS(a,1*t.datasets[s].data[c],a.fmtV3),v4:fmtChartJS(a,o[c],a.fmtV4),v5:fmtChartJS(a,l[c],a.fmtV5),v6:roundToWithThousands(a,fmtChartJS(a,100*t.datasets[s].data[c]/l[c],a.fmtV6),a.roundPct),v7:fmtChartJS(a,t1,a.fmtV7),v8:fmtChartJS(a,f+v,a.fmtV8),v9:fmtChartJS(a,t2,a.fmtV9),v10:fmtChartJS(a,f,a.fmtV10),v11:fmtChartJS(a,s,a.fmtV11),v12:fmtChartJS(a,c,a.fmtV12),data:t});e.rotate(a.inGraphDataRotate*(Math.PI/180)),e.fillTextMultiLine(A,0,0,e.textBaseline,a.inGraphDataFontSize),e.restore()}}}S.legendMsr.dispLegend&&drawLegend(S.legendMsr,t,a,e,"HorizontalBar")}function n(t,a,e,i,n,o,l,s){t.beginPath(),t.moveTo(e+s,a+l),t.lineTo(e+s,a+i-l),t.quadraticCurveTo(e+s,a+i,e+s,a+i),t.lineTo(e+n-l,a+i),t.quadraticCurveTo(e+n,a+i,e+n,a+i-l),t.lineTo(e+n,a+l),t.quadraticCurveTo(e+n,a,e+n-l,a),t.lineTo(e+s,a),t.quadraticCurveTo(e+s,a,e+s,a+l),o&&t.stroke(),t.closePath(),t.fill()}function o(){e.lineWidth=a.scaleLineWidth,e.strokeStyle=a.scaleLineColor,e.beginPath(),e.moveTo(u-a.scaleTickSizeLeft,m),e.lineTo(u+S.availableWidth+a.scaleTickSizeRight,m),e.stroke();for(var i=a.showYAxisMin?-1:0;i<d.steps;i++)i>=0&&(e.beginPath(),e.moveTo(u+i*p,m+a.scaleTickSizeBottom),e.lineWidth=a.scaleGridLineWidth,e.strokeStyle=a.scaleGridLineColor,a.scaleShowGridLines&&i>0&&i%a.scaleXGridLinesStep==0?e.lineTo(u+i*p,m-S.availableHeight-a.scaleTickSizeTop):e.lineTo(u+i*p,m),e.stroke());e.lineWidth=a.scaleLineWidth,e.strokeStyle=a.scaleLineColor,e.beginPath(),e.moveTo(u,m+a.scaleTickSizeBottom),e.lineTo(u,m-S.availableHeight-a.scaleTickSizeTop),e.stroke();for(var n=0;n<t.labels.length;n++)e.beginPath(),e.moveTo(u-a.scaleTickSizeLeft,m-(n+1)*r),e.lineWidth=a.scaleGridLineWidth,e.strokeStyle=a.scaleGridLineColor,a.scaleShowGridLines&&n%a.scaleYGridLinesStep==0?e.lineTo(u+S.availableWidth+a.scaleTickSizeRight,m-(n+1)*r):e.lineTo(u,m-(n+1)*r),e.stroke()}function l(){if(e.font=a.scaleFontStyle+" "+a.scaleFontSize+"px "+a.scaleFontFamily,a.scaleShowLabels&&(a.xAxisTop||a.xAxisBottom)&&(e.textBaseline="top",S.rotateLabels>90?(e.save(),e.textAlign="left"):S.rotateLabels>0?(e.save(),e.textAlign="right"):e.textAlign="center",e.fillStyle=a.scaleFontColor,a.xAxisBottom))for(var i=a.showYAxisMin?-1:0;i<d.steps;i++)e.save(),S.rotateLabels>0?(e.translate(u+(i+1)*p-S.highestXLabel/2,S.xLabelPos),e.rotate(-(S.rotateLabels*(Math.PI/180))),e.fillTextMultiLine(d.labels[i+1],0,0,e.textBaseline,a.scaleFontSize)):e.fillTextMultiLine(d.labels[i+1],u+(i+1)*p,S.xLabelPos,e.textBaseline,a.scaleFontSize),e.restore();e.textAlign="right",e.textBaseline="middle";for(var n=0;n<t.labels.length;n++)a.yAxisLeft&&(e.textAlign="right",e.fillTextMultiLine(fmtChartJS(a,t.labels[n],a.fmtXLabel),u-(a.scaleTickSizeLeft+a.yAxisSpaceRight),m-n*r-r/2,e.textBaseline,a.scaleFontSize)),a.yAxisRight&&(e.textAlign="left",e.fillTextMultiLine(fmtChartJS(a,t.labels[n],a.fmtXLabel),u+S.availableWidth+(a.scaleTickSizeRight+a.yAxisSpaceRight),m-n*r-r/2,e.textBaseline,a.scaleFontSize))}function s(){for(var e=Number.MIN_VALUE,i=Number.MAX_VALUE,n=0;n<t.datasets.length;n++)for(var o=0;o<t.datasets[n].data.length;o++)1*t.datasets[n].data[o]>e&&(e=1*t.datasets[n].data[o]),1*t.datasets[n].data[o]<i&&(i=1*t.datasets[n].data[o]);Math.abs(e-i)<1e-8&&(e=Max([2*e,1]),i=0),isNaN(a.graphMin)||(i=a.graphMin),isNaN(a.graphMax)||(e=a.graphMax),c=a.scaleFontSize,h=S.availableHeight;
var l=Math.floor(h/(.66*c)),s=Math.floor(h/c*.5);return{maxValue:e,minValue:i,maxSteps:l,minSteps:s}}var r,d,c,h,f,g,p,u,m,v,S;if(e.tpchart="HorizontalBar",setting_new_chart_vars(e),!dynamicFunction(t,a,e))return void(a.responsive&&"undefined"==typeof e.firstPass&&(a.multiGraph||addResponsiveChart(e.ChartNewId,e,t,a)));if(a.responsive&&"undefined"==typeof e.firstPass){if(!a.multiGraph)return addResponsiveChart(e.ChartNewId,e,t,a),void subUpdateChart(e,t,a);e.firstPass=1}if(a.reverseOrder&&"undefined"==typeof e.reversed&&(e.reversed=!0,t=reverseData(t)),"undefined"==typeof jsGraphAnnotate[e.ChartNewId]?jsGraphAnnotate[e.ChartNewId]=new Array:a.multiGraph||clearAnnotate(e.ChartNewId),defMouse(e,t,a),setRect(e,a),S=setMeasures(t,a,e,height,width,"nihil",[""],!0,!0,!0,!0,!0,"StackedBar"),f=s(),f.maxSteps>0&&f.minSteps>0){g=a.scaleShowLabels?a.scaleLabel:"",a.scaleOverride?(d={steps:a.scaleSteps,stepValue:a.scaleStepWidth,graphMin:a.scaleStartValue,graphMax:a.scaleStartValue+a.scaleSteps*a.scaleStepWidth,labels:[]},populateLabels(1,a,g,d.labels,d.steps,a.scaleStartValue,d.graphMax,a.scaleStepWidth),S=setMeasures(t,a,e,height,width,d.labels,null,!0,!0,!0,!0,!0,"HorizontalBar")):(d=calculateScale(1,a,f.maxSteps,f.minSteps,f.maxValue,f.minValue,g),S=setMeasures(t,a,e,height,width,d.labels,null,!0,!0,!0,!0,!0,"HorizontalBar")),S.availableHeight=S.availableHeight-a.scaleTickSizeBottom-a.scaleTickSizeTop,S.availableWidth=S.availableWidth-a.scaleTickSizeLeft-a.scaleTickSizeRight,r=Math.floor(S.availableHeight/t.labels.length),p=Math.floor(S.availableWidth/d.steps),(0==p||a.fullWidthGraph)&&(p=S.availableWidth/d.steps),S.clrwidth=S.clrwidth-(S.availableWidth-d.steps*p),S.availableWidth=d.steps*p,S.availableHeight=t.labels.length*r,u=S.leftNotUsableSize+a.scaleTickSizeLeft,m=S.topNotUsableSize+S.availableHeight+a.scaleTickSizeTop,v=(r-2*a.scaleGridLineWidth-2*a.barValueSpacing-(a.barDatasetSpacing*t.datasets.length-1)-(a.barStrokeWidth/2*t.datasets.length-1))/t.datasets.length,v>=0&&1>=v&&(v=1),0>v&&v>=-1&&(v=-1);var x=0;if(f.minValue<0)var x=calculateOffset(a.logarithmic,0,d,p);l(),animationLoop(a,o,i,e,S.clrx,S.clry,S.clrwidth,S.clrheight,u+S.availableWidth/2,m-S.availableHeight/2,u,m,t)}else testRedraw(e,t,a)},requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)}}(),cache={}};